<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Intended as a home for Lambda School curriculum.">
<meta name="author" content="">
<meta name="generator" content="Jekyll v3.8.0">
<title>Java - Read Data using CRUD Operations · Lambda School</title>

<link rel='stylesheet' integrity crossorigin='anonymous' href='https://d33wubrfki0l68.cloudfront.net/css/0f99ed215b3d52fa1bee44dc614ea3fa1d1bebc0/dist/css/bootstrap.min.css' />

<link href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" rel="stylesheet">
<link rel='stylesheet' href='https://d33wubrfki0l68.cloudfront.net/css/1bf8317b3d6d0c9d813c92505f052bf79ffdcdfe/assets/css/docs.min.css' />

<link rel='stylesheet' href='https://d33wubrfki0l68.cloudfront.net/css/f3626ab7ab84821f8b60ea92b4a5c6acf59991af/assets/css/main.css' />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-122016605-1', 'learn.lambdaschool.com');
  ga('send', 'pageview');
</script>

<script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
  analytics.load("BjKorwKrSvMamfNoGkBq9rISk7wF6QQX");
  analytics.page();
  }}();
</script>

<link rel="apple-touch-icon" href="/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/assets/img/favicons/manifest.json">
<link rel="mask-icon" href="/assets/img/favicons/safari-pinned-tab.svg" color="#a0001e">
<link rel="icon" href="/favicon.ico">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#a0001e">
</head>
<body>
<noscript>Please enable JavaScript to view this page.</noscript>
<div id="redirect-message" style="display: none;">
You must be logged in to view this page.
</div>
<div id="unauthorized-message" style="display: none;">
You must be a Lambda School student to view this page.
</div>
<div id="content-wrapper" style="visibility: hidden;">
<a id="skippy" class="sr-only sr-only-focusable" href="#content">
<div class="container">
<span class="skiplink-text">Skip to main content</span>
</div>
</a>
<div class="mobile-menu">
<div class="m-drop">
<div class="mobile-row">
<div class="header-row" style="padding: 3px 7px">
<a class="navbar-brand" href="/" aria-label="Lambda School"><svg xmlns="http://www.w3.org/2000/svg" width="33" height="35" viewBox="0 0 33 35" fill="none">
<path fill-rule="evenodd" clip-rule="evenodd" d="M0 0V16.0609C0 27.7335 9.08929 31.7843 15.7321 34.7513H15.75L16.2857 35C16.4107 34.9289 16.5357 34.8756 16.6786 34.8223C16.75 34.7868 16.8393 34.7513 16.9107 34.7157C23.5714 31.7665 32.6964 27.698 32.6964 16.0609V0H0ZM20.7071 23.4536L20.3571 22.5102L15.6071 10.0736C15.3214 10.802 14.6607 12.5609 13.9464 14.4442L11.2143 21.7817C11.0893 22.1371 11.1607 22.3147 11.25 22.4391C11.4464 22.6701 11.8768 22.6701 12.5554 22.6701H12.6786L12.6768 23.4518H7.56964V22.6701H7.9625C8.65893 22.6701 9.23036 22.368 9.65893 21.5152L10.1768 20.3426L14.9089 8.29696L14.0696 6.07614H18.4804L24.5696 22.0127L25.125 23.4536H20.7071Z" fill="#EC3944" />
</svg></a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mobile-course-menu" aria-controls="mobile-course-menu" aria-expanded="false" aria-label="Toggle navigation">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"></path></svg>
</button>
</div>
</div>
<div class="nav-row">
<div class="results-container">
<ul id="results-container" class="dropdown list-group"></ul>
</div>
<div id="mobile-course-menu" class="collapse nav-row">
<div class="docs-mobile-sidebar" id="bd-docs-nav-mobile">
<nav class="bd-links">
<div class="bd-toc-item">
<h4 class="bd-toc-link">Web API: Java</h4>
</div>

<div class="bd-toc-item ">
<a class="bd-toc-link" href="/web4java/sprint/recnLDyTtONLTMiFJ">
1.&nbsp;&nbsp;Java Precourse Information
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/web4java/module/recfnUAvFbeyIAHib/">
Welcome to Java Spring
</a>
</li>
<li>
<a href="/web4java/module/recjH0lMflsFIVzDM/">
Java Spring Course Table of Contents
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/web4java/sprint/recoJ4ZqNQWX3cy6E">
2.&nbsp;&nbsp;Java Fundamentals
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/web4java/module/recAGVTYNZyJbEFpu/">
Java - JDK and Java Classes
</a>
</li>
<li>
<a href="/web4java/module/rec6Hrk77HupYeoN5/">
Java Interfaces, Abstract Classes, Lambda Expression
</a>
</li>
<li>
<a href="/web4java/module/recyJ663TrxVgpqY9/">
Java - RDBMS and SQL Basics
</a>
</li>
<li>
<a href="/web4java/module/recqtftA9E98qpbak/">
Java - Intro to Maven, Spring, and Tomcat Using REST API
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/web4java/sprint/recRVUSWQEtosl0Cz">
3.&nbsp;&nbsp;RDBMS and Intro to APIs
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/web4java/module/recb0OVmRrJzqhH4D/">
Java - Spring Database Creation Including Seed Data
</a>
</li>
<li class="active bd-sidenav-active">
<a href="/web4java/module/rec3THcdjv8BumGCt/">
Java - Read Data using CRUD Operations
</a>
</li>
<li>
<a href="/web4java/module/recJihkiNn2KH2nEW/">
Java - Inserting Deleting and Updating Data using CRUD Operations
</a>
</li>
<li>
<a href="/web4java/module/rec2oQCFWOVShtxIx/">
Java - Data Modeling and Auditing Fields with custom querying
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/web4java/sprint/recSqm5AAEkJcIl3p">
4.&nbsp;&nbsp;Java Frameworks
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/web4java/module/rec3E1WYDyoiEF1e3/">
Java - Exception Handling
</a>
</li>
<li>
<a href="/web4java/module/rececDV2OMIUcY2eH/">
Java - User Authentication
</a>
</li>
<li>
<a href="/web4java/module/recDboXln5wm4aKJt/">
Java - Automated Testing
</a>
</li>
<li>
<a href="/web4java/module/rec7pCiBPzI4DkAJT/">
Java - Java Deployment and Best Practices
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/web4java/sprint/recC5dhR9menaROwx">
5.&nbsp;&nbsp;WEB Unit 4 Java Build
</a>
<ul class="nav bd-sidenav">

</ul>
</div>
<hr>
</nav>
</div>
</div>
</div>
</div>
</div>
<div class="main-container">
<div class="sidebar-container bd-sidebar">
<div class="docs-sidebar">
<a class="navbar-brand" href="/" aria-label="Lambda School"><svg width="135" height="35" viewBox="0 0 756 197" fill="#ec3944"><g><path d="M292.9,126.6h-6.7c-9,0-12.6-1.9-12.6-9.5V48.5c0-7.7,1.6-8.6,11.4-9.7v-4.5h-41.3v4.5 c9.8,1.1,11.4,1.9,11.4,9.7v69.3c0,7.7-1.6,8.6-11.4,9.7v4.5h73.7l4.9-29.4h-4.4C308.5,119.6,303.9,126.6,292.9,126.6z"></path><path d="M385.5,121.1V79.3c0-15.8-9.4-22.4-26.6-22.4c-15,0-26.8,6.6-26.8,19.3c0,2.4,0.2,3.3,0.8,5h16.6 c-0.5-2-0.7-5-0.7-7.5c0-9.6,3.6-12.4,9.4-12.4c6.4,0,9.7,2,9.7,14.4v11.2l-20.8,7.7c-10.6,4.1-19.3,8.8-19.3,20.7 c0,10.9,7.5,17.8,18.6,17.8c9.9,0,17.4-6.2,21.9-12.1l0.1-0.1l0,0V132h26v-4.4C387.7,127.1,385.5,126.2,385.5,121.1z M368,117.8 c-4.4,3.3-7.6,5.3-12,5.4c-7.7,0-11.2-5.2-11.2-12.6c0-7.7,3.6-11.2,9.8-13.5l13.4-5.4V117.8L368,117.8z"></path><path d="M514.4,121V79.5c0-14.8-6-22.4-18.7-22.4c-11.5,0-19.4,6.6-25.5,13.9c-1.8-9.6-7.7-13.9-17.8-13.9 c-11.4,0-18.7,6.2-24.8,13.6V57h-2.3l-23.8,7.4v2.4l8.6,5v49.4c0,5-2.1,6.1-8.9,6.4v4.4h35.1v-4.4c-6.7-0.3-8.7-1.3-8.7-6.4v-47 c4.7-3.6,9.5-6.5,15.5-6.5c7.6,0,10.5,4.2,10.5,12.7v40.8c0,5-1.9,6.1-8.7,6.4v4.4l34.8,0v-4.4c-6.7-0.3-8.6-1.3-8.6-6.4v-47 c4.7-3.6,9.5-6.5,15.5-6.5c7.6,0,10.5,4.2,10.5,12.7l-0.1,40.5c0,5-1.8,6.4-8.6,6.7l0,4.4h35.1v-4.4 C516.7,127.4,514.4,126.1,514.4,121z"></path><path d="M573.2,57.3c-11,0-18.5,5.7-23.4,12.8V22.9h-2.7l-23.4,6.8v2.5l8.6,4.5V132h2.9l8-3.5c5.8,3.3,12.3,5,20.2,5 c20.8,0,37.4-15.8,37.4-42.6C600.9,69.9,590.4,57.3,573.2,57.3z M563.4,128.7c-5.4,0-10.3-2.4-13.7-7.9V73.6 c3.4-3.4,8.5-5.7,13.5-5.7c13.9,0,20,12.8,20,29.5C583.3,114.7,575.8,128.5,563.4,128.7z"></path><path d="M677,121.2V22.8h-2.6L651,29.6V32l8.6,4.5v25.7c-3.4-3.2-8.8-5.1-15.5-5.1c-19.9,0-35.2,15.3-35.2,41.3 c0,20.7,11.2,34.6,28.1,34.6c9.8,0,17-5.3,22.6-13.1v0.9V132h26.3l0-4.4C679.1,127.3,677,126.3,677,121.2z M659.6,117.1 L659.6,117.1c-3.4,3.4-8,5.1-13.2,5.1c-13.2,0-20.4-12.8-20.4-29.8c0-17.8,7.3-29.2,19.5-29.2c8.7,0,14.1,6.9,14.1,18.3 L659.6,117.1z"></path><path d="M747.1,121.1V79.3c0-15.8-9.4-22.4-26.6-22.4c-15,0-26.8,6.6-26.8,19.3c0,2.4,0.2,3.3,0.8,5h16.6 c-0.5-2-0.7-5-0.7-7.5c0-9.6,3.6-12.4,9.4-12.4c6.4,0,9.7,2,9.7,14.4v11.2l-20.8,7.7c-10.6,4.1-19.3,8.8-19.3,20.7 c0,10.9,7.5,17.8,18.6,17.8c9.9,0,17.4-6.2,21.9-12.1v-0.1h0.1l0,11.1l26,0.1v-4.5C749.3,127.1,747.1,126.2,747.1,121.1z M729.6,117.8c-4.4,3.3-7.6,5.3-12.1,5.4c-7.7,0-11.2-5.2-11.2-12.6c0-7.7,3.6-11.2,9.8-13.5l13.4-5.4L729.6,117.8L729.6,117.8z"></path></g><path d="M0,0v90.4c0,65.7,50.9,88.5,88.1,105.2h0.1l3,1.4c0.7-0.4,1.4-0.7,2.2-1c0.4-0.2,0.9-0.4,1.3-0.6 c37.3-16.6,88.4-39.5,88.4-105V0H0z M116,132l-2-5.3l-26.6-70c-1.6,4.1-5.3,14-9.3,24.6l-15.3,41.3c-0.7,2-0.3,3,0.2,3.7 c1.1,1.3,3.5,1.3,7.3,1.3H71l0,4.4H42.4l0-4.4h2.2c3.9,0,7.1-1.7,9.5-6.5l2.9-6.6l26.5-67.8l-4.7-12.5h24.7l34.1,89.7l3.1,8.1H116z"></path></svg></a>
<ul id="results-container" class="dropdown list-group"></ul>
<nav class="bd-links collapse" id="bd-docs-nav">
<div class="bd-toc-item">
<h4 class="bd-toc-link">Web API: Java</h4>
</div>

<div class="bd-toc-item ">
<a class="bd-toc-link" href="/web4java/sprint/recnLDyTtONLTMiFJ">
1.&nbsp;&nbsp;Java Precourse Information
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/web4java/module/recfnUAvFbeyIAHib/">
Welcome to Java Spring
</a>
</li>
<li>
<a href="/web4java/module/recjH0lMflsFIVzDM/">
Java Spring Course Table of Contents
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/web4java/sprint/recoJ4ZqNQWX3cy6E">
2.&nbsp;&nbsp;Java Fundamentals
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/web4java/module/recAGVTYNZyJbEFpu/">
Java - JDK and Java Classes
</a>
</li>
<li>
<a href="/web4java/module/rec6Hrk77HupYeoN5/">
Java Interfaces, Abstract Classes, Lambda Expression
</a>
</li>
<li>
<a href="/web4java/module/recyJ663TrxVgpqY9/">
Java - RDBMS and SQL Basics
</a>
</li>
<li>
<a href="/web4java/module/recqtftA9E98qpbak/">
Java - Intro to Maven, Spring, and Tomcat Using REST API
</a>
</li>

</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/web4java/sprint/recRVUSWQEtosl0Cz">
3.&nbsp;&nbsp;RDBMS and Intro to APIs
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/web4java/module/recb0OVmRrJzqhH4D/">
Java - Spring Database Creation Including Seed Data
</a>
</li>
<li class="active bd-sidenav-active">
<a href="/web4java/module/rec3THcdjv8BumGCt/">
Java - Read Data using CRUD Operations
</a>
</li>
<li>
<a href="/web4java/module/recJihkiNn2KH2nEW/">
Java - Inserting Deleting and Updating Data using CRUD Operations
</a>
</li>
<li>
<a href="/web4java/module/rec2oQCFWOVShtxIx/">
Java - Data Modeling and Auditing Fields with custom querying
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/web4java/sprint/recSqm5AAEkJcIl3p">
4.&nbsp;&nbsp;Java Frameworks
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/web4java/module/rec3E1WYDyoiEF1e3/">
Java - Exception Handling
</a>
</li>
<li>
<a href="/web4java/module/rececDV2OMIUcY2eH/">
Java - User Authentication
</a>
</li>
<li>
<a href="/web4java/module/recDboXln5wm4aKJt/">
Java - Automated Testing
</a>
</li>
<li>
<a href="/web4java/module/rec7pCiBPzI4DkAJT/">
Java - Java Deployment and Best Practices
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/web4java/sprint/recC5dhR9menaROwx">
5.&nbsp;&nbsp;WEB Unit 4 Java Build
</a>
<ul class="nav bd-sidenav">

</ul>
</div>
<hr>
</nav>
</div>
</div>
<main class="content-container flex-wrapper" role="main">
<div class="sticky-nav">
<div class="sprint-nav">
<ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#prepare">Prepare</a></li>
<li class="toc-entry toc-h2"><a href="#learn">Learn</a></li>
<li class="toc-entry toc-h2"><a href="#guided-project">Guided Project</a></li>
<li class="toc-entry toc-h2"><a href="#project">Project</a></li>
<li class="toc-entry toc-h2"><a href="#review">Review</a></li>
</ul>
</div>

</div>
<div class="wrapper limit-width">
<div class="flex-wrapper">
<div class="limit-width">
<div class="jumbotron">
<h1 class="bd-title" id="content">Java - Read Data using CRUD Operations</h1>
<span class="lead">
<p class="bd-lead"></p>
<style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}
</style>
<p><a id="Read_Data_using_CRUD_Operation"></a></p>
</span>
<strong>At the end of this module, you should be able to:</strong>
<ul>
<li>perform CRUD operations on an RDBMS using JPA and Hibernate (reading)</li>
<li>use JPA constructs to create advanced queries</li>
<li>use the JsonIgnoreProperties annotation to prevent infinite loops</li>
<li>use SQL, JPA and Hibernate to perform custom query operations on a RDBMS through a Spring Application</li>
</ul>
</div>
<div class="alert alert-warning" role="alert">
<h4>Pro Tip</h4>
<p>When raising a problem with a supervisor, provide potential solutions to the problem.</p>
</div>
<h2 class="display-4">
<a id="prepare" class="anchor" href="#prepare" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prepare</h2>
<p class="lead">Review each preclass resource before class.</p>
<div class="preclass">
<ul class="list-group list-group-flush">
</ul>
</div>
<h2 class="display-4">
<a id="learn" class="anchor" href="#learn" aria-hidden="true"><span class="octicon octicon-link"></span></a>Learn</h2>
<h4 class="mark mb-3 p-2">Learn to perform CRUD operations on an RDBMS using JPA and Hibernate (reading)</h4>
<p><a id="CRUD_Reading"></a></p>
<h5>Overview</h5>
<ul>
<li>See the Github Repository <a href="https://github.com/LambdaSchool/java-sampleemps.git">https://github.com/LambdaSchool/java-sampleemps.git/sampleemps_read</a>tt for the code used in the objective.</li>
</ul>
<h3 id="software-needed">Software Needed</h3>
<ul>
<li>Java Development Kit (JDK) - at least version 11</li>
<li>JetBrains IntelliJ IDEA IDE</li>
<li>Postman</li>
</ul>
<h3 id="review-of-crud">Review of CRUD</h3>
<p>CRUD are the functions that will be done by our application. They are, with their corresponding HTTP Method:</p>
<table>
<thead>
<tr>
<th>Letter</th>
<th>CRUD</th>
<th>Http Method</th>
</tr>
</thead>
<tbody>
<tr>
<td>C</td>
<td>Create</td>
<td>POST</td>
</tr>
<tr>
<td>R</td>
<td>Read</td>
<td>GET</td>
</tr>
<tr>
<td>U</td>
<td>Update</td>
<td>PUT, PATCH</td>
</tr>
<tr>
<td>D</td>
<td>Delete</td>
<td>DELETE</td>
</tr>
</tbody>
</table>
<h5>Follow Along</h5>
<p>Now let’s enter some of the code continuing adding to the sample employees application you began in the last module. The finished application for this module can be found at <a href="https://github.com/LambdaSchool/java-sampleemps.git">https://github.com/LambdaSchool/java-sampleemps.git/sampleemps_read</a>t</p>
<ul>
<li>Under the subpackage <code class="highlighter-rouge">controllers</code>
<ul>
<li>add to the class <code class="highlighter-rouge">EmployeeController</code>
</li>
<li>Enter the following code in that class</li>
<li>Entering the comments is optional</li>
<li>Try not entering the imports. Let IntelliJ do that for you</li>
</ul>
</li>
<li>Note
<ul>
<li>we are adding GET mappings, routes to the controller, hence the annotation GetMapping.</li>
<li>GetMapping takes a parameter, the route, which is called <code class="highlighter-rouge">value</code>
</li>
<li>Spring ties together the GetMapping to the Java method that follows the GetMapping</li>
</ul>
</li>
</ul>
<pre><code class="language-JAVA">package com.lambdaschool.sampleemps.controllers;

import com.lambdaschool.sampleemps.models.Employee;
import com.lambdaschool.sampleemps.services.EmployeeService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;

@RestController
@RequestMapping("/employees") // optional
public class EmployeeController
{
    @Autowired
    private EmployeeService employeeService;

    @GetMapping(value = "/employees")
    public ResponseEntity&lt;?&gt; listAllEmployees()
    {
        List&lt;Employee&gt; myEmployees = employeeService.findAllEmployees();
        return new ResponseEntity&lt;&gt;(myEmployees,
            HttpStatus.OK);
    }

    @GetMapping(value = "/employeename/{subname}")
    public ResponseEntity&lt;?&gt; listEmployeesWithName(
        @PathVariable
            String subname)
    {
        List&lt;Employee&gt; myEmployees = employeeService.findEmployeeNameContaining(subname);
        return new ResponseEntity&lt;&gt;(myEmployees,
            HttpStatus.OK);
    }

    @GetMapping(value = "/employeeemail/{subemail}")
    public ResponseEntity&lt;?&gt; listEmployeesWithEmail(
        @PathVariable
            String subemail)
    {
        List&lt;Employee&gt; myEmployees = employeeService.findEmployeeEmailContaining(subemail);
        return new ResponseEntity&lt;&gt;(myEmployees,
            HttpStatus.OK);
    }
}
</code></pre>
<p>Now we need to update the service for the Employee Model</p>
<ul>
<li>Under the subpackage <code class="highlighter-rouge">services</code>
<ul>
<li>add to the class <code class="highlighter-rouge">EmployeeService</code>
</li>
<li>Enter the following code in that class</li>
</ul>
</li>
</ul>
<pre><code class="language-JAVA">package com.lambdaschool.sampleemps.services;

import com.lambdaschool.sampleemps.models.Employee;

import java.util.List;

public interface EmployeeService
{
    List&lt;Employee&gt; findAllEmployees();

    List&lt;Employee&gt; findEmployeeNameContaining(String subname);

    List&lt;Employee&gt; findEmployeeEmailContaining(String subemail);

    Employee save(Employee employee);
}
</code></pre>
<ul>
<li>Under the subpackage <code class="highlighter-rouge">services</code>
<ul>
<li>add to the class <code class="highlighter-rouge">EmployeeServiceImpl</code>
</li>
<li>Enter the following code in that class</li>
</ul>
</li>
</ul>
<pre><code class="language-JAVA">package com.lambdaschool.sampleemps.services;

import com.lambdaschool.sampleemps.models.Employee;
import com.lambdaschool.sampleemps.repositories.EmployeeRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.ArrayList;
import java.util.List;

@Service(value = "employeeSerivce") // needed to name this implementation as the service to use
public class EmployeeServiceImpl
        implements EmployeeService // notice the Impl for implementing a service
{
    @Autowired
    private EmployeeRepository employeerepos;

    @Override
    public List&lt;Employee&gt; findAllEmployees()
    {
        List&lt;Employee&gt; list = new ArrayList&lt;&gt;();
        /*
         * findAll returns an iterator set.
         * iterate over the iterator set and add each element to an array list.
         */
        employeerepos.findAll()
                .iterator()
                .forEachRemaining(list::add);
        return list;
    }

    @Override
    public List&lt;Employee&gt; findEmployeeNameContaining(String subname)
    {
        return employeerepos.findByNameContainingIgnoreCase(subname);
    }

    @Override
    public List&lt;Employee&gt; findEmployeeEmailContaining(String subemail)
    {
        return employeerepos.findByEmails_EmailContainingIgnoreCase(subemail);
    }
    
    @Transactional
    @Override
    public Employee save(Employee employee)
    {
        return employeerepos.save(employee);
    }
}
</code></pre>
<p>We are not ready to test out the application. In fact at this point, the application does not compile. We need to make some updates to the Employee Repository for the application to work. Stay tuned!!!</p>
<h5>Dig Deeper</h5>
<ul>
<li>
<a href="https://www.callicoder.com/spring-boot-jpa-hibernate-postgresql-restful-crud-api-example/" target="blank_">CRUD, Spring Boot, PostgreSQL</a><br> Callicoder - Spring Boot, PostgreSQL, JPA, Hibernate RESTful CRUD API Example</li>
</ul>
<hr>
<h4 class="mark mb-3 p-2">Learn to use JPA constructs to create advanced queries</h4>
<p><a id="Querying_using_JPA_Constructs"></a></p>
<h5>Overview</h5>
<ul>
<li>See the Github Repository <a href="https://github.com/LambdaSchool/java-sampleemps.git">https://github.com/LambdaSchool/java-sampleemps.git/sampleemps_read</a> for the code used in the objective.</li>
</ul>
<h3 id="software-needed">Software Needed</h3>
<ul>
<li>Java Development Kit (JDK) - at least version 11</li>
<li>JetBrains IntelliJ IDEA IDE</li>
<li>Postman</li>
</ul>
<h3 id="querying-the-database">Querying the database</h3>
<p>Getting data from the database is called Querying the database. Normally we want a subset of the available data which we specify with some search conditions. We say how we want to filter the data. The best way to do this is by using Java Spring Data Java Persistence API, the JPA. Note that the JPA does exist outside of Java Spring Data. However, when combined with Spring Data and Hibernate, the JPA really shines. The queries that are produced through Java Spring Data JPA are highly efficient. Many man hours have gone into making these queries good so let’s take advantage of that!</p>
<p>We can access to the Spring Data JPA when we create the repository connecting our Java application to our database. For example, the <code class="highlighter-rouge">CrudRepository</code> interface gives us access to the Spring Data JPA. Notice that we are creating an interface extending an interface. Note that an interface can extend another interface just like a class can extend another class.</p>
<pre><code class="language-JAVA">public interface EmployeeRepository extends CrudRepository&lt;Employee, Long&gt;
{
}
</code></pre>
<p>By default we have access to many standard querying methods. These include:</p>
<table>
<thead>
<tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>long</td>
<td>count()</td>
<td>Returns the number of records</td>
</tr>
<tr>
<td>boolean</td>
<td>existsById (long id)</td>
<td>Returns whether a record with the given id exists</td>
</tr>
<tr>
<td>Iterable&lt; T &gt;</td>
<td>findAll()</td>
<td>Returns an iterable list of all objects in the table</td>
</tr>
<tr>
<td>Iterable&lt; T &gt;</td>
<td>findAllById (Iterable&lt; long &gt; ids)</td>
<td>Returns an iterable list of all objects in the table with the ids found in the given list</td>
</tr>
<tr>
<td>Optional&lt; T &gt;</td>
 <td>findById(long id)</td>
<td>Returns an optional of the record with the given id</td>
</tr>
</tbody>
</table>
<p>Also included by default are data manipulation methods:</p>
<table>
<thead>
<tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>void</td>
<td>delete (T object)</td>
<td>deletes the given object from the table</td>
</tr>
<tr>
<td>void</td>
<td>deleteAll()</td>
<td>deletes all records in the table</td>
</tr>
<tr>
<td>void</td>
<td>deleteAll(Iterable&lt;? extends T&gt; objects)</td>
<td>deletes the objects in the iterable list from the table</td>
</tr>
<tr>
<td>void</td>
<td>deleteById(Long id)</td>
<td>deletes the record with the given primary key id</td>
</tr>
<tr>
<td>Object</td>
<td>save (S object)</td>
<td>The record is saved or updated based on the presence of the primary key.<br>If no primary key is given, one is generated and the record is added to the database.<br>If a primary key is given and the primary key exists in the database, the record with that primary key is replaced.<br>If a primary key is given and the primary key does not exists in the database, the record is added to the database with that primary key<br>The object is returned including any generated primary key</td>
</tr>
<tr>
<td>Iterable &lt; S &gt;</td>
<td>saveAll(Iterable&lt;? extends T&gt; objects)</td>
<td>All records in the iterable list are added or updated based on the presence of the primary key.<br>The primary key is handled as in the save method.<br>An iterable list is returned with all the saved objects including any generated primary keys.</td>
</tr>
</tbody>
</table>
<p>These we can use directly in our services. For example, the following code from the EmployeeServiceImpl class, returns a list of all records in the employee table</p>
<pre><code class="language-JAVA">    public List&lt;Employee&gt; findAllEmployees()
    {
        List&lt;Employee&gt; list = new ArrayList&lt;&gt;();
        /*
         * findAll returns an iterator set.
         * iterate over the iterator set and add each element to an array list.
         */
        employeerepos.findAll().iterator().forEachRemaining(list::add);
        return list;
    }
</code></pre>
<p>However, we can add an almost unlimited number of highly efficient queries by exposing other methods. For example, we can search for employees whose name contains a given substring and in the process we want the search to be case insensitive, then we expose another method in our repository:</p>
<pre><code class="language-JAVA">public interface EmployeeRepository extends CrudRepository&lt;Employee, Long&gt;
{
    List&lt;Employee&gt; findByNameContainingIgnoreCase(String subname);
}
</code></pre>
<p>We can then set up to use this method from our repository in our service interface:</p>
<pre><code class="language-JAVA">public interface EmployeeService
{
    &lt;... other code ...&gt;
    List&lt;Employee&gt; findEmployeeNameContaining(String subname);
}
</code></pre>
<p>And finally use the method in our service interface implementation:</p>
<pre><code class="language-JAVA">    @Override
    public List&lt;Employee&gt; findEmployeeNameContaining(String subname)
    {
        return findEmployeeNameContaining(subname);
    }
</code></pre>
<p>And of course to access it the appropriate code will need to be added to the Employee Controller</p>
<pre><code class="language-JAVA">    @GetMapping(value = "/employeename/{subname}")
    public ResponseEntity&lt;?&gt; listEmployeesWithName(
        @PathVariable
            String subname)
    {
        List&lt;Employee&gt; myEmployees = employeeService.findEmployeeNameContaining(subname);
        return new ResponseEntity&lt;&gt;(myEmployees,
            HttpStatus.OK);
    }
</code></pre>
<p>Here is a break down of what got included in the exposed methods name. We MUST name our methods using these keywords and field names. Field names start with a capital letter and followed by lowercase letters (We know this because we ALWAYS make our field names all lowercase in our models).</p>
<table>
<thead>
<tr>
<th>Action</th>
<th>findBy</th>
<th>data</th>
<th>filters</th>
</tr>
</thead>
<tbody>
<tr>
<td>The format is</td>
<td>findBy</td>
<td>&lt; FieldName(s) with optional AND, OR &gt;</td>
<td>&lt; Qualifiers &gt;</td>
</tr>
<tr>
<td>yielding</td>
<td>findBy</td>
<td>Employee</td>
<td>ContainingIgnoreCase</td>
</tr>
</tbody>
</table>
<p>This table is taken from the Spring IO JPA Query Creation link found in the Additional Resources and gives all the available keywords!</p>
<p><img src="https://lambdaschool.github.io/java-curriculum-assets/Sprint%2011%20-%20Java%20with%20RDBMS%20and%20API%20Intros/Module%202%20-%20JX%20Java%20-%20Read%20Data%20using%20CRUD%20Operations%20including%20Seeding%20Data/assets/JX-SP11-M2-06.png" alt="JPA Keyword Table"></p>
<p>Advanced topic: We can include field names from other tables as well. Let’s say we want to search for employees whose email contains a given substring, for example a certain domain. We can now expose a method in the employee repository as follows:</p>
<pre><code class="language-JAVA">public interface EmployeeRepository extends CrudRepository&lt;Employee, Long&gt;
{
    &lt;... other code ...&gt;

    List&lt;Employee&gt; findByEmails_EmailContainingIgnoreCase(String subemail);
}
</code></pre>
<p>Notice we gave the field name representing the other table <code class="highlighter-rouge">Emails</code> followed by <code class="highlighter-rouge">_</code> followed by the field name from the other table <code class="highlighter-rouge">Email</code>!</p>
<p>Now we can set this up in our service interface</p>
<pre><code class="language-JAVA">public interface EmployeeService
{
    &lt;... other code ...&gt;

    List&lt;Employee&gt; findEmployeeEmailContaining(String subemail);
}
</code></pre>
<p>Implement it in the service interface implementation</p>
<pre><code class="language-JAVA">    @Override
    public List&lt;Employee&gt; findEmployeeEmailContaining(String subemail)
    {
        return employeerepos.findByEmails_EmailContainingIgnoreCase(subemail);
    }
</code></pre>
<p>And access it from the Employee Controller</p>
<pre><code class="language-JAVA">    @GetMapping(value = "/employeeemail/{subemail}")
    public ResponseEntity&lt;?&gt; listEmployeesWithEmail(
        @PathVariable
            String subemail)
    {
        List&lt;Employee&gt; myEmployees = employeeService.findEmployeeEmailContaining(subemail);
        return new ResponseEntity&lt;&gt;(myEmployees,
            HttpStatus.OK);
    }
</code></pre>
<p>Many great possibilities exist using JPA querying methods. Do explore this great tool!</p>
<h5>Follow Along</h5>
<p>We need to finish creating our code started in Objective 1 CRUD Reading and worked on in the following objectives. So, let’s add some code.</p>
<ul>
<li>Under the subpackage <code class="highlighter-rouge">repositories</code>
<ul>
<li>Create the class <code class="highlighter-rouge">EmployeeRepository</code>
</li>
<li>Enter the following code in that class</li>
<li>Try not entering the imports. Let IntelliJ do that for you</li>
</ul>
</li>
</ul>
<pre><code class="language-JAVA">package com.lambdaschool.sampleemps.repositories;

import com.lambdaschool.sampleemps.models.Employee;
import org.springframework.data.repository.CrudRepository;

import java.util.List;

public interface EmployeeRepository
    extends CrudRepository&lt;Employee, Long&gt;
{
    List&lt;Employee&gt; findByNameContainingIgnoreCase(String subname);

    List&lt;Employee&gt; findByEmails_EmailContainingIgnoreCase(String subemail);
}
</code></pre>
<p>Now the sample employees application should work. Run the application and try out endpoints!</p>
<ul>
<li>http://localhost:2019/employees/employees/</li>
<li>http://localhost:2019/employees/employeename/barn</li>
<li>http://localhost:2019/employees/employeeemail/barn</li>
</ul>
<p>Okay, we still have one small issue. You end up with infinite loops on your Gets. Let’s fix those now.</p>
<p>Do refer to the GitHub repo for more information on the application! See <a href="https://github.com/LambdaSchool/java-sampleemps.git">https://github.com/LambdaSchool/java-sampleemps_read</a>t</p>
<h5>Dig Deeper</h5>
<ul>
<li>
<a href="https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html" target="blank_">CrudRepository</a><br> Official Documentation for the CrudRepository class</li>
<li>
<a href="https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#preface" target="blank_">JPA Reference</a><br> Spring IO JPA Reference</li>
<li>
<a href="https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#jpa.query-methods.query-creation" target="blank_">JPA Query</a><br> Spring IO JPA Query Creation</li>
</ul>
<hr>
<h4 class="mark mb-3 p-2">Learn to use the JsonIgnoreProperties annotation to prevent infinite loops</h4>
<p><a id="JsonIgnoreProperties"></a></p>
<h5>Overview</h5>
<ul>
<li>See the Github Repository <a href="https://github.com/LambdaSchool/java-sampleemps.git">https://github.com/LambdaSchool/java-sampleemps.git/sampleemps_read</a>tt for the code used in the objective.</li>
</ul>
<h3 id="software-needed">Software Needed</h3>
<ul>
<li>Java Development Kit (JDK) - at least version 11</li>
<li>JetBrains IntelliJ IDEA IDE</li>
<li>Postman</li>
</ul>
<h3 id="the-problem">The Problem</h3>
<p>Without some intervention, our responses will end up in infinite loops constantly requesting information. This happens any time we have relationships: <code class="highlighter-rouge">@ManyToMany</code>, <code class="highlighter-rouge">@OneToMany</code>, <code class="highlighter-rouge">@ManyToOne</code>, <code class="highlighter-rouge">@OneToOne</code>, any relationships!</p>
<p>Let’s look at an example: the One To Many relationship between Employee and Email</p>
<p>To represent this relationship, in the <code class="highlighter-rouge">Employee</code> model we have</p>
<pre><code class="language-JAVA">    @OneToMany(mappedBy = "employee",
            cascade = CascadeType.ALL,
            orphanRemoval = true)
    private List&lt;Email&gt; emails = new ArrayList&lt;&gt;();
</code></pre>
<p>To represent this relationship, in the <code class="highlighter-rouge">Email</code> model we have</p>
<pre><code class="language-JAVA">    @ManyToOne
    @JoinColumn(name = "employeeid",
            nullable = false)
    private Employee employee;
</code></pre>
<p>If we run the application as it stands, our output results in an infinite loop. Expand the following to see an example of this data</p>
<details>
<summary>http://localhost:2019/employees/employees</summary>
<pre><code class="language-JSON">

[
    {
        "employeeid": 1,
        "name": "CINNAMON",
        "emails": [
            {
                "emailid": 1,
                "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b8d0d7c8cbf8d4d7dbd9d496dbd7d5">[email&#160;protected]</a>",
                "employee": {
                    "employeeid": 1,
                    "name": "CINNAMON",
                    "emails": [
                        {
                            "emailid": 1,
                            "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="adc5c2dddeedc1c2ceccc183cec2c0">[email&#160;protected]</a>",
                            "employee": {
                                "employeeid": 1,
                                "name": "CINNAMON",
                                "emails": [
                                    {
                                        "emailid": 1,
                                        "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="60080f1013200c0f03010c4e030f0d">[email&#160;protected]</a>",
                                        "employee": {
                                            "employeeid": 1,
                                            "name": "CINNAMON",
                                            "emails": [
                                                {
                                                    "emailid": 1,
                                                    "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a9c1c6d9dae9c5c6cac8c587cac6c4">[email&#160;protected]</a>",
                                                    "employee": {
                                                        "employeeid": 1,
                                                        "name": "CINNAMON",
                                                        "emails": [
                                                            {
                                                                "emailid": 1,
                                                                "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0b63647b784b6764686a6725686466">[email&#160;protected]</a>",
                                                                "employee": {
                                                                    "employeeid": 1,
                                                                    "name": "CINNAMON",

&lt;... continues ...&gt;

</code></pre>
</details>
<p>What is happening</p>
<ul>
<li>An Employee’s data gets displayed. Part of this display is list of Emails
<ul>
<li>Thus an Email object gets printed. The Email object includes an Employee Object</li>
</ul>
</li>
<li>Thus an Employee’s data gets displayed. Part of this display is list of Emails
<ul>
<li>Thus an Email object gets printed. The Email object includes an Employee Object</li>
</ul>
</li>
<li>Thus an Employee’s data gets displayed. Part of this display is list of Emails
<ul>
<li>Thus an Email object gets printed. The Email object includes an Employee Object</li>
</ul>
</li>
<li>And so and so for ever</li>
</ul>
<p>Somehow we need to stop the cycle!</p>
<h3 id="the-solution">The Solution</h3>
<p>Here is what we do.</p>
<ul>
<li>When we are printing an Employee and say to display the Email, don’t display the Employee again in the Email Object. Notice that this is the <code class="highlighter-rouge">employee</code> field.</li>
<li>When we are printing an Email and say to display the Employee, don’t display the Email again in the Employee Object. Notice that this is the <code class="highlighter-rouge">emails</code> field.</li>
<li>When we are setting the data, getting it in from a client, the client is smart enough to not send unlimited data so we can allow for getting data in - allowsetters. We do not allow data going out - no allowgetters.</li>
</ul>
<p>We do this by using the annotation <code class="highlighter-rouge">@JsonIgnoreProperties</code> as follows:</p>
<p>In the <code class="highlighter-rouge">Employee</code> model we update the One To Many with the <code class="highlighter-rouge">@JsonIgnoreProperties("employee", )</code> annotation</p>
<pre><code class="language-JAVA">    @OneToMany(mappedBy = "employee",
            cascade = CascadeType.ALL,
            orphanRemoval = true)
    @JsonIgnoreProperties("employee")
    private List&lt;Email&gt; emails = new ArrayList&lt;&gt;();
</code></pre>
<p>In the <code class="highlighter-rouge">Email</code> model we update the Many to One relationship with the <code class="highlighter-rouge">@JsonIgnoreProperties("emails")</code>. And we only want to ignore property when we are reading the data.</p>
<pre><code class="language-JAVA">    @ManyToOne
    @JoinColumn(name = "employeeid",
            nullable = false)
    @JsonIgnoreProperties("emails")
    private Employee employee;
</code></pre>
<p>Notice that we are telling JSON to ignore the field of the current model when printing the other model. For example inside the Employee model, we annotate <code class="highlighter-rouge">@JsonIgnoreProperties</code> with the Employee field. Also notice that we name the field using the field name from the other model. Thus in the Employee model we say to ignore the employee object called <code class="highlighter-rouge">employee</code>. In the Email model we say to ignore the list of emails <code class="highlighter-rouge">emails</code>.</p>
<p>Thus we now have this complete output</p>
<details>
<summary>http://localhost:2019/employees/employees</summary>
<pre><code class="language-JSON">

[
    {
        "employeeid": 1,
        "name": "CINNAMON",
        "emails": [
            {
                "emailid": 1,
                "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="036b6c7370436f6c60626f2d606c6e">[email&#160;protected]</a>"
            },
            {
                "emailid": 2,
                "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="9efcebf0f0e7def6f1eeeef7f0b0f2f1fdfff2">[email&#160;protected]</a>"
            }
        ],
        "jobtitles": [
            {
                "jobtitleid": 1,
                "title": "Big Boss"
            },
            {
                "jobtitleid": 2,
                "title": "Wizard"
            }
        ]
    },
    {
        "employeeid": 2,
        "name": "BARNBARN",
        "emails": [
            {
                "emailid": 3,
                "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="086a697a666a697a664864676b6964266b6765">[email&#160;protected]</a>"
            }
        ],
        "jobtitles": [
            {
                "jobtitleid": 2,
                "title": "Wizard"
            }
        ]
    },
    {
        "employeeid": 3,
        "name": "JOHN",
        "emails": [],
        "jobtitles": []
    }
]

</code></pre>
</details>
<p>You will need to do something similar for each relationship in your application.</p>
<p>Note:</p>
<ul>
<li>
<code class="highlighter-rouge">JsonIgnoreProperties</code> works great for ending this recursive cycle of reporting</li>
<li>If you wish to ignore a specific field in a class, you do not want a specific field to be displayed to the client, for example someone’s password, you would use the annotation <code class="highlighter-rouge">JsonProperty(access = JsonProperty.Access.WRITE_ONLY)</code>
<ul>
<li>This allows to write a new password but not display it!</li>
<li>We will see this in action later in the course.</li>
</ul>
</li>
</ul>
<h5>Follow Along</h5>
<p>Let’s add the <code class="highlighter-rouge">JsonIgnoreProperties</code> to each one of our relationships.</p>
<ul>
<li>Under the subpackage <code class="highlighter-rouge">models</code>
<ul>
<li>in the class <code class="highlighter-rouge">Employee</code>
</li>
<li>add the JsonIgnoreProperties to the relationships for
<ul>
<li>Job titles</li>
<li>Emails</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code class="language-JAVA">    @ManyToMany()
    @JoinTable(name = "employeetitles",
            joinColumns = @JoinColumn(name = "employeeid"),
            inverseJoinColumns = @JoinColumn(name = "jobtitleid"))
    // we want to ignore, not display, the employees collection found in JobTitle
    @JsonIgnoreProperties(value = "employees")
    Set&lt;JobTitle&gt; jobtitles = new HashSet&lt;&gt;();
</code></pre>
<pre><code class="language-JAVA">    @OneToMany(mappedBy = "employee",
            cascade = CascadeType.ALL,
            orphanRemoval = true)
    // we want to ignore, not display, the employee object found in Email
    @JsonIgnoreProperties(value = "employee")
    private List&lt;Email&gt; emails = new ArrayList&lt;&gt;();
</code></pre>
<ul>
<li>Under the subpackage <code class="highlighter-rouge">models</code>
<ul>
<li>in the class <code class="highlighter-rouge">Email</code>
</li>
<li>add the JsonIgnoreProperties to the relationship for
<ul>
<li>employee</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code class="language-JAVA">    @ManyToOne
    @JoinColumn(name = "employeeid",
        nullable = false)
    // we want to ignore, not display, the emails collection from Employee
    @JsonIgnoreProperties("emails")
    private Employee employee;
</code></pre>
<ul>
<li>Under the subpackage <code class="highlighter-rouge">models</code>
<ul>
<li>in the class <code class="highlighter-rouge">JobTitle</code>
</li>
<li>add the JsonIgnoreProperties to the relationship for
<ul>
<li>JobTitle</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code class="language-JAVA">    @ManyToMany(mappedBy = "jobtitles")
    // we want to ignore, not display, the jobtitles collection from Employee
    @JsonIgnoreProperties("jobtitles")
    private Set&lt;Employee&gt; employees = new HashSet&lt;&gt;();
</code></pre>
<p><strong><em>Now</em></strong> the sample employees application should work. Run the application and try out endpoints!</p>
<ul>
<li>http://localhost:2019/employees/employees/</li>
<li>http://localhost:2019/employees/employeename/barn</li>
<li>http://localhost:2019/employees/employeeemail/barn</li>
</ul>
<p>Do refer to the GitHub repo for more information on the application! See <a href="https://github.com/LambdaSchool/java-sampleemps.git">https://github.com/LambdaSchool/java-sampleemps_read</a></p>
<h5>Dig Deeper</h5>
<ul>
<li>
<a href="https://hellokoding.com/handling-circular-reference-of-jpa-hibernate-bidirectional-entity-relationships-with-jackson-jsonignoreproperties/" target="blank_">JPA and Hibernate Circular References</a><br> JPA and Hibernate Circular References/Dependencies Handling Example with Jackson `JsonIgnoreProperties`</li>
<li>
<a href="https://www.concretepage.com/jackson-api/jackson-jsonignore-jsonignoreproperties-and-jsonignoretype" target="blank_">Jackson</a><br> Jackson @JsonIgnore, @JsonIgnoreProperties and @JsonIgnoreType</li>
</ul>
<hr>
<h4 class="mark mb-3 p-2">Learn to use SQL, JPA and Hibernate to perform custom query operations on a RDBMS through a Spring Application</h4>
<p><a id="Querying_using_SQL"></a></p>
<h5>Overview</h5>
<ul>
<li>See the Github Repository <a href="https://github.com/LambdaSchool/java-sampleemps.git">https://github.com/LambdaSchool/java-sampleemps.git/sampleemps_read</a> for the code used in the objective.</li>
</ul>
<h3 id="software-needed">Software Needed</h3>
<ul>
<li>Java Development Kit (JDK) - at least version 11</li>
<li>JetBrains IntelliJ IDEA IDE</li>
<li>Postman</li>
</ul>
<p>Sometimes we wish to send our clients data that can’t be gotten easily using JPA constructs. Maybe we need more advanced filtering, different types of tables joins, aggregations function, and the like. These call for writing our own custom SQL to query the database and extra the data we want. Let’s do a custom query!</p>
<p>We want to include an endpoint in our application that will return a list of employees with a count of how many job titles they have. To do this we will write a custom query. Let’s start with the query itself, fairly straightforward SQL with a count function. We are using a left join to include all employees, even those without job titles. We are giving specific names to each column. We will be using those in our application.</p>
<pre><code class="language-SQL">SELECT e.name as employee_name,
       count(et.employeeid) as count_job_titles
FROM employees e
LEFT JOIN employeetitles et
ON e.employeeid = et.employeeid
GROUP BY e.name
</code></pre>
<h5>Follow Along</h5>
<p>Let’s add a custom query to the sample employees application. The finished application can be found at <a href="https://github.com/LambdaSchool/java-sampleemps.git">https://github.com/LambdaSchool/java-sampleemps.git/sampleemps_read</a></p>
<p>Now let’s add the query to our Spring Application. The query will go into the appropriate Repository using a <code class="highlighter-rouge">@Query</code> annotation. Since this report is about employees, I will put the query in the repository.EmployeeRepository class. The complete new class is shown below with the new query added at the bottom.</p>
<pre><code class="language-JAVA">package com.lambdaschool.sampleemps.repositories;

import com.lambdaschool.sampleemps.models.Employee;
import org.springframework.data.repository.CrudRepository;

import java.util.List;

public interface EmployeeRepository
    extends CrudRepository&lt;Employee, Long&gt;
{
    List&lt;Employee&gt; findByNameContainingIgnoreCase(String subname);

    List&lt;Employee&gt; findByEmails_EmailContainingIgnoreCase(String subemail);

    @Query(value = "SELECT e.name as employee_name, count(et.employeeid) as count_job_titles FROM employees e LEFT JOIN employeetitles et ON e.employeeid = et.employeeid GROUP BY e.name",
        nativeQuery = true)
    List&lt;EmpNameCountJobs&gt; getCountEmpJobs();
}
</code></pre>
<p>Some notes on the new query</p>
<ul>
<li>
<code class="highlighter-rouge">@Query</code> is the notation that says we are doing a query. Makes sense. By default, query can only read, and not manipulate, data.
<ul>
<li>
<code class="highlighter-rouge">@Query</code> takes some attributes
<ul>
<li>
<code class="highlighter-rouge">value</code> is the actual query in String form. Yes, the query has to be all on one line!</li>
<li>
<code class="highlighter-rouge">nativeQuery = true</code> means the query will be using the actual database names of things. A preference of mine.
<ul>
<li>native queries are usually faster</li>
<li>can lose portability to other databases if care is not taken in naming conventions, which of course we do take care in class!</li>
</ul>
</li>
</ul>
</li>
<li>The Query returns a List of some class, <code class="highlighter-rouge">EmpNameCountJobs</code>, we have yet to define and is invoked by calling the method <code class="highlighter-rouge">getCountEmpJobs()</code>
</li>
</ul>
</li>
</ul>
<p>Now, let’s create that class <code class="highlighter-rouge">EmpNameCountJobs</code>. This class is necessary for the Jackson Dependency, which is managed by Spring Boot, to convert our list into JSON.</p>
<ul>
<li>Create New Package called <code class="highlighter-rouge">views</code>
<ul>
<li>Right click on the package <code class="highlighter-rouge">sampleemps</code>
<ul>
<li>Select <code class="highlighter-rouge">New</code> -&gt; <code class="highlighter-rouge">Package</code>
</li>
<li>enter <code class="highlighter-rouge">views</code> at the end of the main package name.</li>
</ul>
</li>
</ul>
</li>
<li>Now we need to create the class.
<ul>
<li>Under the package <code class="highlighter-rouge">views</code>, create a new Java Class
<ul>
<li>It is an interface</li>
<li>Name it <code class="highlighter-rouge">EmpNameCountJobs</code>
</li>
</ul>
</li>
</ul>
</li>
<li>We have to be very careful with the names of our methods. Specific names are needed for the Spring Framework to properly generate the JSON.
<ul>
<li>Naming is <code class="highlighter-rouge">getFieldname</code>. The word <code class="highlighter-rouge">get</code> followed by the field name starting with a capital letter followed by all lowercase.</li>
<li>This only works if you have kept all field names lowercase as recommended!</li>
<li>This is why we put aliases on each of our columns in the query. We need to know the exact names of the columns!</li>
</ul>
</li>
<li>Following those recommendations, you get the following code. Notice that our report, our custom query, has two columns and our interface has two corresponding methods! Order does not matter; naming does!!!</li>
</ul>
<pre><code class="language-Java">package com.lambdaschool.sampleemps.views;

public interface EmpNameCountJobs
{
    String getEmployee_name();
    int getCount_job_titles();
}
</code></pre>
<p>Now let’s use our new query. We use like we use any regular read method from our repository. We make a service call and a controller method for our clients!</p>
<ul>
<li>Additions to services.EmployeeService</li>
</ul>
<pre><code class="language-JAVA">/* ... other code ... */
    List&lt;EmpNameCountJobs&gt; getEmpNameCountJobs();
/* ... other code ... */
</code></pre>
<ul>
<li>Additions to services.EmployeeServiceImpl</li>
</ul>
<pre><code class="language-JAVA">/* ... other code ... */
    @Override
    public List&lt;EmpNameCountJobs&gt; getEmpNameCountJobs()
    {
        return employeerepos.getCountEmpJobs();
    }
/* ... other code ... */
</code></pre>
<ul>
<li>Additions to controllers.EmployeeController</li>
</ul>
<pre><code class="language-JAVA">/* ... other code ... */
    @GetMapping(value = "/job/counts")
    public ResponseEntity&lt;?&gt; getEmpJobCounts()
    {
        List&lt;EmpNameCountJobs&gt; myEmployees = employeeService.getEmpNameCountJobs();
        return new ResponseEntity&lt;&gt;(myEmployees,
            HttpStatus.OK);
    }
/* ... other code ... */
</code></pre>
<p>And now we can generate the following JSON!</p>
<details>
<summary>http://localhost:2019/employees/job/counts</summary>
<pre><code class="language-JSON">

[
    {
        "employee_name": "Adena Jones",
        "count_job_titles": 0
    },
    {
        "employee_name": "Apryl Brekke",
        "count_job_titles": 0
    },
    {
        "employee_name": "Argentina Homenick",
        "count_job_titles": 0
    },
    {
        "employee_name": "BARNBARN",
        "count_job_titles": 1
    },
    {
        "employee_name": "Brant Brown",
        "count_job_titles": 0
    },
    {
        "employee_name": "CINNAMON",
        "count_job_titles": 2
    },
    {
        "employee_name": "Clint Mertz Jr.",
        "count_job_titles": 0
    },
    {
        "employee_name": "Curtis Marquardt",
        "count_job_titles": 0
    },
    {
        "employee_name": "Donte Kling",
        "count_job_titles": 0
    },
    {
        "employee_name": "Emile Volkman",
        "count_job_titles": 0
    },
    {
        "employee_name": "Enda Walker",
        "count_job_titles": 0
    },
    {
        "employee_name": "Fermin Hermiston",
        "count_job_titles": 0
    },
    {
        "employee_name": "JOHN",
        "count_job_titles": 1
    },
    {
        "employee_name": "Josphine Wisozk",
        "count_job_titles": 0
    },
    {
        "employee_name": "Lauri Kuvalis",
        "count_job_titles": 0
    },
    {
        "employee_name": "Leonel Lowe DVM",
        "count_job_titles": 0
    },
    {
        "employee_name": "Lia Dach III",
        "count_job_titles": 0
    },
    {
        "employee_name": "Luigi Schmidt",
        "count_job_titles": 0
    },
    {
        "employee_name": "Lynwood Hessel",
        "count_job_titles": 0
    },
    {
        "employee_name": "Mohammad Leuschke",
        "count_job_titles": 0
    },
    {
        "employee_name": "Mrs. Eula Barton",
        "count_job_titles": 0
    },
    {
        "employee_name": "Noma Borer",
        "count_job_titles": 0
    },
    {
        "employee_name": "Ralph Stiedemann",
        "count_job_titles": 0
    },
    {
        "employee_name": "Reginald Ferry",
        "count_job_titles": 0
    },
    {
        "employee_name": "Russell Hilpert",
        "count_job_titles": 0
    },
    {
        "employee_name": "Theo Borer V",
        "count_job_titles": 0
    },
    {
        "employee_name": "Traci Mueller",
        "count_job_titles": 0
    },
    {
        "employee_name": "Tristan Kemmer",
        "count_job_titles": 0
    }
]

</code></pre>
</details>
<h5>Dig Deeper</h5>
<ul>
<li>
<a href="https://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-three-custom-queries-with-query-methods/" target="blank_">Spring Data JPA Tutorial Part Three: Custom Queries with Query Methods - dated but good</a><br> </li>
<li>
<a href="https://www.baeldung.com/jpa-queries-custom-result-with-aggregation-functions" target="blank_">Baeldung: Customizing the Result of JPA Queries with Aggregation Functions</a><br> </li>
<li>
<a href="https://thoughts-on-java.org/spring-data-jpa-query-annotation/" target="blank_">Ultimate Guide: Custom Queries with Spring Data JPA’s @Query Annotation</a><br> </li>
<li>
<a href="https://attacomsian.com/blog/spring-data-jpa-query-annotation" target="blank_">Spring Data JPA Custom Queries using @Query Annotation</a><br> </li>
</ul>
<hr>
<h2>
<a id="guided-project" class="anchor" href="#guided-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>Guided Project</h2>
<h3>crudyrestaurants_read</h3>
<p>Using restaurants with menus as our model, we explore CRUD operations related to reading data working towards the crudyrestaurants_read application found in the repo</p>
<a target="_blank" href="https://github.com/LambdaSchool/java-crudyrestaurants.git">GitHub Repo</a>
<hr>
<h2 class="display-4">
<a id="project" class="anchor" href="#project" aria-hidden="true"><span class="octicon octicon-link"></span></a>Project</h2>
<ul class="list-group">
<li class="list-group-item">
<h5><a target="_blank" href="https://github.com/LambdaSchool/java-getorders.git">Java Get Orders</a></h5>
<p>This is part 2 of a 3 part series. In the first part you are tasked with setting up the database model in a Java Spring Application. In the second part you are tasked with adding Get routes to the application.</p>
</li>
</ul>
<h2 class="display-4">
<a id="review" class="anchor" href="#review" aria-hidden="true"><span class="octicon octicon-link"></span></a>Review</h2>
<h3 class="display-5">Class Recordings</h3>
<p class="lead">You can use class recordings to help you master the material.</p>
<div>
<ul class="list-group list-group-flush">
<li class="list-group-item">
<strong><a target="_blank" href="https://youtu.be/VPrFOQ3vcJY">Java Read Data Using CRUD operations for WEB33 with John Mitchell</a></strong>
</li>
<li class="list-group-item">
<a href="/archive/WEB4Java/module/rec3THcdjv8BumGCt">All previous recordings</a>
</li>
</ul>
</div>
<h3 class="display-5">Demonstrate Mastery</h3>
<p>To demonstrate mastery of this module, you need to complete and pass a code review on each of the following:</p>
<ul>
<li>Guided Project: crudyrestaurants_read</li>
<li>Project: Java Get Orders</li>
</ul>
</div>
</div>
</div>
</main>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-80850900-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'UA-80850900-4');
</script>
<script type="text/javascript">
  function getDomain() {
    const domainName = window.location.hostname.split('.')[1];
    return `${domainName}.com`;
  }
</script>
<script src="" integrity="" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
<script src="/assets/js/vendor/popper.min.js" integrity="" crossorigin="anonymous"></script><script src="/dist/js/bootstrap.min.js" integrity="" crossorigin="anonymous"></script><script src="/assets/js/activate.js"></script>
<script src="/assets/js/jekyll-search.js" type="text/javascript"></script>
<script type="text/javascript">
  SimpleJekyllSearch.init({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    dataSource: '/search.json',
    searchResultTemplate: '<li class="list-group-item"><a href="{url}" title="Java - Read Data using CRUD Operations">{title}</a></li>',
    noResultsText: '',
    limit: 10,
    fuzzy: true,
  })
</script>
<script src="/assets/js/mermaid.min.js"></script><script type="text/javascript">
  if (window.attachEvent) {
    window.attachEvent('onload', verifySignedIn);
  } else {
    if (window.onload) {
      var currentOnLoadFn = window.onload;
      var newOnLoadFn = function (evt) {
        currentOnLoadFn(evt);
        verifySignedIn();
      };
      window.onload = newOnLoadFn;
    } else {
      window.onload = verifySignedIn;
    }
  }

  function verifySignedIn() {
    if (isPagePublic()) {
      return showPageContents();
    }

    window.__user = null;
    isSignedIn().then((user) => {
      window.__user = user;

      if (!user.signedIn) {
        redirectToSignIn();
      } else if (!user.student && !window.__openToAdmissions) {
        showUnauthorizedMessage();
      } else {
        showPageContents();
      }
    });
  }

  function isPagePublic() {
    const openCourses = [
      'and-pre',
      'ds-pre',
      'fsw-pre',
      'help',
      'ios-pre',
    ];

    const openPages = [
      'cs-and',
      'cs-fsw',
      'cs-ios',
      'cr',
      'ds',
      'jx',
      'p4s',
      'ux',
    ];

    const pathParts = window.location.pathname.split('/');
    const courseName = pathParts[1];
    const pageName = pathParts[pathParts.length - 1];

    return openCourses.includes(courseName) || openPages.includes(pageName);
  }

  function isSignedIn() {
    const isDeployPreview = window.location.hostname.startsWith('deploy-preview') && window.location.hostname.endsWith('netlify.com');

    if (isDeployPreview) return Promise.resolve({ signedIn: true, student: true });

    return fetch(`${getAuthBaseUrl()}/whoami`, { credentials: 'include' })
      .then((response) => response.text())
      .then((userAsText) => userAsText ? JSON.parse(userAsText) : null)
      .then((userData) => ({ signedIn: Boolean(userData), student: Boolean(userData && userData.airtableId), id: userData ? userData.id : null, email: userData ? userData.email : null }))
      .catch((error) => {});
  }

  function redirectToSignIn() {
    const signInUrl = `${getAuthBaseUrl()}/sign-in?redirect=${encodeURIComponent(window.location.href)}&reason=auth_required`
    const redirectMessage = document.querySelector('#redirect-message');
    redirectMessage.style.display = "block";
    redirectMessage.innerHTML = `<div>You are being redirected to the sign in page. If you aren't redirected automatically, you can use <a href=${signInUrl}>this link</a>.</div>`
    window.location = signInUrl;
  }

  function showPageContents() {
    document.querySelector('#content-wrapper').style.visibility = 'visible';
  }

  function showUnauthorizedMessage() {
    document.querySelector('#unauthorized-message').style.display = 'block';
  }

  function getAuthBaseUrl() {
    const domain = getDomain();
    const authBaseUrl = `https://auth.${domain}`;
    return authBaseUrl;
  }
</script><script src="/assets/js/docs.min.js"></script><script>
  var MathJax = {
    tex: {
      inlineMath: [['$$', '$$'], ['\[', '\])']]
    },
    "HTML-CSS": {
      styles: {
        ".MathJax span": {
          color: "#000000"
        }
      }
    }
  }
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<script>
  handleExternalLinks();

  function handleExternalLinks() {
    const domain = getDomain();
    const links = document.querySelectorAll('a');
    return links.forEach((link) => {
      if (!link.host.includes(domain)) link.target = '_blank';
    })
  };
</script>
</div>
</body>
</html>
