<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Intended as a home for Lambda School curriculum.">
<meta name="author" content="">
<meta name="generator" content="Jekyll v3.8.0">
<title>Web Server II · Lambda School</title>

<link rel='stylesheet' integrity crossorigin='anonymous' href='https://d33wubrfki0l68.cloudfront.net/css/0f99ed215b3d52fa1bee44dc614ea3fa1d1bebc0/dist/css/bootstrap.min.css' />

<link href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" rel="stylesheet">
<link rel='stylesheet' href='https://d33wubrfki0l68.cloudfront.net/css/1bf8317b3d6d0c9d813c92505f052bf79ffdcdfe/assets/css/docs.min.css' />

<link rel='stylesheet' href='https://d33wubrfki0l68.cloudfront.net/css/f3626ab7ab84821f8b60ea92b4a5c6acf59991af/assets/css/main.css' />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-122016605-1', 'learn.lambdaschool.com');
  ga('send', 'pageview');
</script>

<script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
  analytics.load("BjKorwKrSvMamfNoGkBq9rISk7wF6QQX");
  analytics.page();
  }}();
</script>

<link rel="apple-touch-icon" href="/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/assets/img/favicons/manifest.json">
<link rel="mask-icon" href="/assets/img/favicons/safari-pinned-tab.svg" color="#a0001e">
<link rel="icon" href="/favicon.ico">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#a0001e">
</head>
<body>
<noscript>Please enable JavaScript to view this page.</noscript>
<div id="redirect-message" style="display: none;">
You must be logged in to view this page.
</div>
<div id="unauthorized-message" style="display: none;">
You must be a Lambda School student to view this page.
</div>
<div id="content-wrapper" style="visibility: hidden;">
<a id="skippy" class="sr-only sr-only-focusable" href="#content">
<div class="container">
<span class="skiplink-text">Skip to main content</span>
</div>
</a>
<div class="mobile-menu">
<div class="m-drop">
<div class="mobile-row">
<div class="header-row" style="padding: 3px 7px">
<a class="navbar-brand" href="/" aria-label="Lambda School"><svg xmlns="http://www.w3.org/2000/svg" width="33" height="35" viewBox="0 0 33 35" fill="none">
<path fill-rule="evenodd" clip-rule="evenodd" d="M0 0V16.0609C0 27.7335 9.08929 31.7843 15.7321 34.7513H15.75L16.2857 35C16.4107 34.9289 16.5357 34.8756 16.6786 34.8223C16.75 34.7868 16.8393 34.7513 16.9107 34.7157C23.5714 31.7665 32.6964 27.698 32.6964 16.0609V0H0ZM20.7071 23.4536L20.3571 22.5102L15.6071 10.0736C15.3214 10.802 14.6607 12.5609 13.9464 14.4442L11.2143 21.7817C11.0893 22.1371 11.1607 22.3147 11.25 22.4391C11.4464 22.6701 11.8768 22.6701 12.5554 22.6701H12.6786L12.6768 23.4518H7.56964V22.6701H7.9625C8.65893 22.6701 9.23036 22.368 9.65893 21.5152L10.1768 20.3426L14.9089 8.29696L14.0696 6.07614H18.4804L24.5696 22.0127L25.125 23.4536H20.7071Z" fill="#EC3944" />
</svg></a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mobile-course-menu" aria-controls="mobile-course-menu" aria-expanded="false" aria-label="Toggle navigation">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"></path></svg>
</button>
</div>
</div>
<div class="nav-row">
<div class="results-container">
<ul id="results-container" class="dropdown list-group"></ul>
</div>
<div id="mobile-course-menu" class="collapse nav-row">
<div class="docs-mobile-sidebar" id="bd-docs-nav-mobile">
<nav class="bd-links">
<div class="bd-toc-item">
<h4 class="bd-toc-link">Computer Science Annex</h4>
</div>

<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/recMPt6jmsCgaqrfj">
1.&nbsp;&nbsp;Data Structures: Heaps
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/csannex/module/recNbOiLfM7bfQ0aE/">
Heaps
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/recKzV5STy8vYnbQ1">
2.&nbsp;&nbsp;Intro to Django
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/csannex/module/recvCvXoZKm5cYOc4/">
Django basics and setup
</a>
</li>
<li>
<a href="/csannex/module/recuEEEsf9eXphxy0/">
Building APIs
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/recUHGX7arXkBIutr">
3.&nbsp;&nbsp;Python/Django I
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/csannex/module/rec4yg0hRHaeOmBGN/">
Getting started with Python and Django
</a>
</li>
<li>
<a href="/csannex/module/recHhVqI4Y3j6UgLa/">
Object-Oriented Programming
</a>
</li>
<li>
<a href="/csannex/module/recgVHqW0RShuQn1Z/">
Software Design Patterns
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/rec64nbdwB28JM7Qu">
 4.&nbsp;&nbsp;Python/Django II/Career Development
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/csannex/module/rec7YHjLuXabdlhof/">
REST
</a>
</li>
<li>
<a href="/csannex/module/recjIPIwz5Pn5WbPh/">
GraphQL
</a>
</li>
<li>
<a href="/csannex/module/recVsikSMFoQ25WZd/">
Model-View-Controller
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/reczMSFEG5pffpADx">
5.&nbsp;&nbsp;Python/Django III/Career Development
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/csannex/module/reccrn1If8mhlIymc/">
Object-relational mapping
</a>
</li>
<li>
<a href="/csannex/module/recU6Q1DLISGvt0dk/">
Relational Databases
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/recTTpwFpgZXtPG2o">
6.&nbsp;&nbsp;Project Week: Cellular Automata
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/csannex/module/rec42j1bkTmC0Hsro/">
Game of Life
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/recqkHjNcXzK5DTqd">
7.&nbsp;&nbsp;C Programming Topics
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/csannex/module/recLymrrD7f46rdBa/">
Introduction To C
</a>
</li>
<li>
<a href="/csannex/module/rec7YmMV7ukDLK770/">
Processes and System Calls
</a>
</li>
<li>
<a href="/csannex/module/recfiYtQDLFXGOBFA/">
Scheduling
</a>
</li>
<li>
<a href="/csannex/module/recHPT5QiPS6NOCgz/">
Operating Systems
</a>
</li>
<li>
<a href="/csannex/module/recz76g3pcHs88Dax/">
Web Server I
</a>
</li>
<li class="active bd-sidenav-active">
<a href="/csannex/module/recFGnBVmKCyR0427/">
Web Server II
</a>
</li>
<li>
<a href="/csannex/module/recH0OAnSr6ZcnZ7F/">
Theory of Computation
</a>
</li>
</ul>
</div>
</nav>
</div>
</div>
</div>
</div>
</div>
<div class="main-container">
<div class="sidebar-container bd-sidebar">
<div class="docs-sidebar">
<a class="navbar-brand" href="/" aria-label="Lambda School"><svg width="135" height="35" viewBox="0 0 756 197" fill="#ec3944"><g><path d="M292.9,126.6h-6.7c-9,0-12.6-1.9-12.6-9.5V48.5c0-7.7,1.6-8.6,11.4-9.7v-4.5h-41.3v4.5 c9.8,1.1,11.4,1.9,11.4,9.7v69.3c0,7.7-1.6,8.6-11.4,9.7v4.5h73.7l4.9-29.4h-4.4C308.5,119.6,303.9,126.6,292.9,126.6z"></path><path d="M385.5,121.1V79.3c0-15.8-9.4-22.4-26.6-22.4c-15,0-26.8,6.6-26.8,19.3c0,2.4,0.2,3.3,0.8,5h16.6 c-0.5-2-0.7-5-0.7-7.5c0-9.6,3.6-12.4,9.4-12.4c6.4,0,9.7,2,9.7,14.4v11.2l-20.8,7.7c-10.6,4.1-19.3,8.8-19.3,20.7 c0,10.9,7.5,17.8,18.6,17.8c9.9,0,17.4-6.2,21.9-12.1l0.1-0.1l0,0V132h26v-4.4C387.7,127.1,385.5,126.2,385.5,121.1z M368,117.8 c-4.4,3.3-7.6,5.3-12,5.4c-7.7,0-11.2-5.2-11.2-12.6c0-7.7,3.6-11.2,9.8-13.5l13.4-5.4V117.8L368,117.8z"></path><path d="M514.4,121V79.5c0-14.8-6-22.4-18.7-22.4c-11.5,0-19.4,6.6-25.5,13.9c-1.8-9.6-7.7-13.9-17.8-13.9 c-11.4,0-18.7,6.2-24.8,13.6V57h-2.3l-23.8,7.4v2.4l8.6,5v49.4c0,5-2.1,6.1-8.9,6.4v4.4h35.1v-4.4c-6.7-0.3-8.7-1.3-8.7-6.4v-47 c4.7-3.6,9.5-6.5,15.5-6.5c7.6,0,10.5,4.2,10.5,12.7v40.8c0,5-1.9,6.1-8.7,6.4v4.4l34.8,0v-4.4c-6.7-0.3-8.6-1.3-8.6-6.4v-47 c4.7-3.6,9.5-6.5,15.5-6.5c7.6,0,10.5,4.2,10.5,12.7l-0.1,40.5c0,5-1.8,6.4-8.6,6.7l0,4.4h35.1v-4.4 C516.7,127.4,514.4,126.1,514.4,121z"></path><path d="M573.2,57.3c-11,0-18.5,5.7-23.4,12.8V22.9h-2.7l-23.4,6.8v2.5l8.6,4.5V132h2.9l8-3.5c5.8,3.3,12.3,5,20.2,5 c20.8,0,37.4-15.8,37.4-42.6C600.9,69.9,590.4,57.3,573.2,57.3z M563.4,128.7c-5.4,0-10.3-2.4-13.7-7.9V73.6 c3.4-3.4,8.5-5.7,13.5-5.7c13.9,0,20,12.8,20,29.5C583.3,114.7,575.8,128.5,563.4,128.7z"></path><path d="M677,121.2V22.8h-2.6L651,29.6V32l8.6,4.5v25.7c-3.4-3.2-8.8-5.1-15.5-5.1c-19.9,0-35.2,15.3-35.2,41.3 c0,20.7,11.2,34.6,28.1,34.6c9.8,0,17-5.3,22.6-13.1v0.9V132h26.3l0-4.4C679.1,127.3,677,126.3,677,121.2z M659.6,117.1 L659.6,117.1c-3.4,3.4-8,5.1-13.2,5.1c-13.2,0-20.4-12.8-20.4-29.8c0-17.8,7.3-29.2,19.5-29.2c8.7,0,14.1,6.9,14.1,18.3 L659.6,117.1z"></path><path d="M747.1,121.1V79.3c0-15.8-9.4-22.4-26.6-22.4c-15,0-26.8,6.6-26.8,19.3c0,2.4,0.2,3.3,0.8,5h16.6 c-0.5-2-0.7-5-0.7-7.5c0-9.6,3.6-12.4,9.4-12.4c6.4,0,9.7,2,9.7,14.4v11.2l-20.8,7.7c-10.6,4.1-19.3,8.8-19.3,20.7 c0,10.9,7.5,17.8,18.6,17.8c9.9,0,17.4-6.2,21.9-12.1v-0.1h0.1l0,11.1l26,0.1v-4.5C749.3,127.1,747.1,126.2,747.1,121.1z M729.6,117.8c-4.4,3.3-7.6,5.3-12.1,5.4c-7.7,0-11.2-5.2-11.2-12.6c0-7.7,3.6-11.2,9.8-13.5l13.4-5.4L729.6,117.8L729.6,117.8z"></path></g><path d="M0,0v90.4c0,65.7,50.9,88.5,88.1,105.2h0.1l3,1.4c0.7-0.4,1.4-0.7,2.2-1c0.4-0.2,0.9-0.4,1.3-0.6 c37.3-16.6,88.4-39.5,88.4-105V0H0z M116,132l-2-5.3l-26.6-70c-1.6,4.1-5.3,14-9.3,24.6l-15.3,41.3c-0.7,2-0.3,3,0.2,3.7 c1.1,1.3,3.5,1.3,7.3,1.3H71l0,4.4H42.4l0-4.4h2.2c3.9,0,7.1-1.7,9.5-6.5l2.9-6.6l26.5-67.8l-4.7-12.5h24.7l34.1,89.7l3.1,8.1H116z"></path></svg></a>
<ul id="results-container" class="dropdown list-group"></ul>
<nav class="bd-links collapse" id="bd-docs-nav">
<div class="bd-toc-item">
<h4 class="bd-toc-link">Computer Science Annex</h4>
</div>

<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/recMPt6jmsCgaqrfj">
1.&nbsp;&nbsp;Data Structures: Heaps
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/csannex/module/recNbOiLfM7bfQ0aE/">
Heaps
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/recKzV5STy8vYnbQ1">
2.&nbsp;&nbsp;Intro to Django
</a>
<ul class="nav bd-sidenav">


<li>
<a href="/csannex/module/recvCvXoZKm5cYOc4/">
Django basics and setup
</a>
</li>
<li>
<a href="/csannex/module/recuEEEsf9eXphxy0/">
Building APIs
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/recUHGX7arXkBIutr">
3.&nbsp;&nbsp;Python/Django I
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/csannex/module/rec4yg0hRHaeOmBGN/">
Getting started with Python and Django
</a>
</li>
<li>
<a href="/csannex/module/recHhVqI4Y3j6UgLa/">
Object-Oriented Programming
</a>
</li>
<li>
<a href="/csannex/module/recgVHqW0RShuQn1Z/">
Software Design Patterns
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/rec64nbdwB28JM7Qu">
4.&nbsp;&nbsp;Python/Django II/Career Development
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/csannex/module/rec7YHjLuXabdlhof/">
REST
</a>
</li>
<li>
<a href="/csannex/module/recjIPIwz5Pn5WbPh/">
GraphQL
</a>
</li>
<li>
<a href="/csannex/module/recVsikSMFoQ25WZd/">
Model-View-Controller
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/reczMSFEG5pffpADx">
5.&nbsp;&nbsp;Python/Django III/Career Development
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/csannex/module/reccrn1If8mhlIymc/">
Object-relational mapping
</a>
</li>
<li>
<a href="/csannex/module/recU6Q1DLISGvt0dk/">
Relational Databases
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/recTTpwFpgZXtPG2o">
6.&nbsp;&nbsp;Project Week: Cellular Automata
</a>
<ul class="nav bd-sidenav">

<li>
<a href="/csannex/module/rec42j1bkTmC0Hsro/">
Game of Life
</a>
</li>
</ul>
</div>
<div class="bd-toc-item ">
<a class="bd-toc-link" href="/csannex/sprint/recqkHjNcXzK5DTqd">
7.&nbsp;&nbsp;C Programming Topics
</a>
<ul class="nav bd-sidenav">


<li>
<a href="/csannex/module/recLymrrD7f46rdBa/">
Introduction To C
</a>
</li>
<li>
<a href="/csannex/module/rec7YmMV7ukDLK770/">
Processes and System Calls
</a>
</li>
<li>
<a href="/csannex/module/recfiYtQDLFXGOBFA/">
Scheduling
</a>
</li>
<li>
<a href="/csannex/module/recHPT5QiPS6NOCgz/">
Operating Systems
</a>
</li>
<li>
<a href="/csannex/module/recz76g3pcHs88Dax/">
Web Server I
</a>
</li>
<li class="active bd-sidenav-active">
<a href="/csannex/module/recFGnBVmKCyR0427/">
Web Server II
</a>
</li>
<li>
<a href="/csannex/module/recH0OAnSr6ZcnZ7F/">
Theory of Computation
</a>
</li>
</ul>
</div>
</nav>
</div>
</div>
<main class="content-container flex-wrapper" role="main">
<div class="sticky-nav">
<div class="sprint-nav">
<ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#prepare">Prepare</a></li>
<li class="toc-entry toc-h2"><a href="#learn">Learn</a></li>
<li class="toc-entry toc-h2"><a href="#review">Review</a></li>
</ul>
</div>

</div>
<div class="wrapper limit-width">
<div class="flex-wrapper">
<div class="limit-width">
<div class="jumbotron">
<h1 class="bd-title" id="content">Web Server II</h1>
<span class="lead">
<p class="bd-lead"></p>
<p>In this part of the sprint, we’ll add <em>caching</em> functionality to the webserver. This will improve performance for frequently-accessed files.</p>
</span>
<strong>At the end of this module, you should be able to:</strong>
<ul>
<li>understand MIME types and determine them from file names</li>
<li>describe and utilize a doubly-linked list</li>
<li>implement an LRU cache</li>
</ul>
</div>
<div class="alert alert-warning" role="alert">
<h4>Pro Tip</h4>
<p>When talking about your journey, don’t focus on things you don’t know yet, focus on what you’ve learned and how quickly.</p>
</div>
<h2 class="display-4">
<a id="prepare" class="anchor" href="#prepare" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prepare</h2>
<p class="lead">Review each preclass resource before class.</p>
<div class="preclass">
<ul class="list-group list-group-flush">
<li class="list-group-item">
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" src="https://www.youtube.com/embed/emkbJJau--k" frameborder="0" allowfullscreen></iframe>
</div>
</li>
<li class="list-group-item">
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" src="https://www.youtube.com/embed/3e2QbeYxh2c" frameborder="0" allowfullscreen></iframe>
</div>
</li>
<li class="list-group-item">
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" src="https://www.youtube.com/embed/GaibISkdobY" frameborder="0" allowfullscreen></iframe>
</div>
</li>
</ul>
</div>
<h2 class="display-4">
<a id="learn" class="anchor" href="#learn" aria-hidden="true"><span class="octicon octicon-link"></span></a>Learn</h2>
<h4 class="mark mb-3 p-2">Learn to understand MIME types and determine them from file names</h4>
<p>MIME types are widely used in email and the web. Although it’s a simple concept, its common use warrants a short, complete description.</p>
<h5>Overview</h5>
<p><em>Multipurpose Internet Mail Extensions</em> (MIME) was originally created for email,
as its name suggests.</p>
<p>It used to be, back in the day when cavemen were painting their hands on cave
walls, that all email was ASCII text and that was all. If you wanted to include
an image, you had to draw it in ASCII-art.</p>
<p>So in order to pass other kinds of data in email, MIME was invented. It allowed
emails to contain multiple parts, and had a way of identifying the type of data
that was contained within each part.</p>
<p>MIME is still used for email to this day.</p>
<p>But the designers of the web recognized that many of the same problems could be
solved by using MIME with the web, as well.</p>
<p>One of the problems is identifying the type of data that is arriving from the
server.</p>
<h5>Follow Along</h5>
<h5 id="what-type-is-my-data">What type is my data?</h5>
<p>Bytes are just numbers. So when the web browser receives a stream of bytes from
the server, how can it tell if this is unicode HTML data, binary animated-gif
data, or a JPEG vacation photograph? They’re all just streams of numbers!</p>
<p>The server has to tell the browser what type this data is. And it does this by
specifying the MIME type.</p>
<p>Here are some common MIME types:</p>
<ul>
<li>JPEG: <code class="highlighter-rouge">image/jpeg</code>
</li>
<li>GIF: <code class="highlighter-rouge">image/gif</code>
</li>
<li>PNG: <code class="highlighter-rouge">image/png</code>
</li>
<li>JavaScript: <code class="highlighter-rouge">application/javascript</code>
</li>
<li>JSON: <code class="highlighter-rouge">application/json</code>
</li>
<li>CSS: <code class="highlighter-rouge">text/css</code>
</li>
<li>HTML: <code class="highlighter-rouge">text/html</code>
</li>
<li>Plain TXT: <code class="highlighter-rouge">text/plain</code>
</li>
<li>Non-descript data: <code class="highlighter-rouge">application/octet-stream</code>
</li>
</ul>
<blockquote>
<p><em>Octet</em> is another name for an 8-bit value, commonly known as a <em>byte</em>.
(Historically the number of bits in a byte varied, even though today they’re
vitually always 8 bits. An octet is <em>always</em> 8 bits by definition.)</p>
</blockquote>
<p>There are <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types">a lot of MIME
types</a>.</p>
<h5 id="how-to-determine-the-type-of-data-served">How to determine the type of data served?</h5>
<h6 id="programmatic-endpoints">Programmatic endpoints</h6>
<p>If you have a programmatic endpoint (e.g. an endpoint that generates the data
instead of reading it from disk) then you simply specify the type of the data
you’re sending back.</p>
<p>For example, if you return data is:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"animal_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goat"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">37</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>then you’ll use the content type of <code class="highlighter-rouge">application/json</code>.</p>
<h6 id="file-serving">File serving</h6>
<p>But what if you’re reading data from a file and serving it?</p>
<p>If the client requests <code class="highlighter-rouge">http://example.com/foo.png</code>, we need to reply with a
type of <code class="highlighter-rouge">image/png</code>. The usual way to do this is to simply map between the file
extension <code class="highlighter-rouge">.png</code> and its MIME type <code class="highlighter-rouge">image/png</code>.</p>
<ol>
<li>
<p>Isolate the file extension.</p>
<p>Examples:</p>
<p>File is <code class="highlighter-rouge">frotz.jpg</code>, extension is <code class="highlighter-rouge">.jpg</code>.</p>
<p>File is <code class="highlighter-rouge">foo.bar.txt</code>, extension is <code class="highlighter-rouge">.txt</code>.</p>
</li>
<li>
<p>Map the extension to its MIME type.</p>
<p>Example: <code class="highlighter-rouge">.txt</code> maps to <code class="highlighter-rouge">text/plain</code></p>
</li>
<li>
<p>If you can’t find a mapping for an extension, use <code class="highlighter-rouge">application/octet-stream</code>.</p>
</li>
</ol>
<p>Comparisons are case-insensitive. Here are some examples:</p>
<ul>
<li>
<code class="highlighter-rouge">.jpg</code> or <code class="highlighter-rouge">.jpeg</code>: <code class="highlighter-rouge">image/jpeg</code>
</li>
<li>
<code class="highlighter-rouge">.gif</code>: <code class="highlighter-rouge">image/gif</code>
</li>
<li>
<code class="highlighter-rouge">.png</code>: <code class="highlighter-rouge">image/png</code>
</li>
<li>
<code class="highlighter-rouge">.js</code>: <code class="highlighter-rouge">application/javascript</code>
</li>
<li>
<code class="highlighter-rouge">.json</code>: <code class="highlighter-rouge">application/json</code>
</li>
<li>
<code class="highlighter-rouge">.css</code>: <code class="highlighter-rouge">text/css</code>
</li>
<li>
<code class="highlighter-rouge">.htm</code> or <code class="highlighter-rouge">.html</code>: <code class="highlighter-rouge">text/html</code>
</li>
<li>
<code class="highlighter-rouge">.txt</code>: <code class="highlighter-rouge">text/plain</code>
</li>
<li>
<code class="highlighter-rouge">.ico</code>: <code class="highlighter-rouge">image/x-icon</code>
</li>
</ul>
<h3 id="how-is-the-mime-type-returned">How is the MIME type returned?</h3>
<p>It comes back in the HTTP header in the <code class="highlighter-rouge">Content-Type</code> field:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Content-Type: text/html
</code></pre></div></div>
<p>Whichever library you are using should have a way to set the <code class="highlighter-rouge">Content-Type</code>
header.</p>
<p>Webservers construct their own HTTP headers so the <code class="highlighter-rouge">Content-Type</code> is included at
that time.</p>
<h5 id="what-does-a-browser-or-other-client-do-with-the-mime-type">What does a browser (or other client) do with the MIME type?</h5>
<p>The browser uses the MIME type of the data to decide what to do with it. If it’s
<code class="highlighter-rouge">text/html</code>, it displays it. Probably the same with <code class="highlighter-rouge">image/*</code> data. Also
<code class="highlighter-rouge">text/plain</code>.</p>
<p>The browser can display a number of types of data natively. But what if it gets
one it doesn’t know? There are, after all, about 1.2 zillion MIME types.</p>
<p>In that case, it has two options:</p>
<ol>
<li>
<p>It can spawn an external viewer to show the file, if it is aware of one.</p>
</li>
<li>
<p>It can simply download the file and let the user deal with it later.</p>
</li>
</ol>
<h5>Challenge</h5>
<ul>
<li>Besides email and the web, where else are MIME types used?</li>
<li>Research how MIME <em>multipart</em> works.</li>
<li>What is the MIME type for a MOD audio file?</li>
<li>What is the MIME type for a Commodore 64 floppy disk image file?</li>
</ul>
<hr>
<h4 class="mark mb-3 p-2">Learn to describe and utilize a doubly-linked list</h4>
<p>You’re already familiar with the linked list. A common variant is the <em>doubly-linked list</em> which adds some additional speed and flexibility improvement in exchange for some additional complexity.</p>
<h5>Overview</h5>
<p>A doubly-linked list is very much like a standard linked list, except the links
go both to <code class="highlighter-rouge">next</code> and <code class="highlighter-rouge">prev</code>ious nodes in the list.</p>
<p>In addition to the pointer to the <code class="highlighter-rouge">head</code> of the list, we also keep a pointer to
the <code class="highlighter-rouge">tail</code> (last element) of the list.</p>
<h5>Follow Along</h5>
<p>A doubly-linked list has a number of benefits:</p>
<ul>
<li>
<p>Traverse the list in either direction.</p>
</li>
<li>
<p>If you already have a pointer to any element in this list, you can remove that
element in O(1) time.</p>
<p>(With a standard linked list, you need to traverse to keep track of the
pointer to the previous element, making that an O(n) process.)</p>
</li>
</ul>
<p>Drawbacks:</p>
<ul>
<li>There’s more pointer manipulation when changing the list (to manage the <code class="highlighter-rouge">prev</code>
pointers in addition to the <code class="highlighter-rouge">next</code> pointers).</li>
</ul>
<h4 id="use-in-an-lru-cache">Use in an LRU cache</h4>
<p>When used with an LRU cache, pointers to cache entries in the list are also kept
in a hash table.</p>
<p>This means if you want to move a just-used cache entry to the front of the list,
you can perform the following steps:</p>
<ol>
<li>Look up the entry in the hash table: O(1)</li>
<li>Remove the entry from its position in the doubly linked list: O(1)</li>
<li>Insert the entry at the head of the doubly linked list: O(1)</li>
</ol>
<h5>Challenge</h5>
<ul>
<li>
<p>Research and list the common use cases</p>
</li>
<li>
<p>Convert one of your previously-written linked lists into a doubly-linked list.</p>
</li>
</ul>
<hr>
<h4 class="mark mb-3 p-2">Learn to implement an LRU cache</h4>
<p>Caches help speed access to commonly-used data.</p>
<p>LRU caches are a simple, common type of caching mechanism that allows cache gets and puts to happen in O(1) time.</p>
<h5>Overview</h5>
<p>A cache is a place that stores copies of commonly-used information for quick
retrieval and lookup. Hitting the cache for a piece of data should be faster
than getting it from the original source.</p>
<p>The idea is that if lots of people want access to this piece of data, you copy
it into the faster cache so they all get it in a more timely manner.</p>
<p>There is a cache on your CPU that keeps commonly-used parts of RAM so the CPU
doesn’t have to wait for the slower RAM each time.</p>
<p>Your web browser keeps a cache of web pages and other web data so that it
doesn’t have to retrieve it over the network every time you go to a page,
greatly speeding up page load times.</p>
<p>A web server can also cache files so that it doesn’t have to go through the
operating systems to get files off disk every time. It can just retrieve the
file from RAM and serve it directly.</p>
<h5>Follow Along</h5>
<h4 id="lru-caches">LRU Caches</h4>
<p>Of course, you can’t cache <em>everything</em> <em>forever</em>. You’d need a cache as big as
all the stuff you’re wanting to store, if you wanted to do that. And a web
server might have access to several terabytes of data, but only have a few
gigabytes of RAM.</p>
<p>So you have to be selective. It makes a lot of sense to have a cache of limited
size, and fill that cache with the most frequently-accessed data.</p>
<p>One strategy for doing this is called an <em>LRU cache</em>. This cache type has a
fixed number of entries (or size in bytes).</p>
<p>In the context of a webserver, when a file is requested by a client, the
following steps occur:</p>
<ol>
<li>
<p>Check if the file is in the cache.</p>
</li>
<li>
<p>If it is, serve it. We’re done.</p>
</li>
<li>
<p>If it’s not in the cache, load it from disk.</p>
</li>
<li>
<p>Save it in the cache.</p>
</li>
<li>
<p>Serve it.</p>
</li>
</ol>
<p>If the cache exceeds its max size, the <em>least recently used</em> entry in the cache
is discarded.</p>
<h4 id="how-to-build-an-lru-cache">How to build an LRU cache</h4>
<h5 id="structure">Structure</h5>
<p>LRU caches are made of two cooperating data structures: a doubly linked list and
a hash table.</p>
<ul>
<li>
<p>The hash table is used for quick lookup into the doubly linked list.</p>
</li>
<li>
<p>The doubly linked list is used to keep track of which entries are
least-recently used.</p>
<p>The item at the head of the list is the most-recently used.</p>
<p>The item at the tail is the least-recently used.</p>
</li>
</ul>
<h5 id="putting-items-in-the-cache">Putting items in the cache</h5>
<p>The item will be identified by a key (in the case of a webserver, the key should
be a string containing the path on disk to the file in question).</p>
<p>A <em>cache entry</em> will contain copies of all the information needed to serve the
file again if it is retrieved from the cache. For a webserver, this is things
like content MIME type, content length, and the content itself.</p>
<p>Additionally the cache entry should have <code class="highlighter-rouge">prev</code> and <code class="highlighter-rouge">next</code> pointers so it can be
used in a doubly linked list.</p>
<p>Finally, it should also contain a copy of the key.</p>
<p>For putting an item in the cache:</p>
<ol>
<li>
<p>Construct a new cache entry containing all the required information.</p>
</li>
<li>
<p>Add a pointer to the cache entry to the head of the doubly linked list.</p>
</li>
<li>
<p>Add a pointer to the cache entry to the hash table, indexed by the key.</p>
</li>
<li>
<p>If the cache is larger than its max allowable size, see <a href="#lru-discarding">LRU
discarding</a>, below.</p>
</li>
</ol>
<h3 id="getting-items-from-the-cache">Getting items from the cache</h3>
<ol>
<li>
<p>Look up the cache entry pointer in the hash table with the key.</p>
</li>
<li>
<p>If it’s not in the hash table, it’s not in the cache. We’re done.</p>
</li>
<li>
<p>If it is found, the cache entry is cut out of the doubly linked list.</p>
</li>
<li>
<p>The cache entry is inserted at the head of the list. (Because it’s now the
most-recently used.)</p>
</li>
</ol>
<p>Since every time you get an item from the cache it moves to the head of the
list, it becomes most-recently used. In this way, frequently-used entries tend
to bubble up to the head of the list and less-frequently-used entries tend to
fall to the tail of the list.</p>
<h5 id="lru-discarding">LRU discarding</h5>
<p>If the cache is larger than its allowable max size, the least-recently used
items must be discarded.</p>
<p>This typically happens when an item is inserted in the list that pushes it oversize.</p>
<ul>
<li>while size &gt; max_size:
<ul>
<li>get the cache entry at the tail of the list</li>
<li>remove it from the tail of the list</li>
<li>using its key, remove it from the hash table</li>
</ul>
</li>
</ul>
<h5>Challenge</h5>
<ul>
<li>What are some applications of LRU caches?</li>
<li>How would you add functionality to the cache (in pseudocode) to remove entries that are older than a cutoff age from the cache? O(n) time is OK.</li>
<li>How would you remove entries as above in O(1) time?</li>
</ul>
<hr>
<h2 class="display-4">
<a id="review" class="anchor" href="#review" aria-hidden="true"><span class="octicon octicon-link"></span></a>Review</h2>
<h3 class="display-5">Class Recordings</h3>
<p class="lead">You can use class recordings to help you master the material.</p>
<div>
<ul class="list-group list-group-flush">
<li class="list-group-item">
<strong><a target="_blank" href="https://youtu.be/wm7fDiONOAk">Web Server II for CS11 w/Sean</a></strong>
<p>Web Server II</p>
</li>
<li class="list-group-item">
<a href="/archive/CSAnnex/module/recFGnBVmKCyR0427">All previous recordings</a>
</li>
</ul>
</div>
<h3 class="display-5">Demonstrate Mastery</h3>
<p>To demonstrate mastery of this module, you need to complete and pass a code review on each of the following:</p>
<ul>
<li>Objective challenge: <ul>
<li>Besides email and the web, where else are MIME types used?</li>
<li>Research how MIME <em>multipart</em> works.</li>
<li>What is the MIME type for a MOD audio file?</li>
<li>What is the MIME type for a Commodore 64 floppy disk image file?</li>
</ul>
</li>
<li>Objective challenge: <ul>
<li>
<p>Research and list the common use cases</p>
</li>
<li>
<p>Convert one of your previously-written linked lists into a doubly-linked list.</p>
</li>
</ul>
</li>
<li>Objective challenge: <ul>
<li>What are some applications of LRU caches?</li>
<li>How would you add functionality to the cache (in pseudocode) to remove entries that are older than a cutoff age from the cache? O(n) time is OK.</li>
<li>How would you remove entries as above in O(1) time?</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</main>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-80850900-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'UA-80850900-4');
</script>
<script type="text/javascript">
  function getDomain() {
    const domainName = window.location.hostname.split('.')[1];
    return `${domainName}.com`;
  }
</script>
<script src="" integrity="" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
<script src="/assets/js/vendor/popper.min.js" integrity="" crossorigin="anonymous"></script><script src="/dist/js/bootstrap.min.js" integrity="" crossorigin="anonymous"></script><script src="/assets/js/activate.js"></script>
<script src="/assets/js/jekyll-search.js" type="text/javascript"></script>
<script type="text/javascript">
  SimpleJekyllSearch.init({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    dataSource: '/search.json',
    searchResultTemplate: '<li class="list-group-item"><a href="{url}" title="Web Server II">{title}</a></li>',
    noResultsText: '',
    limit: 10,
    fuzzy: true,
  })
</script>
<script src="/assets/js/mermaid.min.js"></script><script type="text/javascript">
  if (window.attachEvent) {
    window.attachEvent('onload', verifySignedIn);
  } else {
    if (window.onload) {
      var currentOnLoadFn = window.onload;
      var newOnLoadFn = function (evt) {
        currentOnLoadFn(evt);
        verifySignedIn();
      };
      window.onload = newOnLoadFn;
    } else {
      window.onload = verifySignedIn;
    }
  }

  function verifySignedIn() {
    if (isPagePublic()) {
      return showPageContents();
    }

    window.__user = null;
    isSignedIn().then((user) => {
      window.__user = user;

      if (!user.signedIn) {
        redirectToSignIn();
      } else if (!user.student && !window.__openToAdmissions) {
        showUnauthorizedMessage();
      } else {
        showPageContents();
      }
    });
  }

  function isPagePublic() {
    const openCourses = [
      'and-pre',
      'ds-pre',
      'fsw-pre',
      'help',
      'ios-pre',
    ];

    const openPages = [
      'cs-and',
      'cs-fsw',
      'cs-ios',
      'cr',
      'ds',
      'jx',
      'p4s',
      'ux',
    ];

    const pathParts = window.location.pathname.split('/');
    const courseName = pathParts[1];
    const pageName = pathParts[pathParts.length - 1];

    return openCourses.includes(courseName) || openPages.includes(pageName);
  }

  function isSignedIn() {
    const isDeployPreview = window.location.hostname.startsWith('deploy-preview') && window.location.hostname.endsWith('netlify.com');

    if (isDeployPreview) return Promise.resolve({ signedIn: true, student: true });

    return fetch(`${getAuthBaseUrl()}/whoami`, { credentials: 'include' })
      .then((response) => response.text())
      .then((userAsText) => userAsText ? JSON.parse(userAsText) : null)
      .then((userData) => ({ signedIn: Boolean(userData), student: Boolean(userData && userData.airtableId), id: userData ? userData.id : null, email: userData ? userData.email : null }))
      .catch((error) => {});
  }

  function redirectToSignIn() {
    const signInUrl = `${getAuthBaseUrl()}/sign-in?redirect=${encodeURIComponent(window.location.href)}&reason=auth_required`
    const redirectMessage = document.querySelector('#redirect-message');
    redirectMessage.style.display = "block";
    redirectMessage.innerHTML = `<div>You are being redirected to the sign in page. If you aren't redirected automatically, you can use <a href=${signInUrl}>this link</a>.</div>`
    window.location = signInUrl;
  }

  function showPageContents() {
    document.querySelector('#content-wrapper').style.visibility = 'visible';
  }

  function showUnauthorizedMessage() {
    document.querySelector('#unauthorized-message').style.display = 'block';
  }

  function getAuthBaseUrl() {
    const domain = getDomain();
    const authBaseUrl = `https://auth.${domain}`;
    return authBaseUrl;
  }
</script><script src="/assets/js/docs.min.js"></script><script>
  var MathJax = {
    tex: {
      inlineMath: [['$$', '$$'], ['\[', '\])']]
    },
    "HTML-CSS": {
      styles: {
        ".MathJax span": {
          color: "#000000"
        }
      }
    }
  }
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<script>
  handleExternalLinks();

  function handleExternalLinks() {
    const domain = getDomain();
    const links = document.querySelectorAll('a');
    return links.forEach((link) => {
      if (!link.host.includes(domain)) link.target = '_blank';
    })
  };
</script>
</div>
</body>
</html>
