<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Intended as a home for Lambda School curriculum.">
  <meta name="author" content="">
  <meta name="generator" content="Jekyll v3.8.0">
  <title>Building APIs · Lambda School</title>

  <link rel='stylesheet' integrity crossorigin='anonymous'
    href='https://d33wubrfki0l68.cloudfront.net/css/0f99ed215b3d52fa1bee44dc614ea3fa1d1bebc0/dist/css/bootstrap.min.css' />

  <link href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" rel="stylesheet">
  <link rel='stylesheet'
    href='https://d33wubrfki0l68.cloudfront.net/css/1bf8317b3d6d0c9d813c92505f052bf79ffdcdfe/assets/css/docs.min.css' />

  <link rel='stylesheet'
    href='https://d33wubrfki0l68.cloudfront.net/css/f3626ab7ab84821f8b60ea92b4a5c6acf59991af/assets/css/main.css' />

  <script>
    ( function ( i, s, o, g, r, a, m ) {
      i[ 'GoogleAnalyticsObject' ] = r;
      i[ r ] = i[ r ] || function () {
        ( i[ r ].q = i[ r ].q || [] ).push( arguments )
      }, i[ r ].l = 1 * new Date();
      a = s.createElement( o ),
        m = s.getElementsByTagName( o )[ 0 ];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore( a, m )
    } )( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' );
    ga( 'create', 'UA-122016605-1', 'learn.lambdaschool.com' );
    ga( 'send', 'pageview' );
  </script>

  <script>
    ! function () {
      var analytics = window.analytics = window.analytics || [];
      if ( !analytics.initialize )
        if ( analytics.invoked ) window.console && console.error && console.error( "Segment snippet included twice." );
        else {
          analytics.invoked = !0;
          analytics.methods = [ "trackSubmit", "trackClick", "trackLink", "trackForm", "pageview", "identify", "reset",
            "group", "track", "ready", "alias", "debug", "page", "once", "off", "on"
          ];
          analytics.factory = function ( t ) {
            return function () {
              var e = Array.prototype.slice.call( arguments );
              e.unshift( t );
              analytics.push( e );
              return analytics
            }
          };
          for ( var t = 0; t < analytics.methods.length; t++ ) {
            var e = analytics.methods[ t ];
            analytics[ e ] = analytics.factory( e )
          }
          analytics.load = function ( t, e ) {
            var n = document.createElement( "script" );
            n.type = "text/javascript";
            n.async = !0;
            n.src = "https://cdn.segment.com/analytics.js/v1/" + t + "/analytics.min.js";
            var a = document.getElementsByTagName( "script" )[ 0 ];
            a.parentNode.insertBefore( n, a );
            analytics._loadOptions = e
          };
          analytics.SNIPPET_VERSION = "4.1.0";
          analytics.load( "BjKorwKrSvMamfNoGkBq9rISk7wF6QQX" );
          analytics.page();
        }
    }();
  </script>

  <link rel="apple-touch-icon" href="/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" href="/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
  <link rel="manifest" href="/assets/img/favicons/manifest.json">
  <link rel="mask-icon" href="/assets/img/favicons/safari-pinned-tab.svg" color="#a0001e">
  <link rel="icon" href="/favicon.ico">
  <meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
  <meta name="theme-color" content="#a0001e">
</head>

<body>
  <noscript>Please enable JavaScript to view this page.</noscript>
  <div id="redirect-message" style="display: none;">
    You must be logged in to view this page.
  </div>
  <div id="unauthorized-message" style="display: none;">
    You must be a Lambda School student to view this page.
  </div>
  <div id="content-wrapper" style="visibility: hidden;">
    <a id="skippy" class="sr-only sr-only-focusable" href="#content">
      <div class="container">
        <span class="skiplink-text">Skip to main content</span>
      </div>
    </a>
    <div class="mobile-menu">
      <div class="m-drop">
        <div class="mobile-row">
          <div class="header-row" style="padding: 3px 7px">
            <a class="navbar-brand" href="/" aria-label="Lambda School"><svg xmlns="http://www.w3.org/2000/svg"
                width="33" height="35" viewBox="0 0 33 35" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M0 0V16.0609C0 27.7335 9.08929 31.7843 15.7321 34.7513H15.75L16.2857 35C16.4107 34.9289 16.5357 34.8756 16.6786 34.8223C16.75 34.7868 16.8393 34.7513 16.9107 34.7157C23.5714 31.7665 32.6964 27.698 32.6964 16.0609V0H0ZM20.7071 23.4536L20.3571 22.5102L15.6071 10.0736C15.3214 10.802 14.6607 12.5609 13.9464 14.4442L11.2143 21.7817C11.0893 22.1371 11.1607 22.3147 11.25 22.4391C11.4464 22.6701 11.8768 22.6701 12.5554 22.6701H12.6786L12.6768 23.4518H7.56964V22.6701H7.9625C8.65893 22.6701 9.23036 22.368 9.65893 21.5152L10.1768 20.3426L14.9089 8.29696L14.0696 6.07614H18.4804L24.5696 22.0127L25.125 23.4536H20.7071Z"
                  fill="#EC3944" />
              </svg></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mobile-course-menu"
              aria-controls="mobile-course-menu" aria-expanded="false" aria-label="Toggle navigation">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false">
                <title>Menu</title>
                <path stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10"
                  d="M4 7h22M4 15h22M4 23h22"></path>
              </svg>
            </button>
          </div>
        </div>
        <div class="nav-row">
          <div class="results-container">
            <ul id="results-container" class="dropdown list-group"></ul>
          </div>
          <div id="mobile-course-menu" class="collapse nav-row">
            <div class="docs-mobile-sidebar" id="bd-docs-nav-mobile">
              <nav class="bd-links">
                <div class="bd-toc-item">
                  <h4 class="bd-toc-link">Computer Science Annex</h4>
                </div>

                <div class="bd-toc-item ">
                  <a class="bd-toc-link" href="/csannex/sprint/recMPt6jmsCgaqrfj">
                    1.&nbsp;&nbsp;Data Structures: Heaps
                  </a>
                  <ul class="nav bd-sidenav">

                    <li>
                      <a href="/csannex/module/recNbOiLfM7bfQ0aE/">
                        Heaps
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="bd-toc-item ">
                  <a class="bd-toc-link" href="/csannex/sprint/recKzV5STy8vYnbQ1">
                    2.&nbsp;&nbsp;Intro to Django
                  </a>
                  <ul class="nav bd-sidenav">

                    <li>
                      <a href="/csannex/module/recvCvXoZKm5cYOc4/">
                        Django basics and setup
                      </a>
                    </li>
                    <li class="active bd-sidenav-active">
                      <a href="/csannex/module/recuEEEsf9eXphxy0/">
                        Building APIs
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="bd-toc-item ">
                  <a class="bd-toc-link" href="/csannex/sprint/recUHGX7arXkBIutr">
                    3.&nbsp;&nbsp;Python/Django I
                  </a>
                  <ul class="nav bd-sidenav">

                    <li>
                      <a href="/csannex/module/rec4yg0hRHaeOmBGN/">
                        Getting started with Python and Django
                      </a>
                    </li>
                    <li>
                      <a href="/csannex/module/recHhVqI4Y3j6UgLa/">
                        Object-Oriented Programming
                      </a>
                    </li>
                    <li>
                      <a href="/csannex/module/recgVHqW0RShuQn1Z/">
                        Software Design Patterns
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="bd-toc-item ">
                  <a class="bd-toc-link" href="/csannex/sprint/rec64nbdwB28JM7Qu">
                    4.&nbsp;&nbsp;Python/Django II/Career Development
                  </a>
                  <ul class="nav bd-sidenav">

                    <li>
                      <a href="/csannex/module/rec7YHjLuXabdlhof/">
                        REST
                      </a>
                    </li>
                    <li>
                      <a href="/csannex/module/recjIPIwz5Pn5WbPh/">
                        GraphQL
                      </a>
                    </li>
                    <li>
                      <a href="/csannex/module/recVsikSMFoQ25WZd/">
                        Model-View-Controller
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="bd-toc-item ">
                  <a class="bd-toc-link" href="/csannex/sprint/reczMSFEG5pffpADx">
                    5.&nbsp;&nbsp;Python/Django III/Career Development
                  </a>
                  <ul class="nav bd-sidenav">

                    <li>
                      <a href="/csannex/module/reccrn1If8mhlIymc/">
                        Object-relational mapping
                      </a>
                    </li>
                    <li>
                      <a href="/csannex/module/recU6Q1DLISGvt0dk/">
                        Relational Databases
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="bd-toc-item ">
                  <a class="bd-toc-link" href="/csannex/sprint/recTTpwFpgZXtPG2o">
                    6.&nbsp;&nbsp;Project Week: Cellular Automata
                  </a>
                  <ul class="nav bd-sidenav">

                    <li>
                      <a href="/csannex/module/rec42j1bkTmC0Hsro/">
                        Game of Life
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="bd-toc-item ">
                  <a class="bd-toc-link" href="/csannex/sprint/recqkHjNcXzK5DTqd">
                    7.&nbsp;&nbsp;C Programming Topics
                  </a>
                  <ul class="nav bd-sidenav">

                    <li>
                      <a href="/csannex/module/recLymrrD7f46rdBa/">
                        Introduction To C
                      </a>
                    </li>
                    <li>
                      <a href="/csannex/module/rec7YmMV7ukDLK770/">
                        Processes and System Calls
                      </a>
                    </li>
                    <li>
                      <a href="/csannex/module/recfiYtQDLFXGOBFA/">
                        Scheduling
                      </a>
                    </li>
                    <li>
                      <a href="/csannex/module/recHPT5QiPS6NOCgz/">
                        Operating Systems
                      </a>
                    </li>
                    <li>
                      <a href="/csannex/module/recz76g3pcHs88Dax/">
                        Web Server I
                      </a>
                    </li>
                    <li>
                      <a href="/csannex/module/recFGnBVmKCyR0427/">
                        Web Server II
                      </a>
                    </li>
                    <li>
                      <a href="/csannex/module/recH0OAnSr6ZcnZ7F/">
                        Theory of Computation
                      </a>
                    </li>
                  </ul>
                </div>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="main-container">
      <div class="sidebar-container bd-sidebar">
        <div class="docs-sidebar">
          <a class="navbar-brand" href="/" aria-label="Lambda School"><svg width="135" height="35" viewBox="0 0 756 197"
              fill="#ec3944">
              <g>
                <path
                  d="M292.9,126.6h-6.7c-9,0-12.6-1.9-12.6-9.5V48.5c0-7.7,1.6-8.6,11.4-9.7v-4.5h-41.3v4.5 c9.8,1.1,11.4,1.9,11.4,9.7v69.3c0,7.7-1.6,8.6-11.4,9.7v4.5h73.7l4.9-29.4h-4.4C308.5,119.6,303.9,126.6,292.9,126.6z">
                </path>
                <path
                  d="M385.5,121.1V79.3c0-15.8-9.4-22.4-26.6-22.4c-15,0-26.8,6.6-26.8,19.3c0,2.4,0.2,3.3,0.8,5h16.6 c-0.5-2-0.7-5-0.7-7.5c0-9.6,3.6-12.4,9.4-12.4c6.4,0,9.7,2,9.7,14.4v11.2l-20.8,7.7c-10.6,4.1-19.3,8.8-19.3,20.7 c0,10.9,7.5,17.8,18.6,17.8c9.9,0,17.4-6.2,21.9-12.1l0.1-0.1l0,0V132h26v-4.4C387.7,127.1,385.5,126.2,385.5,121.1z M368,117.8 c-4.4,3.3-7.6,5.3-12,5.4c-7.7,0-11.2-5.2-11.2-12.6c0-7.7,3.6-11.2,9.8-13.5l13.4-5.4V117.8L368,117.8z">
                </path>
                <path
                  d="M514.4,121V79.5c0-14.8-6-22.4-18.7-22.4c-11.5,0-19.4,6.6-25.5,13.9c-1.8-9.6-7.7-13.9-17.8-13.9 c-11.4,0-18.7,6.2-24.8,13.6V57h-2.3l-23.8,7.4v2.4l8.6,5v49.4c0,5-2.1,6.1-8.9,6.4v4.4h35.1v-4.4c-6.7-0.3-8.7-1.3-8.7-6.4v-47 c4.7-3.6,9.5-6.5,15.5-6.5c7.6,0,10.5,4.2,10.5,12.7v40.8c0,5-1.9,6.1-8.7,6.4v4.4l34.8,0v-4.4c-6.7-0.3-8.6-1.3-8.6-6.4v-47 c4.7-3.6,9.5-6.5,15.5-6.5c7.6,0,10.5,4.2,10.5,12.7l-0.1,40.5c0,5-1.8,6.4-8.6,6.7l0,4.4h35.1v-4.4 C516.7,127.4,514.4,126.1,514.4,121z">
                </path>
                <path
                  d="M573.2,57.3c-11,0-18.5,5.7-23.4,12.8V22.9h-2.7l-23.4,6.8v2.5l8.6,4.5V132h2.9l8-3.5c5.8,3.3,12.3,5,20.2,5 c20.8,0,37.4-15.8,37.4-42.6C600.9,69.9,590.4,57.3,573.2,57.3z M563.4,128.7c-5.4,0-10.3-2.4-13.7-7.9V73.6 c3.4-3.4,8.5-5.7,13.5-5.7c13.9,0,20,12.8,20,29.5C583.3,114.7,575.8,128.5,563.4,128.7z">
                </path>
                <path
                  d="M677,121.2V22.8h-2.6L651,29.6V32l8.6,4.5v25.7c-3.4-3.2-8.8-5.1-15.5-5.1c-19.9,0-35.2,15.3-35.2,41.3 c0,20.7,11.2,34.6,28.1,34.6c9.8,0,17-5.3,22.6-13.1v0.9V132h26.3l0-4.4C679.1,127.3,677,126.3,677,121.2z M659.6,117.1 L659.6,117.1c-3.4,3.4-8,5.1-13.2,5.1c-13.2,0-20.4-12.8-20.4-29.8c0-17.8,7.3-29.2,19.5-29.2c8.7,0,14.1,6.9,14.1,18.3 L659.6,117.1z">
                </path>
                <path
                  d="M747.1,121.1V79.3c0-15.8-9.4-22.4-26.6-22.4c-15,0-26.8,6.6-26.8,19.3c0,2.4,0.2,3.3,0.8,5h16.6 c-0.5-2-0.7-5-0.7-7.5c0-9.6,3.6-12.4,9.4-12.4c6.4,0,9.7,2,9.7,14.4v11.2l-20.8,7.7c-10.6,4.1-19.3,8.8-19.3,20.7 c0,10.9,7.5,17.8,18.6,17.8c9.9,0,17.4-6.2,21.9-12.1v-0.1h0.1l0,11.1l26,0.1v-4.5C749.3,127.1,747.1,126.2,747.1,121.1z M729.6,117.8c-4.4,3.3-7.6,5.3-12.1,5.4c-7.7,0-11.2-5.2-11.2-12.6c0-7.7,3.6-11.2,9.8-13.5l13.4-5.4L729.6,117.8L729.6,117.8z">
                </path>
              </g>
              <path
                d="M0,0v90.4c0,65.7,50.9,88.5,88.1,105.2h0.1l3,1.4c0.7-0.4,1.4-0.7,2.2-1c0.4-0.2,0.9-0.4,1.3-0.6 c37.3-16.6,88.4-39.5,88.4-105V0H0z M116,132l-2-5.3l-26.6-70c-1.6,4.1-5.3,14-9.3,24.6l-15.3,41.3c-0.7,2-0.3,3,0.2,3.7 c1.1,1.3,3.5,1.3,7.3,1.3H71l0,4.4H42.4l0-4.4h2.2c3.9,0,7.1-1.7,9.5-6.5l2.9-6.6l26.5-67.8l-4.7-12.5h24.7l34.1,89.7l3.1,8.1H116z">
              </path>
            </svg></a>
          <ul id="results-container" class="dropdown list-group"></ul>
          <nav class="bd-links collapse" id="bd-docs-nav">
            <div class="bd-toc-item">
              <h4 class="bd-toc-link">Computer Science Annex</h4>
            </div>

            <div class="bd-toc-item ">
              <a class="bd-toc-link" href="/csannex/sprint/recMPt6jmsCgaqrfj">
                1.&nbsp;&nbsp;Data Structures: Heaps
              </a>
              <ul class="nav bd-sidenav">

                <li>
                  <a href="/csannex/module/recNbOiLfM7bfQ0aE/">
                    Heaps
                  </a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item ">
              <a class="bd-toc-link" href="/csannex/sprint/recKzV5STy8vYnbQ1">
                2.&nbsp;&nbsp;Intro to Django
              </a>
              <ul class="nav bd-sidenav">


                <li>
                  <a href="/csannex/module/recvCvXoZKm5cYOc4/">
                    Django basics and setup
                  </a>
                </li>
                <li class="active bd-sidenav-active">
                  <a href="/csannex/module/recuEEEsf9eXphxy0/">
                    Building APIs
                  </a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item ">
              <a class="bd-toc-link" href="/csannex/sprint/recUHGX7arXkBIutr">
                3.&nbsp;&nbsp;Python/Django I
              </a>
              <ul class="nav bd-sidenav">

                <li>
                  <a href="/csannex/module/rec4yg0hRHaeOmBGN/">
                    Getting started with Python and Django
                  </a>
                </li>
                <li>
                  <a href="/csannex/module/recHhVqI4Y3j6UgLa/">
                    Object-Oriented Programming
                  </a>
                </li>
                <li>
                  <a href="/csannex/module/recgVHqW0RShuQn1Z/">
                    Software Design Patterns
                  </a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item ">
              <a class="bd-toc-link" href="/csannex/sprint/rec64nbdwB28JM7Qu">
                4.&nbsp;&nbsp;Python/Django II/Career Development
              </a>
              <ul class="nav bd-sidenav">

                <li>
                  <a href="/csannex/module/rec7YHjLuXabdlhof/">
                    REST
                  </a>
                </li>
                <li>
                  <a href="/csannex/module/recjIPIwz5Pn5WbPh/">
                    GraphQL
                  </a>
                </li>
                <li>
                  <a href="/csannex/module/recVsikSMFoQ25WZd/">
                    Model-View-Controller
                  </a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item ">
              <a class="bd-toc-link" href="/csannex/sprint/reczMSFEG5pffpADx">
                5.&nbsp;&nbsp;Python/Django III/Career Development
              </a>
              <ul class="nav bd-sidenav">

                <li>
                  <a href="/csannex/module/reccrn1If8mhlIymc/">
                    Object-relational mapping
                  </a>
                </li>
                <li>
                  <a href="/csannex/module/recU6Q1DLISGvt0dk/">
                    Relational Databases
                  </a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item ">
              <a class="bd-toc-link" href="/csannex/sprint/recTTpwFpgZXtPG2o">
                6.&nbsp;&nbsp;Project Week: Cellular Automata
              </a>
              <ul class="nav bd-sidenav">

                <li>
                  <a href="/csannex/module/rec42j1bkTmC0Hsro/">
                    Game of Life
                  </a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item ">
              <a class="bd-toc-link" href="/csannex/sprint/recqkHjNcXzK5DTqd">
                7.&nbsp;&nbsp;C Programming Topics
              </a>
              <ul class="nav bd-sidenav">

                <li>
                  <a href="/csannex/module/recLymrrD7f46rdBa/">
                    Introduction To C
                  </a>
                </li>
                <li>
                  <a href="/csannex/module/rec7YmMV7ukDLK770/">
                    Processes and System Calls
                  </a>
                </li>
                <li>
                  <a href="/csannex/module/recfiYtQDLFXGOBFA/">
                    Scheduling
                  </a>
                </li>
                <li>
                  <a href="/csannex/module/recHPT5QiPS6NOCgz/">
                    Operating Systems
                  </a>
                </li>
                <li>
                  <a href="/csannex/module/recz76g3pcHs88Dax/">
                    Web Server I
                  </a>
                </li>
                <li>
                  <a href="/csannex/module/recFGnBVmKCyR0427/">
                    Web Server II
                  </a>
                </li>
                <li>
                  <a href="/csannex/module/recH0OAnSr6ZcnZ7F/">
                    Theory of Computation
                  </a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
      <main class="content-container flex-wrapper" role="main">
        <div class="sticky-nav">
          <div class="sprint-nav">
            <ul class="section-nav">
              <li class="toc-entry toc-h2"><a href="#prepare">Prepare</a></li>
              <li class="toc-entry toc-h2"><a href="#learn">Learn</a></li>
              <li class="toc-entry toc-h2"><a href="#review">Review</a></li>
            </ul>
          </div>

        </div>
        <div class="wrapper limit-width">
          <div class="flex-wrapper">
            <div class="limit-width">
              <div class="jumbotron">
                <h1 class="bd-title" id="content">Building APIs</h1>
                <span class="lead">
                  <p class="bd-lead"></p>
                  <p>The back-end of a web application is responsible for exposing an API that allows the front-end to
                    create, read, update, and delete data (CRUD).</p>
                  <p>Representational State Transfer (REST) has been the dominant approach for API design, and is still
                    a friendly and useful technique for applications that mostly work with single entities. REST is more
                    of a style than a strict standard, but is most characterized by having stateless operations (a
                    request does not depend or even know about preceding requests) and extending standard HTTP methods
                    with a noun-verb paradigm to support CRUD operations on database entities.</p>
                </span>
                <strong>At the end of this module, you should be able to:</strong>
                <ul>
                  <li>set up the Django REST Framework and connect a model to an endpoint</li>
                  <li>control which information is exposed based on the currently-logged-in user</li>
                  <li>use token authorization to assign correct permissions to various users</li>
                </ul>
              </div>
              <div class="alert alert-warning" role="alert">
                <h4>Pro Tip</h4>
                <p>A witty saying proves nothing.</p>
                <footer class="blockquote-footer">
                  <p>Voltaire</p>
                </footer>
              </div>
              <h2 class="display-4">
                <a id="prepare" class="anchor" href="#prepare" aria-hidden="true"><span
                    class="octicon octicon-link"></span></a>Prepare</h2>
              <p class="lead">Review each preclass resource before class.</p>
              <div class="preclass">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">
                    <div class="embed-responsive embed-responsive-16by9">
                      <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/u_k8_bZrFD8"
                        frameborder="0" allowfullscreen></iframe>
                    </div>
                  </li>
                  <li class="list-group-item">
                    <div class="embed-responsive embed-responsive-16by9">
                      <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/Ri79BRr8BCI"
                        frameborder="0" allowfullscreen></iframe>
                    </div>
                  </li>
                  <li class="list-group-item">
                    <div class="embed-responsive embed-responsive-16by9">
                      <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/JNW0yfbsKpA"
                        frameborder="0" allowfullscreen></iframe>
                    </div>
                  </li>
                </ul>
              </div>
              <h2 class="display-4">
                <a id="learn" class="anchor" href="#learn" aria-hidden="true"><span
                    class="octicon octicon-link"></span></a>Learn</h2>
              <h4 class="mark mb-3 p-2">Learn to set up the Django REST Framework and connect a model to an endpoint
              </h4>
              <p>Django comes with a powerful REST framework that makes it easy to expose models via an API. This makes
                it a powerful contender for quick implementation of REST backends.</p>
              <h5>Overview</h5>
              <p>There are two phases to exposing a model via a REST API. First, we need to tell which fields of the
                model we want to share, as well as which records from the database we need.</p>
              <p>Once we’ve defined the data we also have to expose an endpoint so clients can hit our API and extract
                data.</p>
              <p>Like we’ve seen before, one of Django’s great strengths is how it creates beautiful, full-features
                admin UIs for us to use out of the box.</p>
              <p>Not only does it do this for the <code class="highlighter-rouge">admin/</code> endpoint, but now that
                we’ve exposed a REST API, we have a full-features UI for GETting data and POSTing new records.</p>
              <p>First we’ll install the Django REST framework and do some boilerplate config.</p>
              <p>Following that, we need to tell Django that we’re interested in exposing data for a particular model.
                We do this through the use Django <code class="highlighter-rouge">Serializer</code>s and <code
                  class="highlighter-rouge">ViewSet</code>s.</p>
              <p>One that is set up, we finally use the REST framework’s <code class="highlighter-rouge">routers</code>
                functionality to automatically hook the <code class="highlighter-rouge">Serializer</code> up to a
                specific URL endpoint.</p>
              <h5>Follow Along</h5>
              <h4 id="installing-the-rest-framework">Installing the REST Framework</h4>
              <p>We’ll be using the django REST framework: http://www.django-rest-framework.org/</p>
              <p>Open the shell if you aren’t in it and install the framework:</p>
              <div class="highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>pipenv install djangorestframework
</code></pre>
                </div>
              </div>
              <p>Next, we need to tell the project about this. Open
                <code class="highlighter-rouge">[name_of_project]/settings.py</code></p>
              <p>Under <code class="highlighter-rouge">INSTALLED_APPS</code> add <code
                  class="highlighter-rouge">'rest_framework'</code> to the list.</p>
              <p>We also need to add some boilerplate to set up permissions:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'DEFAULT_PERMISSION_CLASSES'</span><span class="p">:</span> <span class="p">[</span>
        <span class="s">'rest_framework.permissions.DjangoModelPermissionsOrAnonReadOnly'</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre>
                </div>
              </div>
              <p>This will allow read/write permissions for logged in users and read only for
                anonymous users.</p>
              <p>Launch the server and make sure everything is working, debug, and commit.</p>
              <h4 id="expose-the-personalnotes-model">Expose the PersonalNotes Model</h4>
              <p>Next, we need to add more boilerplate. In the <code class="highlighter-rouge">notes</code> folder,
                create a new file
                called <code class="highlighter-rouge">api.py</code>. This will use something called serializers and
                viewsets to
                describe which parts of the model we want to expose to the API.</p>
              <p>First, in <code class="highlighter-rouge">api.py</code>, import the serializers:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span>
</code></pre>
                </div>
              </div>
              <p>We’ll also need to import the <code class="highlighter-rouge">PersonalNote</code> class so that we can
                use it here.</p>
              <p>Convention is to name the serializer classes after what they are serializing.
                It will inherit from the specific serializer we are using for this project:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="k">class</span> <span class="nc">PersonalNoteSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">HyperlinkedModelSerializer</span><span class="p">):</span>
</code></pre>
                </div>
              </div>
              <p>Inside this class, we will make an <em>inner class</em> (nested class) called a <code
                  class="highlighter-rouge">Meta</code>
                to tell it what parts of the model we want to access:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>    <span class="c1"># Inner class nested inside PersonalNoteSerializer
</span>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">PersonalNote</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'title'</span><span class="p">,</span> <span class="s">'content'</span><span class="p">)</span>
</code></pre>
                </div>
              </div>
              <p>To visualize this, we will use something called a viewset. Add <code
                  class="highlighter-rouge">viewsets</code> to
                what is being imported from <code class="highlighter-rouge">rest_framework</code>:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span><span class="p">,</span> <span class="n">viewsets</span>
</code></pre>
                </div>
              </div>
              <p>Create a new class for this, using the same naming convention as the serializer
                and inheriting from <code class="highlighter-rouge">viewsets.ModelViewSet</code></p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="k">class</span> <span class="nc">PersonalNoteViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
</code></pre>
                </div>
              </div>
              <p>Link this back to the serializer class we made previously:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">PersonalNoteSerializer</span>
</code></pre>
                </div>
              </div>
              <p>Next, add which records to search for. We could use filters here, but for now,
                grab all of them:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="n">queryset</span> <span class="o">=</span> <span class="n">PersonalNote</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span>
</code></pre>
                </div>
              </div>
              <p>There isn’t anything we can check just yet to ensure that this is working, but
                let’s make sure we haven’t broken anything.</p>
              <p>At this point, we should have:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span><span class="p">,</span> <span class="n">viewsets</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">PersonalNote</span>

<span class="k">class</span> <span class="nc">PersonalNoteSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">HyperlinkedModelSerializer</span><span class="p">):</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">PersonalNote</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'title'</span><span class="p">,</span> <span class="s">'content'</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">PersonalNoteViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">PersonalNoteSerializer</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">PersonalNote</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span>
</code></pre>
                </div>
              </div>
              <p>Run the server, debug, commit.</p>
              <h4 id="add-routes">Add Routes</h4>
              <p>Lastly, we need to add a route to be able to access this functionality. In the
                project folder, open <code class="highlighter-rouge">urls.py</code>.</p>
              <p>We’ll need to import two things here: router functionality for Django, and the
                <code class="highlighter-rouge">PersonalNoteViewSet</code> we just created.</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">routers</span>
<span class="kn">from</span> <span class="nn">notes.api</span> <span class="kn">import</span> <span class="n">PersonalNoteViewSet</span>
</code></pre>
                </div>
              </div>
              <p>Next, make a default router from the routers package, then register that router:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="n">router</span> <span class="o">=</span> <span class="n">routers</span><span class="o">.</span><span class="n">DefaultRouter</span><span class="p">()</span>
<span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">r'notes'</span><span class="p">,</span> <span class="n">PersonalNoteViewSet</span><span class="p">)</span>
</code></pre>
                </div>
              </div>
              <p>This is similar to setting up a route in express, but we’re saying for this
                route, this (<code class="highlighter-rouge">PersonalNoteViewSet</code>) is the data we want to
                associate with it.
                (The <code class="highlighter-rouge">r</code> means that this is a regular expression, and to interpret
                the string as
                literally as possible–somewhat overkill in this case.)</p>
              <p>Next, we need to add the URL to the <code class="highlighter-rouge">urlpatterns</code> list. In order
                to do that,
                we’ll be using a function called <code class="highlighter-rouge">include()</code> that we get from <code
                  class="highlighter-rouge">django.urls</code>:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span><span class="p">,</span> <span class="n">include</span>
</code></pre>
                </div>
              </div>
              <p>And in <code class="highlighter-rouge">urlpatterns</code>:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>    <span class="n">path</span><span class="p">(</span><span class="s">'api/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
</code></pre>
                </div>
              </div>
              <p>This will set the path to <code class="highlighter-rouge">/api/notes</code>. We can use <code
                  class="highlighter-rouge">router.register</code> to add
                as many paths as we want this way, without needing to add them to <code
                  class="highlighter-rouge">urlpatterns</code></p>
              <h4 id="test-the-api">Test the API</h4>
              <p>Run the server, navigate to <code class="highlighter-rouge">/api/</code> and review the information
                there. Click the
                link to <code class="highlighter-rouge">notes</code> and review that as well.</p>
              <p>Use the admin feature at the bottom to attempt to post a new note. This will
                fail.</p>
              <p>The reason is that our <code class="highlighter-rouge">PersonalNote</code> model requires a username as
                well. We
                need to add that in.</p>
              <h5>Challenge</h5>
              <ul>
                <li>Expose another model through a different endpoint than we covered in the example.</li>
              </ul>
              <hr>
              <h4 class="mark mb-3 p-2">Learn to control which information is exposed based on the currently-logged-in
                user</h4>
              <p>So far we’ve just exposed <em>all</em> the data from a model to the entire world. But commonly it’s
                desirable to restrict access to data on a per-user basis. We’ll set that up with some additional Python
                code.</p>
              <h5>Overview</h5>
              <p>If we try to POST a new record to the database, we see that it’s missing the required <code
                  class="highlighter-rouge">user</code> field (since it doesn’t show up in the UI). We’ll retrieve this
                data from the web request and add it to the record before posting.</p>
              <p>Once we do that, we can:</p>
              <ul>
                <li>Show no results if the user isn’t logged in.</li>
                <li>Show only pertinent results to logged-in users.</li>
              </ul>
              <p>First, we’ll override the <code class="highlighter-rouge">create</code> method in our <code
                  class="highlighter-rouge">Serializer</code> so that we can add fields in addition to whatever was
                present in the UI form. Notably, we wish to add the user information.</p>
              <p>We can use the built-in debugger to explore and see what fields are at our disposal.</p>
              <p>Once we find where the user is stored in the request, we can pass that data into our model constructor
                and get a complete object to return from <code class="highlighter-rouge">create</code>.</p>
              <p>Lastly, we can also override the list of results that we pass back for a GET request. Currently we have
                it set to return everything, but we’ll modify this to return nothing when the user isn’t logged in, and
                only the user’s information when they are logged in.</p>
              <p>Django’s ORM filters make it easy to filter results.</p>
              <h5>Follow Along</h5>
              <h4 id="add-the-required-user-field-use-the-debugger">Add the Required <code
                  class="highlighter-rouge">user</code> Field, Use the Debugger</h4>
              <p>We can do that in our serializer by overriding a method from
                <code class="highlighter-rouge">serializers.HyperlinkedModelSerializer</code> called <code
                  class="highlighter-rouge">create</code>. This method needs to
                return a new <code class="highlighter-rouge">PersonalNote</code> object constructed from the passed-in
                data, which is
                in the <code class="highlighter-rouge">validated_data</code> parameter, like so by default:</p>
              <p>In <code class="highlighter-rouge">api.py</code>, <code
                  class="highlighter-rouge">PersonalNoteSerializer</code>:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>    <span class="c1"># !!! Broken code still missing the user field
</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
        <span class="n">note</span> <span class="o">=</span> <span class="n">PersonalNote</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="n">validated_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">note</span>
</code></pre>
                </div>
              </div>
              <p>But we need to add the <code class="highlighter-rouge">user</code> field into the mix. If the user is
                logged in to
                Django through this browser, that information is automatically included in the
                request… but where? Let’s use the debugger to explore and find out.</p>
              <p>In <code class="highlighter-rouge">api.py</code>, <code
                  class="highlighter-rouge">PersonalNoteSerializer</code>:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">pdb</span><span class="p">;</span> <span class="n">pdb</span><span class="o">.</span><span class="n">set_trace</span><span class="p">()</span>  <span class="c1"># Start the debugger here
</span>        <span class="k">pass</span>
</code></pre>
                </div>
              </div>
              <p>Run this and use the debugger to the data present at this breakpoint. If you
                dig into <code class="highlighter-rouge">self</code>, you will find eventually find a context with a
                request. As an
                educated guess, using what we’ve previously learned about requests, it is fair
                to hypothesize that a user is associated with the request. Try it out:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="err">‘</span><span class="n">request</span><span class="err">’</span><span class="p">]</span><span class="o">.</span><span class="n">user</span>
</code></pre>
                </div>
              </div>
              <p>Exit the debugger and add a new variable in <code class="highlighter-rouge">create</code> to store the
                user retrieved
                from the location in <code class="highlighter-rouge">self</code> that we just discovered. Feed it in to
                <code class="highlighter-rouge">PersonalNote.objects.create</code> as an additional keyword argument:
              </p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="err">‘</span><span class="n">request</span><span class="err">’</span><span class="p">]</span><span class="o">.</span><span class="n">user</span>
        <span class="n">note</span> <span class="o">=</span> <span class="n">PersonalNote</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="o">**</span><span class="n">validated_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">note</span>
</code></pre>
                </div>
              </div>
              <p>This will add the needed data to the create method and allow the form to work.
                Return to the <code class="highlighter-rouge">/api/notes/</code> page and test.</p>
              <p>You will receive a <code class="highlighter-rouge">201 Created</code> that may appear at first as if
                the data is
                being overwritten. Return to the main list page to confirm that everything is
                being saved.</p>
              <p>Debug as needed, then commit.</p>
              <h4 id="filter-results-by-user">Filter Results by User</h4>
              <p>Finally, we have one major problem remaining. Right now, any user can request
                and see all of the notes that are in the database. We need to filter them so
                that only the appropriate ones are returned. Return to <code class="highlighter-rouge">api.py</code>,
                <code class="highlighter-rouge">PersonalNoteViewSet</code>.</p>
              <p>Change <code class="highlighter-rouge">queryset</code> to initialize with <code
                  class="highlighter-rouge">Note.objects.none()</code>. This will create
                the variable with an empty dictionary of the correct type. To make a decision
                based on whether or not the user is anonymous, and return only the notes that
                belong to the logged in user, we can override a method called
                <code class="highlighter-rouge">get_queryset(self)</code>.</p>
              <p>Load the user into a variable. This class has access to the <code
                  class="highlighter-rouge">request</code> directly,
                so it can be found with <code class="highlighter-rouge">self.request.user</code>.</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span>
</code></pre>
                </div>
              </div>
              <p>If <code class="highlighter-rouge">user.is_anonymous</code>, we can return an empty dictionary of
                notes. Otherwise,
                we can use a filter to return only the correct ones with
                <code class="highlighter-rouge">Note.objects.filter(user=user)</code>.</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span>

        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">is_anonymous</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PersonalNote</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">none</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PersonalNote</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
</code></pre>
                </div>
              </div>
              <p>Test, debug, and commit.</p>
              <h4 id="set-up-cors">Set up CORS</h4>
              <p>In order to get your site to run well with a front-end, you might need to set up CORS:</p>
              <p>https://github.com/ottoyiu/django-cors-headers</p>
              <p>After installation, setting:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="n">CORS_ORIGIN_ALLOW_ALL</span> <span class="o">=</span> <span class="bp">True</span>
</code></pre>
                </div>
              </div>
              <p>should be enough.</p>
              <h5>Challenge</h5>
              <ul>
                <li>Change another endpoint to show no data if the user is not logged in.</li>
              </ul>
              <hr>
              <h4 class="mark mb-3 p-2">Learn to use token authorization to assign correct permissions to various users
              </h4>
              <p>Since REST clients can’t use our login UI to set which user they are, they have to use an alternate
                method of authentication. In this portion of the code, we’ll use <em>token authentication</em> to allow
                the user to log in via a new endpoint, and use that to control their access.</p>
              <p>Although our REST calls will now transmit tokens (randomish strings of data) to authenticate, Django
                will seamless transform those to user objects on the back end so our login code will still operate
                without modification.</p>
              <h5>Overview</h5>
              <p>The first step is to set up an endpoint for logging in. The user will submit the username and password,
                and then get a token back. We can then use this token to access other parts of the REST API.</p>
              <p>We’ll add some minor boilerplate that lets Django’s REST Framework know that we want to use token
                authentication.</p>
              <p>After that, we add a path to <code class="highlighter-rouge">urls.py</code> and hook that up to the
                authentication system. Django takes care of the details.</p>
              <p>We can test it on the command line with the <code class="highlighter-rouge">curl</code> utility or with
                Postman.</p>
              <p>Once we have our token, we can deliver it as part of the HTTP headers in subsequent API requests, and
                we’ll be effectively logged in.</p>
              <h5>Follow Along</h5>
              <p>The Django Rest Framework also provides token authorization. We will use this
                to allow other users to login and access the data specific to them. Information
                can be found here:</p>
              <p>http://www.django-rest-framework.org/api-guide/authentication/#authentication</p>
              <h6 id="set-up-token-authentication">Set up Token Authentication</h6>
              <p>Open <code class="highlighter-rouge">settings.py</code>.</p>
              <p>To <code class="highlighter-rouge">INSTALLED_APPS</code>, add <code
                  class="highlighter-rouge">rest_framework.authtoken</code>.</p>
              <p>If you need them elsewhere, immediately before the boilerplate for <code
                  class="highlighter-rouge">REST_FRAMEWORK</code>, import <code
                  class="highlighter-rouge">SessionAuthentication</code>, <code
                  class="highlighter-rouge">BasicAuthentication</code>, and <code
                  class="highlighter-rouge">TokenAuthentication</code> from <code
                  class="highlighter-rouge">rest_framework.authentication</code></p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="kn">from</span> <span class="nn">rest_framework.authentication</span> <span class="kn">import</span> <span class="n">SessionAuthentication</span><span class="p">,</span> <span class="n">BasicAuthentication</span><span class="p">,</span> <span class="n">TokenAuthentication</span>
</code></pre>
                </div>
              </div>
              <p>In <code class="highlighter-rouge">REST_FRAMEWORK</code>, add:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>    <span class="s">'DEFAULT_AUTHENTICATION_CLASSES'</span><span class="p">:</span> <span class="p">(</span>
        <span class="s">'rest_framework.authentication.BasicAuthentication'</span><span class="p">,</span>
        <span class="s">'rest_framework.authentication.SessionAuthentication'</span><span class="p">,</span>
        <span class="s">'rest_framework.authentication.TokenAuthentication'</span><span class="p">,</span>
    <span class="p">),</span>
</code></pre>
                </div>
              </div>
              <h6 id="set-up-the-route">Set up the Route</h6>
              <p>Next, we need to set up the route to authenticate users. In <code
                  class="highlighter-rouge">urls.py</code>:</p>
              <p>Import <code class="highlighter-rouge">re_path</code> from <code
                  class="highlighter-rouge">django.urls</code> and <code class="highlighter-rouge">views</code> from
                <code class="highlighter-rouge">rest_framework.authtoken</code></p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">re_path</span>
<span class="kn">from</span> <span class="nn">rest_framework.authtoken</span> <span class="kn">import</span> <span class="n">views</span>
</code></pre>
                </div>
              </div>
              <p>Then add the endpoint in <code class="highlighter-rouge">urls.py</code> by adding the <code
                  class="highlighter-rouge">api-token-auth/</code> route to
                <code class="highlighter-rouge">urlpatterns</code>:</p>
              <div class="language-python highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>    <span class="n">re_path</span><span class="p">(</span><span class="s">r'^api-token-auth/'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">obtain_auth_token</span><span class="p">)</span>
</code></pre>
                </div>
              </div>
              <p>The <code class="highlighter-rouge">^</code> is means “match the beginning of the string” in a regular
                expression.
                The <code class="highlighter-rouge">re_path</code> function is just like <code
                  class="highlighter-rouge">path</code>, except it interprets the endpoint as
                a regex instead of a fixed string.</p>
              <p>Do a migration to set up the database.</p>
              <h6 id="test-the-endpoint">Test the Endpoint</h6>
              <p>We can test this on the bash command line with the <a href="https://curl.haxx.se/">curl</a>
                utility that you might already have installed. (Postman also works.)</p>
              <p>Mac/Linux:</p>
              <div class="highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>### The following makes a POST request with the given JSON payload:

curl -X POST -H "Content-Type: application/json" -d '{"username":"admin", "password":"PASSWORD"}' http://127.0.0.1:8000/api-token-auth/
</code></pre>
                </div>
              </div>
              <p>Windows (or other platform if the above doesn’t work):</p>
              <div class="highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>### Windows needs some more double quotes and escaping of the payload

curl -X POST -H "Content-Type: application/json" -d "{\"username\":\"admin\", \"password\":\"PASSWORD\"}" http://127.0.0.1:8000/api-token-auth/
</code></pre>
                </div>
              </div>
              <p>PowerShell has its own thing independent of <code class="highlighter-rouge">curl</code>:</p>
              <div class="highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>Invoke-WebRequest http://localhost:8000/api-token-auth/ -Method Post -ContentType "application/json" -Body '{"username":"USER", "password":"PASS"}' -UseBasicParsing
</code></pre>
                </div>
              </div>
              <p>If you get back a very large amount of html and other text, you have an error.
                Scroll back up and google the error displayed just under your console command
                for help troubleshooting. Many of the errors you can get here are easy to do,
                common, and relatively easy to google for information on how to fix.</p>
              <p>You should get back one line with a token, for example:</p>
              <div class="language-json highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="p">{</span><span class="nl">"token"</span><span class="p">:</span><span class="s2">"da51ccf5274050cd7332d184246d7d0775dc79e2"</span><span class="p">}</span><span class="w">
</span></code></pre>
                </div>
              </div>
              <p>Your token will be different. Try it out with your token:</p>
              <div class="highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>curl -v -H 'Authorization: Token da51ccf5274050cd7332d184246d7d0775dc79e2' http://127.0.0.1:8000/api/notes/
</code></pre>
                </div>
              </div>
              <p>Note that the trailing <code class="highlighter-rouge">/</code> matters. You will get a 301 redirect if
                you don’t
                add it here.</p>
              <p>When using Axios to send the request, set the header here:</p>
              <div class="language-javascript highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://127.0.0.1:8000/api/notes/</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Token da51ccf5274050cd7332d184246d7d0775dc79e2</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
                </div>
              </div>
              <h5>Challenge</h5>
              <ul>
                <li>
                  <p>There are other kinds of authentication you can add. Research these.</p>
                </li>
                <li>
                  <p>Add session authentication, as well.</p>
                </li>
              </ul>
              <hr>
              <h2 class="display-4">
                <a id="review" class="anchor" href="#review" aria-hidden="true"><span
                    class="octicon octicon-link"></span></a>Review</h2>
              <h3 class="display-5">Class Recordings</h3>
              <p class="lead">You can use class recordings to help you master the material.</p>
              <div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">
                    <strong><a target="_blank" href="https://youtu.be/DslDD-2NSM8">Intro to Django Day 4 for CS13 w/
                        Brady Fukumoto</a></strong>
                    <p>Brady reviews more Django and talks about Heroku deployment and the upcoming LambdaMUD project
                    </p>
                  </li>
                  <li class="list-group-item">
                    <a href="/archive/CSAnnex/module/recuEEEsf9eXphxy0">All previous recordings</a>
                  </li>
                </ul>
              </div>
              <h3 class="display-5">Demonstrate Mastery</h3>
              <p>To demonstrate mastery of this module, you need to complete and pass a code review on each of the
                following:</p>
              <ul>
                <li>Objective challenge: <ul>
                    <li>Expose another model through a different endpoint than we covered in the example.</li>
                  </ul>
                </li>
                <li>Objective challenge: <ul>
                    <li>Change another endpoint to show no data if the user is not logged in.</li>
                  </ul>
                </li>
                <li>Objective challenge: <ul>
                    <li>
                      <p>There are other kinds of authentication you can add. Research these.</p>
                    </li>
                    <li>
                      <p>Add session authentication, as well.</p>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-80850900-4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push( arguments );
      }
      gtag( 'js', new Date() );

      gtag( 'config', 'UA-80850900-4' );
    </script>
    <script type="text/javascript">
      function getDomain() {
        const domainName = window.location.hostname.split( '.' )[ 1 ];
        return `${domainName}.com`;
      }
    </script>
    <script src="" integrity="" crossorigin="anonymous"></script>
    <script>
      window.jQuery || document.write( '<script src="/assets/js/vendor/jquery-slim.min.js"><\/script>' )
    </script>
    <script src="/assets/js/vendor/popper.min.js" integrity="" crossorigin="anonymous"></script>
    <script src="/dist/js/bootstrap.min.js" integrity="" crossorigin="anonymous"></script>
    <script src="/assets/js/activate.js"></script>
    <script src="/assets/js/jekyll-search.js" type="text/javascript"></script>
    <script type="text/javascript">
      SimpleJekyllSearch.init( {
        searchInput: document.getElementById( 'search-input' ),
        resultsContainer: document.getElementById( 'results-container' ),
        dataSource: '/search.json',
        searchResultTemplate: '<li class="list-group-item"><a href="{url}" title="Building APIs">{title}</a></li>',
        noResultsText: '',
        limit: 10,
        fuzzy: true,
      } )
    </script>
    <script src="/assets/js/mermaid.min.js"></script>
    <script type="text/javascript">
      if ( window.attachEvent ) {
        window.attachEvent( 'onload', verifySignedIn );
      } else {
        if ( window.onload ) {
          var currentOnLoadFn = window.onload;
          var newOnLoadFn = function ( evt ) {
            currentOnLoadFn( evt );
            verifySignedIn();
          };
          window.onload = newOnLoadFn;
        } else {
          window.onload = verifySignedIn;
        }
      }

      function verifySignedIn() {
        if ( isPagePublic() ) {
          return showPageContents();
        }

        window.__user = null;
        isSignedIn().then( ( user ) => {
          window.__user = user;

          if ( !user.signedIn ) {
            redirectToSignIn();
          } else if ( !user.student && !window.__openToAdmissions ) {
            showUnauthorizedMessage();
          } else {
            showPageContents();
          }
        } );
      }

      function isPagePublic() {
        const openCourses = [
          'and-pre',
          'ds-pre',
          'fsw-pre',
          'help',
          'ios-pre',
        ];

        const openPages = [
          'cs-and',
          'cs-fsw',
          'cs-ios',
          'cr',
          'ds',
          'jx',
          'p4s',
          'ux',
        ];

        const pathParts = window.location.pathname.split( '/' );
        const courseName = pathParts[ 1 ];
        const pageName = pathParts[ pathParts.length - 1 ];

        return openCourses.includes( courseName ) || openPages.includes( pageName );
      }

      function isSignedIn() {
        const isDeployPreview = window.location.hostname.startsWith( 'deploy-preview' ) && window.location.hostname
          .endsWith( 'netlify.com' );

        if ( isDeployPreview ) return Promise.resolve( {
          signedIn: true,
          student: true
        } );

        return fetch( `${getAuthBaseUrl()}/whoami`, {
            credentials: 'include'
          } )
          .then( ( response ) => response.text() )
          .then( ( userAsText ) => userAsText ? JSON.parse( userAsText ) : null )
          .then( ( userData ) => ( {
            signedIn: Boolean( userData ),
            student: Boolean( userData && userData.airtableId ),
            id: userData ? userData.id : null,
            email: userData ? userData.email : null
          } ) )
          .catch( ( error ) => {} );
      }

      function redirectToSignIn() {
        const signInUrl =
          `${getAuthBaseUrl()}/sign-in?redirect=${encodeURIComponent(window.location.href)}&reason=auth_required`
        const redirectMessage = document.querySelector( '#redirect-message' );
        redirectMessage.style.display = "block";
        redirectMessage.innerHTML =
          `<div>You are being redirected to the sign in page. If you aren't redirected automatically, you can use <a href=${signInUrl}>this link</a>.</div>`
        window.location = signInUrl;
      }

      function showPageContents() {
        document.querySelector( '#content-wrapper' ).style.visibility = 'visible';
      }

      function showUnauthorizedMessage() {
        document.querySelector( '#unauthorized-message' ).style.display = 'block';
      }

      function getAuthBaseUrl() {
        const domain = getDomain();
        const authBaseUrl = `https://auth.${domain}`;
        return authBaseUrl;
      }
    </script>
    <script src="/assets/js/docs.min.js"></script>
    <script>
      var MathJax = {
        tex: {
          inlineMath: [
            [ '$$', '$$' ],
            [ '\[', '\])' ]
          ]
        },
        "HTML-CSS": {
          styles: {
            ".MathJax span": {
              color: "#000000"
            }
          }
        }
      }
    </script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
    </script>
    <script>
      handleExternalLinks();

      function handleExternalLinks() {
        const domain = getDomain();
        const links = document.querySelectorAll( 'a' );
        return links.forEach( ( link ) => {
          if ( !link.host.includes( domain ) ) link.target = '_blank';
        } )
      };
    </script>
  </div>
</body>

</html>
