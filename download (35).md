

<a href="#content" id="skippy" class="sr-only sr-only-focusable"></a>

<span class="skiplink-text">Skip to main content</span>

<a href="/" class="navbar-brand"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMyIgaGVpZ2h0PSIzNSIgdmlld2JveD0iMCAwIDMzIDM1IiBmaWxsPSJub25lIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDBWMTYuMDYwOUMwIDI3LjczMzUgOS4wODkyOSAzMS43ODQzIDE1LjczMjEgMzQuNzUxM0gxNS43NUwxNi4yODU3IDM1QzE2LjQxMDcgMzQuOTI4OSAxNi41MzU3IDM0Ljg3NTYgMTYuNjc4NiAzNC44MjIzQzE2Ljc1IDM0Ljc4NjggMTYuODM5MyAzNC43NTEzIDE2LjkxMDcgMzQuNzE1N0MyMy41NzE0IDMxLjc2NjUgMzIuNjk2NCAyNy42OTggMzIuNjk2NCAxNi4wNjA5VjBIMFpNMjAuNzA3MSAyMy40NTM2TDIwLjM1NzEgMjIuNTEwMkwxNS42MDcxIDEwLjA3MzZDMTUuMzIxNCAxMC44MDIgMTQuNjYwNyAxMi41NjA5IDEzLjk0NjQgMTQuNDQ0MkwxMS4yMTQzIDIxLjc4MTdDMTEuMDg5MyAyMi4xMzcxIDExLjE2MDcgMjIuMzE0NyAxMS4yNSAyMi40MzkxQzExLjQ0NjQgMjIuNjcwMSAxMS44NzY4IDIyLjY3MDEgMTIuNTU1NCAyMi42NzAxSDEyLjY3ODZMMTIuNjc2OCAyMy40NTE4SDcuNTY5NjRWMjIuNjcwMUg3Ljk2MjVDOC42NTg5MyAyMi42NzAxIDkuMjMwMzYgMjIuMzY4IDkuNjU4OTMgMjEuNTE1MkwxMC4xNzY4IDIwLjM0MjZMMTQuOTA4OSA4LjI5Njk2TDE0LjA2OTYgNi4wNzYxNEgxOC40ODA0TDI0LjU2OTYgMjIuMDEyN0wyNS4xMjUgMjMuNDUzNkgyMC43MDcxWiIgZmlsbD0iI0VDMzk0NCI+PC9wYXRoPgo8L3N2Zz4=" /></a>

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdib3g9IjAgMCAzMCAzMCIgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiBmb2N1c2FibGU9ImZhbHNlIj48dGl0bGU+TWVudTwvdGl0bGU+PHBhdGggc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNNCA3aDIyTTQgMTVoMjJNNCAyM2gyMiI+PC9wYXRoPjwvc3ZnPg==)

#### Web Applications II

<a href="/web3/sprint/recq59MvEIZfUAohy" class="bd-toc-link">1.  Advanced React</a>

-   [Class Components](/web3/module/recnDKrWb24lgaziC/)
-   [The React Lifecycle](/web3/module/rec1DPoOZSmocXfak/)
-   [Composing and Sharing Non-Visual Behavior](/web3/module/recAxmnYmusEi8JuL/)
-   [Testing Web Applications](/web3/module/rechTQVfCg4p85Hoi/)

<a href="/web3/sprint/recukritK1B1pFrcM" class="bd-toc-link">2.  Advanced State Management</a>

-   [The Reducer Pattern](/web3/module/rectpk6uIV3pCHJh8/)
-   [Redux](/web3/module/recba2NUdVmgKYyR3/)
-   [Async Redux](/web3/module/recSoiWNJzGURrXYh/)
-   [Context API](/web3/module/recByjgF7FwwH5Z7W/)

<a href="/web3/sprint/recnhsJGy28gNi1K5" class="bd-toc-link">3.  Advanced Web Applications</a>

-   [Testing React](/web3/module/recS9H6qCj0dQe32B/)
-   [Client-Side Authentication](/web3/module/recQlbCZf9tOVgiXC/)
-   [HTTP / AJAX II](/web3/module/recupVjaAKPqbuk7Y/)
-   [Deploying Web Apps](/web3/module/receOMvCB7dSyX5FL/)

<a href="/web3/sprint/recVFiuMBzbcZllxC" class="bd-toc-link">4.  WEB Unit 3 Build</a>

<a href="/" class="navbar-brand"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTM1IiBoZWlnaHQ9IjM1IiB2aWV3Ym94PSIwIDAgNzU2IDE5NyIgZmlsbD0iI2VjMzk0NCI+PGc+PHBhdGggZD0iTTI5Mi45LDEyNi42aC02LjdjLTksMC0xMi42LTEuOS0xMi42LTkuNVY0OC41YzAtNy43LDEuNi04LjYsMTEuNC05Ljd2LTQuNWgtNDEuM3Y0LjUgYzkuOCwxLjEsMTEuNCwxLjksMTEuNCw5Ljd2NjkuM2MwLDcuNy0xLjYsOC42LTExLjQsOS43djQuNWg3My43bDQuOS0yOS40aC00LjRDMzA4LjUsMTE5LjYsMzAzLjksMTI2LjYsMjkyLjksMTI2LjZ6Ij48L3BhdGg+PHBhdGggZD0iTTM4NS41LDEyMS4xVjc5LjNjMC0xNS44LTkuNC0yMi40LTI2LjYtMjIuNGMtMTUsMC0yNi44LDYuNi0yNi44LDE5LjNjMCwyLjQsMC4yLDMuMywwLjgsNWgxNi42IGMtMC41LTItMC43LTUtMC43LTcuNWMwLTkuNiwzLjYtMTIuNCw5LjQtMTIuNGM2LjQsMCw5LjcsMiw5LjcsMTQuNHYxMS4ybC0yMC44LDcuN2MtMTAuNiw0LjEtMTkuMyw4LjgtMTkuMywyMC43IGMwLDEwLjksNy41LDE3LjgsMTguNiwxNy44YzkuOSwwLDE3LjQtNi4yLDIxLjktMTIuMWwwLjEtMC4xbDAsMFYxMzJoMjZ2LTQuNEMzODcuNywxMjcuMSwzODUuNSwxMjYuMiwzODUuNSwxMjEuMXogTTM2OCwxMTcuOCBjLTQuNCwzLjMtNy42LDUuMy0xMiw1LjRjLTcuNywwLTExLjItNS4yLTExLjItMTIuNmMwLTcuNywzLjYtMTEuMiw5LjgtMTMuNWwxMy40LTUuNFYxMTcuOEwzNjgsMTE3Ljh6Ij48L3BhdGg+PHBhdGggZD0iTTUxNC40LDEyMVY3OS41YzAtMTQuOC02LTIyLjQtMTguNy0yMi40Yy0xMS41LDAtMTkuNCw2LjYtMjUuNSwxMy45Yy0xLjgtOS42LTcuNy0xMy45LTE3LjgtMTMuOSBjLTExLjQsMC0xOC43LDYuMi0yNC44LDEzLjZWNTdoLTIuM2wtMjMuOCw3LjR2Mi40bDguNiw1djQ5LjRjMCw1LTIuMSw2LjEtOC45LDYuNHY0LjRoMzUuMXYtNC40Yy02LjctMC4zLTguNy0xLjMtOC43LTYuNHYtNDcgYzQuNy0zLjYsOS41LTYuNSwxNS41LTYuNWM3LjYsMCwxMC41LDQuMiwxMC41LDEyLjd2NDAuOGMwLDUtMS45LDYuMS04LjcsNi40djQuNGwzNC44LDB2LTQuNGMtNi43LTAuMy04LjYtMS4zLTguNi02LjR2LTQ3IGM0LjctMy42LDkuNS02LjUsMTUuNS02LjVjNy42LDAsMTAuNSw0LjIsMTAuNSwxMi43bC0wLjEsNDAuNWMwLDUtMS44LDYuNC04LjYsNi43bDAsNC40aDM1LjF2LTQuNCBDNTE2LjcsMTI3LjQsNTE0LjQsMTI2LjEsNTE0LjQsMTIxeiI+PC9wYXRoPjxwYXRoIGQ9Ik01NzMuMiw1Ny4zYy0xMSwwLTE4LjUsNS43LTIzLjQsMTIuOFYyMi45aC0yLjdsLTIzLjQsNi44djIuNWw4LjYsNC41VjEzMmgyLjlsOC0zLjVjNS44LDMuMywxMi4zLDUsMjAuMiw1IGMyMC44LDAsMzcuNC0xNS44LDM3LjQtNDIuNkM2MDAuOSw2OS45LDU5MC40LDU3LjMsNTczLjIsNTcuM3ogTTU2My40LDEyOC43Yy01LjQsMC0xMC4zLTIuNC0xMy43LTcuOVY3My42IGMzLjQtMy40LDguNS01LjcsMTMuNS01LjdjMTMuOSwwLDIwLDEyLjgsMjAsMjkuNUM1ODMuMywxMTQuNyw1NzUuOCwxMjguNSw1NjMuNCwxMjguN3oiPjwvcGF0aD48cGF0aCBkPSJNNjc3LDEyMS4yVjIyLjhoLTIuNkw2NTEsMjkuNlYzMmw4LjYsNC41djI1LjdjLTMuNC0zLjItOC44LTUuMS0xNS41LTUuMWMtMTkuOSwwLTM1LjIsMTUuMy0zNS4yLDQxLjMgYzAsMjAuNywxMS4yLDM0LjYsMjguMSwzNC42YzkuOCwwLDE3LTUuMywyMi42LTEzLjF2MC45VjEzMmgyNi4zbDAtNC40QzY3OS4xLDEyNy4zLDY3NywxMjYuMyw2NzcsMTIxLjJ6IE02NTkuNiwxMTcuMSBMNjU5LjYsMTE3LjFjLTMuNCwzLjQtOCw1LjEtMTMuMiw1LjFjLTEzLjIsMC0yMC40LTEyLjgtMjAuNC0yOS44YzAtMTcuOCw3LjMtMjkuMiwxOS41LTI5LjJjOC43LDAsMTQuMSw2LjksMTQuMSwxOC4zIEw2NTkuNiwxMTcuMXoiPjwvcGF0aD48cGF0aCBkPSJNNzQ3LjEsMTIxLjFWNzkuM2MwLTE1LjgtOS40LTIyLjQtMjYuNi0yMi40Yy0xNSwwLTI2LjgsNi42LTI2LjgsMTkuM2MwLDIuNCwwLjIsMy4zLDAuOCw1aDE2LjYgYy0wLjUtMi0wLjctNS0wLjctNy41YzAtOS42LDMuNi0xMi40LDkuNC0xMi40YzYuNCwwLDkuNywyLDkuNywxNC40djExLjJsLTIwLjgsNy43Yy0xMC42LDQuMS0xOS4zLDguOC0xOS4zLDIwLjcgYzAsMTAuOSw3LjUsMTcuOCwxOC42LDE3LjhjOS45LDAsMTcuNC02LjIsMjEuOS0xMi4xdi0wLjFoMC4xbDAsMTEuMWwyNiwwLjF2LTQuNUM3NDkuMywxMjcuMSw3NDcuMSwxMjYuMiw3NDcuMSwxMjEuMXogTTcyOS42LDExNy44Yy00LjQsMy4zLTcuNiw1LjMtMTIuMSw1LjRjLTcuNywwLTExLjItNS4yLTExLjItMTIuNmMwLTcuNywzLjYtMTEuMiw5LjgtMTMuNWwxMy40LTUuNEw3MjkuNiwxMTcuOEw3MjkuNiwxMTcuOHoiPjwvcGF0aD48L2c+PHBhdGggZD0iTTAsMHY5MC40YzAsNjUuNyw1MC45LDg4LjUsODguMSwxMDUuMmgwLjFsMywxLjRjMC43LTAuNCwxLjQtMC43LDIuMi0xYzAuNC0wLjIsMC45LTAuNCwxLjMtMC42IGMzNy4zLTE2LjYsODguNC0zOS41LDg4LjQtMTA1VjBIMHogTTExNiwxMzJsLTItNS4zbC0yNi42LTcwYy0xLjYsNC4xLTUuMywxNC05LjMsMjQuNmwtMTUuMyw0MS4zYy0wLjcsMi0wLjMsMywwLjIsMy43IGMxLjEsMS4zLDMuNSwxLjMsNy4zLDEuM0g3MWwwLDQuNEg0Mi40bDAtNC40aDIuMmMzLjksMCw3LjEtMS43LDkuNS02LjVsMi45LTYuNmwyNi41LTY3LjhsLTQuNy0xMi41aDI0LjdsMzQuMSw4OS43bDMuMSw4LjFIMTE2eiI+PC9wYXRoPjwvc3ZnPg==" /></a>

#### Web Applications II

<a href="/web3/sprint/recq59MvEIZfUAohy" class="bd-toc-link">1.  Advanced React</a>

-   [Class Components](/web3/module/recnDKrWb24lgaziC/)
-   [The React Lifecycle](/web3/module/rec1DPoOZSmocXfak/)
-   [Composing and Sharing Non-Visual Behavior](/web3/module/recAxmnYmusEi8JuL/)
-   [Testing Web Applications](/web3/module/rechTQVfCg4p85Hoi/)

<a href="/web3/sprint/recukritK1B1pFrcM" class="bd-toc-link">2.  Advanced State Management</a>

-   [The Reducer Pattern](/web3/module/rectpk6uIV3pCHJh8/)
-   [Redux](/web3/module/recba2NUdVmgKYyR3/)
-   [Async Redux](/web3/module/recSoiWNJzGURrXYh/)
-   [Context API](/web3/module/recByjgF7FwwH5Z7W/)

<a href="/web3/sprint/recnhsJGy28gNi1K5" class="bd-toc-link">3.  Advanced Web Applications</a>

-   [Testing React](/web3/module/recS9H6qCj0dQe32B/)
-   [Client-Side Authentication](/web3/module/recQlbCZf9tOVgiXC/)
-   [HTTP / AJAX II](/web3/module/recupVjaAKPqbuk7Y/)
-   [Deploying Web Apps](/web3/module/receOMvCB7dSyX5FL/)

<a href="/web3/sprint/recVFiuMBzbcZllxC" class="bd-toc-link">4.  WEB Unit 3 Build</a>

-   [Prepare](#prepare)
-   [Learn](#learn)
-   [Project](#project)
-   [Review](#review)

# Context API

<span class="lead"> </span>

In your typical react application `state` is passed top-down (parent to child) via `props`, but this can become very cumbersome quickly, especially when those props are required by many components across your application. However with the introduction of reacts `Context API` you no longer have to pass props down from component to component - what React devs call “prop drilling”. We can now store data on a `context` object, and retrieve that data in the necessary components from the context object, not props!

**At the end of this module, you should be able to:**

-   describe what the Context API is and the problem is solves
-   provide data to the component tree with a context provider
-   consume data from a context object in nested components

#### Pro Tip

A witty saying proves nothing.

Voltaire

## <a href="#prepare" id="prepare" class="anchor"><span class="octicon octicon-link"></span></a>Prepare

Review each preclass resource before class.

## <a href="#learn" id="learn" class="anchor"><span class="octicon octicon-link"></span></a>Learn

#### Learn to describe what the Context API is and the problem is solves

Context is a great tool to simplify state management. We will see how it helps us manage state easier as our apps begin to scale.

##### Overview

The React docs give us a good explanation of what Context is:

> In a typical React application, data is passed top-down (parent to child) via props, but this can be cumbersome for certain types of props (e.g. locale preference, UI theme) that are required by many components within an application. Context provides a way to share values like these between components without having to explicitly pass a prop through every level of the tree.

We use the Context API when we have global data that lots of components share (things like user or theme), or when we have to pass data through intermediate components. The API can help keep your state relatively clean.

One caveat here is that it can make components harder to reuse. Another architectural pattern you may want to look at is [component composition](https://reactjs.org/docs/composition-vs-inheritance.html).

##### Follow Along

Read through [this article](https://hackernoon.com/everything-you-need-to-know-about-reacts-context-api-e5c8c32ef202) and write out a simple explanation of what context is. Send your explanation to your TL in Slack.

##### Challenge

Read through the [Context API docs](https://reactjs.org/docs/context.html) and explain to someone in your TL group what the Provider and Consumer methods are.

------------------------------------------------------------------------

#### Learn to provide data to the component tree with a context provider

So knowing that React’s `Context API` gives us a new way to pass data around, how does it do it? We will learn about two methods that a context object comes with - a `Provider` and a `Consumer`.

##### Overview

`Context API` allows us to create what’s known as a `Context Object`.

    import { createContext } from 'react';

    const ContextObject = createContext();

    // usually we'll name the object by the data it will hold - ie UserContext, or MoviesContext, etc...

This object gives us two important components to work with a `ContextObject.Provider` and a `ContextObject.Consumer`.

The `Provider` method accepts a single prop called `value`, the `value` prop is used to provide our data across our app.

    <ContextObject.Provider value={dataToPassDown}>
      <NestedComponent />
      <OtherNestedComponent />
    </ContextObject.Provider>

The context `Consumer` consumes and returns the `value` provided by the `Provider`.

##### Follow Along

So how do we utilize `Context API`? First, follow along at this link [here](https://codesandbox.io/s/react-context-api-x7bru).

Your app should look like this at first glance.

![](https://i.gyazo.com/55da5484e4ef5864464e51be0108f481.png)

Diving into the code, you’ll notice we’re bringing in two hooks from the react library `useState` and `useEffect`.

The `useState` hook holds and sets user state. The `useEffect` hook performs a pseudo API call that sets “my user” to state.

You’ll also notice a `User` component rendering `Name goes here` as a placeholder.

Now that we have that out of the way, let’s talk about the goal we want to achieve. We want to be able to provide data to the child component (based on user data sitting in state) and consume it, using `Context API`.

The first thing we need to do is make a new folder named `contexts`. This folder is going to hold all the context objects we create.

1.  Inside that folder we’re need to create a new file named `UserContext.js`. This is where we’re going to create our first context object!
2.  Inside that file, we’re going to create our `UserContext`.

    import { createContext } from 'react';
    export const UserContext = createContext();

Now you may be thinking wow! Only two lines of code? Yep! Only two lines of code and we have successfully created our `UserContext`.

Now that we have created our `UserContext` let’s import it into our `index.js`.

    import { UserContext } from '../contexts/UserContext';

After creating and importing our `UserContext` we can start providing our user data across our application.

To do so, we need to wrap all of our child components inside of our `UserContext Provider` and pass it a prop of `value`, this prop contains our user state.

    return (
        <UserContext.Provider value={user}>
            <div className="container">
                <User />
            </div>
        </UserContext.Provider>
    );

Doing so, we allow all child components of our `UserContext Provider` to consume the value(s) that come from the hook, in our case, the value is a user object.

##### Challenge

Using an old project, go in and add a context item for some of the state there. Then pass the data into the context provider.

------------------------------------------------------------------------

#### Learn to consume data from a context object in nested components

Once we have set up a context provider, we will need to know how to consume the data passed into it.

##### Overview

Consuming the data passed into the provider is the final step for using the Context API. We will use a context hook for this, though keep in mind that you can use render props as well.

    import { useContext } from 'react'
    import { ContextObject } from '../contexts';
    ...

    // inside the component
    const myData = useContext(ContextObject);

    // or you can destructure the data like this:
    const { someData, moreData } = useContext(ContextObject);

Now you’re ready to use the data in your component!

##### Follow Along

In the previous objective, we created our `UserContext` hook, and passed our data into the provider. Now it’s time to consume it.

To do so import the `useContext` hook from the react library and our `UserContext`.

    import React, { useContext } from 'react';
    import { UserContext } from '../../contexts/UserContext';

After importing our `UserContext`, we will consume the data from it.

    const user = useContext(UserContext);

Finally, we can render our `user` to the screen!

    return (
        <div className="profile">
            <p>
                {user.lastName}, {user.firstName}
            </p>
        </div>
    );

Our app should look like this if everything is correct.

![Final Product](https://i.gyazo.com/cc1dadcc948f9ba884dcd95835ab5dd3.png)

The completed follow along code can be found [here](https://codesandbox.io/s/context-api-solution-2y0cu)

##### Challenge

Continue working in the app you chose in the last objective. Now that you have rendered the context provider, and passed in your data, you need to consume that data where it’s needed.

------------------------------------------------------------------------

## <a href="#project" id="project" class="anchor"><span class="octicon octicon-link"></span></a>Project

-   ##### [React Shopping Cart](https://github.com/LambdaSchool/react-shopping-cart/blob/master/README.md)

    In this project you’ll take take an existing e-commerce store and refactor the application to use the Context API.

## <a href="#review" id="review" class="anchor"><span class="octicon octicon-link"></span></a>Review

### Class Recordings

You can use class recordings to help you master the material.

-   **[Context API for Web35 w/ Dustin Myers](https://youtu.be/nbZOhyKngUw)**

    Context API

-   [All previous recordings](/archive/WEB3/module/recByjgF7FwwH5Z7W)

### Demonstrate Mastery

To demonstrate mastery of this module, you need to complete and pass a code review on each of the following:

-   Objective challenge:

    Read through the [Context API docs](https://reactjs.org/docs/context.html) and explain to someone in your TL group what the Provider and Consumer methods are.

-   Objective challenge:

    Using an old project, go in and add a context item for some of the state there. Then pass the data into the context provider.

-   Objective challenge:

    Continue working in the app you chose in the last objective. Now that you have rendered the context provider, and passed in your data, you need to consume that data where it’s needed.

-   Project: React Shopping Cart
