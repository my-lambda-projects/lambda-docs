Please enable JavaScript to view this page.

You must be logged in to view this page.

You must be a Lambda School student to view this page.

<a href="#content" id="skippy" class="sr-only sr-only-focusable"></a>

<span class="skiplink-text">Skip to main content</span>

<a href="/" class="navbar-brand"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMyIgaGVpZ2h0PSIzNSIgdmlld2JveD0iMCAwIDMzIDM1IiBmaWxsPSJub25lIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDBWMTYuMDYwOUMwIDI3LjczMzUgOS4wODkyOSAzMS43ODQzIDE1LjczMjEgMzQuNzUxM0gxNS43NUwxNi4yODU3IDM1QzE2LjQxMDcgMzQuOTI4OSAxNi41MzU3IDM0Ljg3NTYgMTYuNjc4NiAzNC44MjIzQzE2Ljc1IDM0Ljc4NjggMTYuODM5MyAzNC43NTEzIDE2LjkxMDcgMzQuNzE1N0MyMy41NzE0IDMxLjc2NjUgMzIuNjk2NCAyNy42OTggMzIuNjk2NCAxNi4wNjA5VjBIMFpNMjAuNzA3MSAyMy40NTM2TDIwLjM1NzEgMjIuNTEwMkwxNS42MDcxIDEwLjA3MzZDMTUuMzIxNCAxMC44MDIgMTQuNjYwNyAxMi41NjA5IDEzLjk0NjQgMTQuNDQ0MkwxMS4yMTQzIDIxLjc4MTdDMTEuMDg5MyAyMi4xMzcxIDExLjE2MDcgMjIuMzE0NyAxMS4yNSAyMi40MzkxQzExLjQ0NjQgMjIuNjcwMSAxMS44NzY4IDIyLjY3MDEgMTIuNTU1NCAyMi42NzAxSDEyLjY3ODZMMTIuNjc2OCAyMy40NTE4SDcuNTY5NjRWMjIuNjcwMUg3Ljk2MjVDOC42NTg5MyAyMi42NzAxIDkuMjMwMzYgMjIuMzY4IDkuNjU4OTMgMjEuNTE1MkwxMC4xNzY4IDIwLjM0MjZMMTQuOTA4OSA4LjI5Njk2TDE0LjA2OTYgNi4wNzYxNEgxOC40ODA0TDI0LjU2OTYgMjIuMDEyN0wyNS4xMjUgMjMuNDUzNkgyMC43MDcxWiIgZmlsbD0iI0VDMzk0NCI+PC9wYXRoPgo8L3N2Zz4=" /></a>

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdib3g9IjAgMCAzMCAzMCIgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiBmb2N1c2FibGU9ImZhbHNlIj48dGl0bGU+TWVudTwvdGl0bGU+PHBhdGggc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNNCA3aDIyTTQgMTVoMjJNNCAyM2gyMiI+PC9wYXRoPjwvc3ZnPg==)

#### Computer Science Annex

<a href="/csannex/sprint/recMPt6jmsCgaqrfj" class="bd-toc-link">1.  Data Structures: Heaps</a>

-   [Heaps](/csannex/module/recNbOiLfM7bfQ0aE/)

<a href="/csannex/sprint/recKzV5STy8vYnbQ1" class="bd-toc-link">2.  Intro to Django</a>

-   [Django basics and setup](/csannex/module/recvCvXoZKm5cYOc4/)
-   [Building APIs](/csannex/module/recuEEEsf9eXphxy0/)

<a href="/csannex/sprint/recUHGX7arXkBIutr" class="bd-toc-link">3.  Python/Django I</a>

-   [Getting started with Python and Django](/csannex/module/rec4yg0hRHaeOmBGN/)
-   [Object-Oriented Programming](/csannex/module/recHhVqI4Y3j6UgLa/)
-   [Software Design Patterns](/csannex/module/recgVHqW0RShuQn1Z/)

<a href="/csannex/sprint/rec64nbdwB28JM7Qu" class="bd-toc-link">4.  Python/Django II/Career Development</a>

-   [REST](/csannex/module/rec7YHjLuXabdlhof/)
-   [GraphQL](/csannex/module/recjIPIwz5Pn5WbPh/)
-   [Model-View-Controller](/csannex/module/recVsikSMFoQ25WZd/)

<a href="/csannex/sprint/reczMSFEG5pffpADx" class="bd-toc-link">5.  Python/Django III/Career Development</a>

-   [Object-relational mapping](/csannex/module/reccrn1If8mhlIymc/)
-   [Relational Databases](/csannex/module/recU6Q1DLISGvt0dk/)

<a href="/csannex/sprint/recTTpwFpgZXtPG2o" class="bd-toc-link">6.  Project Week: Cellular Automata</a>

-   [Game of Life](/csannex/module/rec42j1bkTmC0Hsro/)

<a href="/csannex/sprint/recqkHjNcXzK5DTqd" class="bd-toc-link">7.  C Programming Topics</a>

-   [Introduction To C](/csannex/module/recLymrrD7f46rdBa/)
-   [Processes and System Calls](/csannex/module/rec7YmMV7ukDLK770/)
-   [Scheduling](/csannex/module/recfiYtQDLFXGOBFA/)
-   [Operating Systems](/csannex/module/recHPT5QiPS6NOCgz/)
-   [Web Server I](/csannex/module/recz76g3pcHs88Dax/)
-   [Web Server II](/csannex/module/recFGnBVmKCyR0427/)
-   [Theory of Computation](/csannex/module/recH0OAnSr6ZcnZ7F/)

<a href="/" class="navbar-brand"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTM1IiBoZWlnaHQ9IjM1IiB2aWV3Ym94PSIwIDAgNzU2IDE5NyIgZmlsbD0iI2VjMzk0NCI+PGc+PHBhdGggZD0iTTI5Mi45LDEyNi42aC02LjdjLTksMC0xMi42LTEuOS0xMi42LTkuNVY0OC41YzAtNy43LDEuNi04LjYsMTEuNC05Ljd2LTQuNWgtNDEuM3Y0LjUgYzkuOCwxLjEsMTEuNCwxLjksMTEuNCw5Ljd2NjkuM2MwLDcuNy0xLjYsOC42LTExLjQsOS43djQuNWg3My43bDQuOS0yOS40aC00LjRDMzA4LjUsMTE5LjYsMzAzLjksMTI2LjYsMjkyLjksMTI2LjZ6Ij48L3BhdGg+PHBhdGggZD0iTTM4NS41LDEyMS4xVjc5LjNjMC0xNS44LTkuNC0yMi40LTI2LjYtMjIuNGMtMTUsMC0yNi44LDYuNi0yNi44LDE5LjNjMCwyLjQsMC4yLDMuMywwLjgsNWgxNi42IGMtMC41LTItMC43LTUtMC43LTcuNWMwLTkuNiwzLjYtMTIuNCw5LjQtMTIuNGM2LjQsMCw5LjcsMiw5LjcsMTQuNHYxMS4ybC0yMC44LDcuN2MtMTAuNiw0LjEtMTkuMyw4LjgtMTkuMywyMC43IGMwLDEwLjksNy41LDE3LjgsMTguNiwxNy44YzkuOSwwLDE3LjQtNi4yLDIxLjktMTIuMWwwLjEtMC4xbDAsMFYxMzJoMjZ2LTQuNEMzODcuNywxMjcuMSwzODUuNSwxMjYuMiwzODUuNSwxMjEuMXogTTM2OCwxMTcuOCBjLTQuNCwzLjMtNy42LDUuMy0xMiw1LjRjLTcuNywwLTExLjItNS4yLTExLjItMTIuNmMwLTcuNywzLjYtMTEuMiw5LjgtMTMuNWwxMy40LTUuNFYxMTcuOEwzNjgsMTE3Ljh6Ij48L3BhdGg+PHBhdGggZD0iTTUxNC40LDEyMVY3OS41YzAtMTQuOC02LTIyLjQtMTguNy0yMi40Yy0xMS41LDAtMTkuNCw2LjYtMjUuNSwxMy45Yy0xLjgtOS42LTcuNy0xMy45LTE3LjgtMTMuOSBjLTExLjQsMC0xOC43LDYuMi0yNC44LDEzLjZWNTdoLTIuM2wtMjMuOCw3LjR2Mi40bDguNiw1djQ5LjRjMCw1LTIuMSw2LjEtOC45LDYuNHY0LjRoMzUuMXYtNC40Yy02LjctMC4zLTguNy0xLjMtOC43LTYuNHYtNDcgYzQuNy0zLjYsOS41LTYuNSwxNS41LTYuNWM3LjYsMCwxMC41LDQuMiwxMC41LDEyLjd2NDAuOGMwLDUtMS45LDYuMS04LjcsNi40djQuNGwzNC44LDB2LTQuNGMtNi43LTAuMy04LjYtMS4zLTguNi02LjR2LTQ3IGM0LjctMy42LDkuNS02LjUsMTUuNS02LjVjNy42LDAsMTAuNSw0LjIsMTAuNSwxMi43bC0wLjEsNDAuNWMwLDUtMS44LDYuNC04LjYsNi43bDAsNC40aDM1LjF2LTQuNCBDNTE2LjcsMTI3LjQsNTE0LjQsMTI2LjEsNTE0LjQsMTIxeiI+PC9wYXRoPjxwYXRoIGQ9Ik01NzMuMiw1Ny4zYy0xMSwwLTE4LjUsNS43LTIzLjQsMTIuOFYyMi45aC0yLjdsLTIzLjQsNi44djIuNWw4LjYsNC41VjEzMmgyLjlsOC0zLjVjNS44LDMuMywxMi4zLDUsMjAuMiw1IGMyMC44LDAsMzcuNC0xNS44LDM3LjQtNDIuNkM2MDAuOSw2OS45LDU5MC40LDU3LjMsNTczLjIsNTcuM3ogTTU2My40LDEyOC43Yy01LjQsMC0xMC4zLTIuNC0xMy43LTcuOVY3My42IGMzLjQtMy40LDguNS01LjcsMTMuNS01LjdjMTMuOSwwLDIwLDEyLjgsMjAsMjkuNUM1ODMuMywxMTQuNyw1NzUuOCwxMjguNSw1NjMuNCwxMjguN3oiPjwvcGF0aD48cGF0aCBkPSJNNjc3LDEyMS4yVjIyLjhoLTIuNkw2NTEsMjkuNlYzMmw4LjYsNC41djI1LjdjLTMuNC0zLjItOC44LTUuMS0xNS41LTUuMWMtMTkuOSwwLTM1LjIsMTUuMy0zNS4yLDQxLjMgYzAsMjAuNywxMS4yLDM0LjYsMjguMSwzNC42YzkuOCwwLDE3LTUuMywyMi42LTEzLjF2MC45VjEzMmgyNi4zbDAtNC40QzY3OS4xLDEyNy4zLDY3NywxMjYuMyw2NzcsMTIxLjJ6IE02NTkuNiwxMTcuMSBMNjU5LjYsMTE3LjFjLTMuNCwzLjQtOCw1LjEtMTMuMiw1LjFjLTEzLjIsMC0yMC40LTEyLjgtMjAuNC0yOS44YzAtMTcuOCw3LjMtMjkuMiwxOS41LTI5LjJjOC43LDAsMTQuMSw2LjksMTQuMSwxOC4zIEw2NTkuNiwxMTcuMXoiPjwvcGF0aD48cGF0aCBkPSJNNzQ3LjEsMTIxLjFWNzkuM2MwLTE1LjgtOS40LTIyLjQtMjYuNi0yMi40Yy0xNSwwLTI2LjgsNi42LTI2LjgsMTkuM2MwLDIuNCwwLjIsMy4zLDAuOCw1aDE2LjYgYy0wLjUtMi0wLjctNS0wLjctNy41YzAtOS42LDMuNi0xMi40LDkuNC0xMi40YzYuNCwwLDkuNywyLDkuNywxNC40djExLjJsLTIwLjgsNy43Yy0xMC42LDQuMS0xOS4zLDguOC0xOS4zLDIwLjcgYzAsMTAuOSw3LjUsMTcuOCwxOC42LDE3LjhjOS45LDAsMTcuNC02LjIsMjEuOS0xMi4xdi0wLjFoMC4xbDAsMTEuMWwyNiwwLjF2LTQuNUM3NDkuMywxMjcuMSw3NDcuMSwxMjYuMiw3NDcuMSwxMjEuMXogTTcyOS42LDExNy44Yy00LjQsMy4zLTcuNiw1LjMtMTIuMSw1LjRjLTcuNywwLTExLjItNS4yLTExLjItMTIuNmMwLTcuNywzLjYtMTEuMiw5LjgtMTMuNWwxMy40LTUuNEw3MjkuNiwxMTcuOEw3MjkuNiwxMTcuOHoiPjwvcGF0aD48L2c+PHBhdGggZD0iTTAsMHY5MC40YzAsNjUuNyw1MC45LDg4LjUsODguMSwxMDUuMmgwLjFsMywxLjRjMC43LTAuNCwxLjQtMC43LDIuMi0xYzAuNC0wLjIsMC45LTAuNCwxLjMtMC42IGMzNy4zLTE2LjYsODguNC0zOS41LDg4LjQtMTA1VjBIMHogTTExNiwxMzJsLTItNS4zbC0yNi42LTcwYy0xLjYsNC4xLTUuMywxNC05LjMsMjQuNmwtMTUuMyw0MS4zYy0wLjcsMi0wLjMsMywwLjIsMy43IGMxLjEsMS4zLDMuNSwxLjMsNy4zLDEuM0g3MWwwLDQuNEg0Mi40bDAtNC40aDIuMmMzLjksMCw3LjEtMS43LDkuNS02LjVsMi45LTYuNmwyNi41LTY3LjhsLTQuNy0xMi41aDI0LjdsMzQuMSw4OS43bDMuMSw4LjFIMTE2eiI+PC9wYXRoPjwvc3ZnPg==" /></a>

#### Computer Science Annex

<a href="/csannex/sprint/recMPt6jmsCgaqrfj" class="bd-toc-link">1.  Data Structures: Heaps</a>

-   [Heaps](/csannex/module/recNbOiLfM7bfQ0aE/)

<a href="/csannex/sprint/recKzV5STy8vYnbQ1" class="bd-toc-link">2.  Intro to Django</a>

-   [Django basics and setup](/csannex/module/recvCvXoZKm5cYOc4/)
-   [Building APIs](/csannex/module/recuEEEsf9eXphxy0/)

<a href="/csannex/sprint/recUHGX7arXkBIutr" class="bd-toc-link">3.  Python/Django I</a>

-   [Getting started with Python and Django](/csannex/module/rec4yg0hRHaeOmBGN/)
-   [Object-Oriented Programming](/csannex/module/recHhVqI4Y3j6UgLa/)
-   [Software Design Patterns](/csannex/module/recgVHqW0RShuQn1Z/)

<a href="/csannex/sprint/rec64nbdwB28JM7Qu" class="bd-toc-link">4.  Python/Django II/Career Development</a>

-   [REST](/csannex/module/rec7YHjLuXabdlhof/)
-   [GraphQL](/csannex/module/recjIPIwz5Pn5WbPh/)
-   [Model-View-Controller](/csannex/module/recVsikSMFoQ25WZd/)

<a href="/csannex/sprint/reczMSFEG5pffpADx" class="bd-toc-link">5.  Python/Django III/Career Development</a>

-   [Object-relational mapping](/csannex/module/reccrn1If8mhlIymc/)
-   [Relational Databases](/csannex/module/recU6Q1DLISGvt0dk/)

<a href="/csannex/sprint/recTTpwFpgZXtPG2o" class="bd-toc-link">6.  Project Week: Cellular Automata</a>

-   [Game of Life](/csannex/module/rec42j1bkTmC0Hsro/)

<a href="/csannex/sprint/recqkHjNcXzK5DTqd" class="bd-toc-link">7.  C Programming Topics</a>

-   [Introduction To C](/csannex/module/recLymrrD7f46rdBa/)
-   [Processes and System Calls](/csannex/module/rec7YmMV7ukDLK770/)
-   [Scheduling](/csannex/module/recfiYtQDLFXGOBFA/)
-   [Operating Systems](/csannex/module/recHPT5QiPS6NOCgz/)
-   [Web Server I](/csannex/module/recz76g3pcHs88Dax/)
-   [Web Server II](/csannex/module/recFGnBVmKCyR0427/)
-   [Theory of Computation](/csannex/module/recH0OAnSr6ZcnZ7F/)

-   [Prepare](#prepare)
-   [Learn](#learn)
-   [Project](#project)
-   [Review](#review)

# Django basics and setup

<span class="lead"> </span>

You’ve learned how to build back-ends with node.js, using the minimalist Express framework. Now you’re going to continue building your Python proficiency and get started with another framework - Django. Your first goal - get set up, learn a bit about the system, and be able to make a simple “Hello Django” application.

Django is, like Python, a pragmatic “one right way to do it” system, specifically a web application framework built on the principles of convention over configuration and fast iterative design. It is “batteries included”, which means it comes with ways to do most common web application tasks (data models, ORM, templates, forms, validation, auth, etc.).

The Django ecosystem bills itself as “the web framework for perfectionists with deadlines” - these many included features are what makes it quick to build an MVP with. We will start by learning about and using these components, and then move on to extend the system and (to some extent) pick and choose the modules we actually want.

For now, get started by setting out on the objectives, setting up a Python/Django development environment and making a basic Django app. There are also many linked resources to check out for each objective, Django has an excellent community with lots of helpful tutorials and documentation.

Have fun getting started with Django!

**At the end of this module, you should be able to:**

-   setup and use basic Python/Django development environment
-   describe and use the Django migration system
-   add a data model to Django
-   add data to the database using a Python shell
-   use a .env file to track \`SECRET\_KEY\` and other variables
-   set up and use the Django admin interface
-   migrate models with new fields added
-   subclass and specialize a model
-   run SQL and ORM commands to investigate Django's SQL database

#### Pro Tip

Always think of yourself as a learner…It’s like being in a community of wizards, and there’s still so much wizardry to learn, you never can learn it all. People who have been doing Unix command line, 30 or 40 years later, they’re still finding cool stuff they never knew about. There’s that moment of clarity when you discover a new trick, that you had no idea about - it’s wonderful. I think it’s that sense of wonder that brings people into technology in the first place. As software developers, we get that more than any other profession.

## <a href="#prepare" id="prepare" class="anchor"><span class="octicon octicon-link"></span></a>Prepare

Review each preclass resource before class.

-   

    # An error occurred.

    [Try watching this video on www.youtube.com](https://www.youtube.com/watch?v=2TS5303j07M), or enable JavaScript if it is disabled in your browser.

-   

    # An error occurred.

    [Try watching this video on www.youtube.com](https://www.youtube.com/watch?v=fQJa2onrEI8), or enable JavaScript if it is disabled in your browser.

-   

    # An error occurred.

    [Try watching this video on www.youtube.com](https://www.youtube.com/watch?v=2nlda8OUzCw), or enable JavaScript if it is disabled in your browser.

-   

    # An error occurred.

    [Try watching this video on www.youtube.com](https://www.youtube.com/watch?v=E8rcfcNChbw), or enable JavaScript if it is disabled in your browser.

-   

    # An error occurred.

    [Try watching this video on www.youtube.com](https://www.youtube.com/watch?v=r6r-CFQPfoQ), or enable JavaScript if it is disabled in your browser.

-   

    # An error occurred.

    [Try watching this video on www.youtube.com](https://www.youtube.com/watch?v=QtmB7wbfDiA), or enable JavaScript if it is disabled in your browser.

-   

    # An error occurred.

    [Try watching this video on www.youtube.com](https://www.youtube.com/watch?v=n042GgOq67Q), or enable JavaScript if it is disabled in your browser.

-   

    # An error occurred.

    [Try watching this video on www.youtube.com](https://www.youtube.com/watch?v=-E0-5_rBIsQ), or enable JavaScript if it is disabled in your browser.

-   

    # An error occurred.

    [Try watching this video on www.youtube.com](https://www.youtube.com/watch?v=iZT-Pr6xY84), or enable JavaScript if it is disabled in your browser.

-   [Python Cheat Sheet](http://overapi.com/python)

-   [Python Download Links](https://www.python.org/downloads/)

    Note - if you have a package manager (brew, apt, etc.) check that first.

-   [Official Python Documentation](https://docs.python.org/3/)

-   [Getting started with Django](https://docs.djangoproject.com/en/2.0/intro/)

    Intro, install guide, and writing your first Django app

-   [Resources for learning Python](http://docs.python-guide.org/en/latest/intro/learning/)

    A variety of mostly free resources for learning Python, organized by experience level and purpose/focus.

-   [Python plugin for VS Code](https://marketplace.visualstudio.com/items?itemName=ms-python.python)

    Official plugins for Python development with VS Code

-   [PEP8 Python Style Guide](https://pep8.org/)

    Official Python community style guide

-   [Google Python Style Guide](https://google.github.io/styleguide/pyguide.html)

    Google’s take on Python style.

-   [DevDocs](https://devdocs.io/)

    General offline documentation tool

-   [PythonAnywhere](https://www.pythonanywhere.com/)

    Cloud Python service with free plan

-   [Project Jupyter](https://jupyter.org/)

    Environment using Python (and more) for interactive data analysis.

## <a href="#learn" id="learn" class="anchor"><span class="octicon octicon-link"></span></a>Learn

#### Learn to setup and use basic Python/Django development environment

Django/Python will be our basis for teaching OOP, so getting set up and running with it is key. This means both having a development environment, knowing the basics of Python syntax, and getting your feet wet in the overall Python ecosystem (packages, documentation, etc.).

This objective is purely hands-on, so it is important to follow along and make sure you do each step. If you run into issues, ask for help - this environment will be used for the rest of the Django/Python material.

##### Overview

We’ll go over the basics: what Django is and what it buys us–why use it? We’ll also talk about the steps we’ll go through to set it up.

As a framework, Django has a large number of boilerplate commands that are needed to get things done. Although they are logically grouped and each performs a non-redundant, important task.

We’ll go into further detail in the tasks necessary to set up a project.

##### Follow Along

Check Python version and install or upgrade if less than 3.5.x.

Check Pip version and install or upgrade if less than 10.x.

-   Mac/Linux - Option A: `sudo -H pip3 install --upgrade pip`
-   Mac/Linux - Option B: `brew upgrade python`
-   PC - `python -m pip install --upgrade pip`

Check Pipenv version and install or upgrade if less than 2018.x  
*(2018.10.13 as of November 6, 2018)*

Normally you’d make a repo with a README and a Python gitignore, but since we’re going to be using pull requests to turn things in, just fork this repo instead.

Clone repo on to local machine.

In the terminal, navigate to root folder of repo.

Create pipenv virtual environment:

    pipenv --three

-   The `--three` option tells it to use Python3
-   This is similar to using `npm`/`yarn`

Verify that the `Pipfile` was created in the root of the repo.

Activate pipenv with `pipenv shell`

-   You should see the command line change to the name of your repo/folder followed by a dash and a random string.
-   We are using pipenv because it is newer and more robust. Uses a lockfile similar to npm/yarn. Easier to get into and out of shell.
-   To get back in, use `pipenv shell` from the root directory of the project.

### To Start a Django Project and App

Once you are in the virtual environment, install django:

    pipenv install django

-   We are using a virtual environment instead of installing globally because installing globally would be like using npm/yarn install globally and installing all the packages on everything.

Add `Pipfile` and `Pipfile.lock` to the repo with `git add Pipfile*` and commit with `git commit -m "added pipfiles"`.

Start a project with `django-admin startproject [name_of_project] .`

-   Replace \[nameofproject\] with the name of your project
-   The . tells it to create the project in the current directory. Otherwise, it would create a project in a subdirectory called \[name\_of\_project\]. We don’t need that because we want the repo folder to be the root

Verify that the \[name\_of\_project\] folder was created and has boilerplate files such as `__init__.py`.

The project is what it was named above. A project is made up of a collection of apps. It can have one or many.

Create an app with `django-admin startapp [name_of_app]`

-   For the first project, we are naming the app notes
-   Name it differently as appropriate if you are following this to set up, but working on something else.

### Start the Server

Verify that the \[name\_of\_app\] subdirectory has been created

Test by navigating to the project folder root/\[name\_of\_project\] and running `./manage.py runserver`

-   This should launch the animated rocket default page
-   Take note of the warning about unapplied migrations. We will fix that in a moment

Django makes it easier to make changes to databases. This is called migration(s).

##### Challenge

-   After you’ve done this once, delete your local clone and do it again from scratch. It will help mentally cement the steps needed.

------------------------------------------------------------------------

#### Learn to describe and use the Django migration system

One of the more powerful pieces of Django is how it automatically takes information from your model (defined in Python) and converts it to SQL for persistent storage in the database.

In particular, if you modify the model in the future, Django can handle largely-automatic updates to the SQL data with minimal intervention. Historically these kinds of SQL modifications were a significant pain-point, and is one that Django works hard to reduce.

##### Overview

We’ll describe how the migration system works in Django, how it interfaces with the database and how it is used to keep the database schema up-to-date with the data definition in the model.

Together we’ll run through an example of seeing what migrations need to be applied, how to apply them, and how to look under the hood at the SQL that is generated to modify the database.

##### Follow Along

Run `./manage.py showmigrations`. This will show a list of outstanding changes that need to occur.

To take a closer look at what is being done, you can look at the SQL queries that Django is building. *This step is entirely optional, and is only for the curious–which should be you!*

    ./manage.py sqlmigrate [package_name] [migration_id]

for example

    ./manage.py sqlmigrate admin 0001_initial

-   This will display a large number of sql commands that may not make sense if you are not yet familiar with SQL.
-   This doesn’t actually do anything. It just displays info.
-   These are all the data structures that your python code has created. Django turns this into sql tables, etc. for you. (If you’ve ever done this manually, you know how awesome that is :) )

To actually run the migrations, use:

    ./manage.py migrate

Check them by showing migrations again: `./manage.py showmigrations`

-   The list of migrations should show an `x` for each item.

Run the server again and confirm that the migration warning is not present. There won’t be a change to the actual page that renders.

##### Challenge

-   Set up a basic Django installation and run the server without first running the migrations.
-   Examine the migrations that need to be applied.
-   Apply them.
-   Run the server again to see that the migration warnings have gone away.

##### Dig Deeper

-   [Django Packages](https://djangopackages.org/)  
    Directory of reusable apps/tools for Django

------------------------------------------------------------------------

#### Learn to add a data model to Django

At the core of Django, your data is represented by models. Django automatically translates actions on the models into a variety of other things: SQL statements, API endpoints, and so on.

But the data model you describe is at the core.

##### Overview

We’ll discuss how models have a variety of fields that are used to represent different data types. Also, we’ll dig into the relationship between models and the migration process.

Together we’ll implement a new data model in our Django app, add fields to it, and generate and run migrations so that the data can be represented in the database.

##### Follow Along

In the `notes` folder, open `models.py`.

Create a class called `notes` that inherits from `models.Model`:

    class Note(models.Model):

This gives our new class access to all of the built-in functionality in `models.Model`.

Think about the data that we need for standard web notes functionality. We might want a title, body, some timestamps, etc. We can use the docs to find the types of things we can add:

https://docs.djangoproject.com/en/2.0/ref/models/

Add the following variables to the class:

    class Note(models.Model):
        title = models.CharField(max_length=200)
        content = models.TextField(blank=True)

Add any additional fields you would like as well.

We also need something to serve as a unique identifier for each record. We’ll use something called a UUID for this: <https://en.wikipedia.org/wiki/Universally_unique_identifier>.

Add a UUID to serve as a key for each record.

-   First, import the library:
        from uuid import uuid4
-   Second, add the field:
        id = models.UUIDField(primary_key=True, default=uuid4, editable=False)
-   Primary key is how the database tracks records.
-   Default calls a function to randomly generate a unique identifier.
-   We make editable false because we never want to change the key.
-   Put it at the top of the list of fields because it’s sort of like the index for the record.

Next, we need to tell the project that the app exists. Open `settings.py` from the project folder.

Find the section for `INSTALLED_APPS` and add `'notes'`, or other apps as appropriate.

In the console, check for migrations again with `./manage.py showmigrations`. The notes app should show up in the list now, but it has no migrations.

To generate the migrations, run:

    ./manage.py makemigrations

If you get an error that there are no changes to make, double-check that you have saved `models.py`.

Show migrations again to make sure they appear, then do the migration:

    ./manage.py migrate

##### Challenge

-   Add another data model that describes some type of data you’re interested in.

------------------------------------------------------------------------

#### Learn to add data to the database using a Python shell

There’s a Python shell built into Django that can be used to test the models and other Django entities that you create in the code. This can be a useful tool for experimenting and debugging.

##### Overview

We’ll discuss specific use cases for when we might want to use the shell and how it ties into Django and the backing database.

We’ll launch the shell, import the model we made, and create instances of it. We’ll also examine the data and functions associated with the new instance, as well as how to save it permanently to the database.

Once saved, we’ll take a peek at how to programmatically get those instances back out of the database.

##### Follow Along

`manage.py` has its own shell. Run `./manage.py shell` to bring up a Python repl.

-   The input line should change to `>>>`

Import the notes class into the repl:

    from notes.models import Note

Create a new note with:

    n = Note(title=”example”, content=”This is a test.”)

Check by the name of your variable to make sure worked:

    n

We can use a built in function from models (which `Note` inherited from!) to save this to the database:

    n.save()

Exit the terminal, then restart it - `exit()` then `./manage.py shell`

We have to import the `Note` class again, using the same command as before.

There is another built in method that will retrieve all existing objects of a class: `Note.objects.all()`

Use this to save the data back into a variable named `b` and explore.

##### Challenge

-   Using a different model, import the model.
-   Create two new instances of the model.
-   Save the instances to the database.
-   Exit the shell, then restart it.
-   Verify that the objects were saved in the database.

------------------------------------------------------------------------

#### Learn to use a .env file to track \`SECRET\_KEY\` and other variables

Django uses a secret key for a variety of different internal uses. It’s important to keep this key secret, and that secrecy is compromised if you store the key in source control (like git).

##### Overview

When we store data in source control, it’s there for everyone to see. Since Django uses its `SECRET_KEY` variable in `settings.py` for a variety of cryptographic purposes, it’s important that we keep it out of source control. We’ll discuss a way to do this using a `.env` file.

Additionally, there are other variables that you might need to change depending on whether or not you’re deployed or in a development environment. The `.env` file also helps in this regard.

Finally, we’ll discuss how to generate a new key if you’ve accidentally compromised yours.

##### Follow Along

Take a look at that secret key in `settings.py`.

We want to move this out of the settings file so that it doesn’t get checked into source control. We’ll move it to another file, which everyone on the project will need a copy of, but it won’t be in the repo itself.

We’re going to make use of a module called Python Decouple by installing it in the virtual environment:

    pipenv install python-decouple

Once it’s installed, we can bring it into `settings.py` with:

    from decouple import config

Pull up the docs for Python Decouple and take a look at the usage and rationale. There is an example for how to use it with Django. Follow that to remove the key from settings.

Add the key your `.env` file (creating it if you have to):

    SECRET_KEY='...whatever it was in the settings file...'

Then change the line in `settings.py` to:

    SECRET_KEY = config('SECRET_KEY')

We should also move `DEBUG` to the config file. Because the file is a string, and `DEBUG` expects a bool, we need to cast it:

    DEBUG = config('DEBUG', cast=bool)

We do this not for security, but so that it can be changed as needed on a development machine, without modifying the source code.

Don’t forget to add it to `.env` as well.

Test to make sure it still works and debug as needed.

Before moving on, verify that `.env` is in `.gitignore` and commit.

In case you’ve already committed a key earlier on accident, you can just generate a new one in any Python REPL with:

    import random
    ''.join([random.SystemRandom().choice('[email protected]#$%^&*(-_=+)') for i in range(50)]) # All one line!

##### Challenge

-   What other variables might it be useful to keep in the .env file? Why?
-   Create a new key and put it in your .env for safe keeping.

------------------------------------------------------------------------

#### Learn to set up and use the Django admin interface

One of the big draws of Django is its built-in easy-to-use admin interface. You can manage users, manipulate data, and perform all kinds of actions through the interface that might otherwise be painful to build in other frameworks.

##### Overview

Users can be set up not only for accessing the admin interface, but also for accessing the site or REST endpoints, as we’ll see later. Since you can also change data in the database, it gives you an automatic backdoor to remove offending data or add data in an ad-hoc way.

We’ll create the first user, the *superuser*. Then we’ll log in to the interface and create more users. We’ll also learn how to expose a model through the interface and manipulate data in the database through it.

##### Follow Along

Start the environment and server:

    pipenv shell
    ./manage.py runserver

Open the page in the web browser and navigate to the admin page: `localhost:8000/admin`. You will see a login page, but we don’t have an account to log in with yet.

To make an admin account, run:

    ./manage.py createsuperuser

Add a user `admin` with whatever password you choose.

Although it can be tempting to use a short and easy password for things like this, it is good practice to use a robust passphrase. You don’t want to forget and leave a superuser account with a weak password and have it pass to production.

Run the server and log into the admin account you just created. You will be able to see the automatically generated users and groups from the database, but our notes are missing.

We need to tell the admin interface which tables we’re interested in seeing.

In the `notes/admin.py` file:

    from .models import Note

and register the `Note` model with the admin site with:

    admin.site.register(Note)

Return to the site admin page. `Notes` should now be present. Try adding and/or editing a few.

##### Challenge

-   Add another user. Give them `staff` permissions.
-   Expose another model through the admin interface.
-   Use the interface to add and delete records in the new model.

------------------------------------------------------------------------

#### Learn to migrate models with new fields added

When you add new fields to models, something must be set up for the records that already exist in the database. There are several different approaches to take.

##### Overview

When you add a new field that can’t be empty to a model, Django wants to know what to do with that field. It needs to be populated with *something*, or be allowed to be blank.

So it will insist that you take some action to prevent the database from becoming inconsistent.

First we’ll add new fields to a model, then try to make a new migration for it. Django will let us know that we have to do something with the new fields for existing records.

We’ll experiment with manually setting the existing records, and also adding fields that can be blank or have a default.

##### Follow Along

It would also be nice to track created and modified dates.

Open `notes/models.py` and add:

    created_at = models.DateTimeField(auto_now_add=True)
    last_modified = models.DateTimeField(auto_now=True)

The argument we are using determines when and how this information should be updated: `auto_now_add` only sets on create, while `auto_now` will set on both create and update.

In the terminal, make the migration:

    ./manage.py makemigrations

You will get the following:

    You are trying to add the field ‘created_at’ with ‘auto_now_add=True’ to note
    without a default; the database needs something to populate existing rows.

    1) Provide a one-off default now (will be set on all existing rows)
    2) Quit, and let me add a default in models.py
    Select an option:

Default can sometimes be specified with:

    foo = whateverField(default=value)

Or you can allow the field to be blank with:

    foo = whateverField(blank=True)

But this *will not work* in a `DateTimeField` with `auto_now` or `auto_now_add` set, so use option 1 with suggested default of `timezone.now`.

Do the migration: `./manage.py migrate`

You might notice that the new fields aren’t showing up in the admin interface. This is because when you use `auto_now`, the field gets set to read-only, and such fields aren’t shown in the panel.

To get the read-only fields to show up in the interface:

    class NoteAdmin(admin.ModelAdmin):
        readonly_fields=('created_at', 'last_modified')

    ### Register your models here.
    admin.site.register(Note, NoteAdmin)

##### Challenge

-   Add three additional fields to your models
-   Allow one to be blank
-   Give another a default
-   Make migrations
-   Manually enter a value for the third new field

------------------------------------------------------------------------

#### Learn to subclass and specialize a model

If you have a simple model defined, you might want to offer variations on that model. Inheritance provides and easy way to do this, and Django takes care of the details of the relationship for you.

##### Overview

Just like classes can be related through inheritance, models (being classes themselves) can also be so-related. This can be a convenient to way to make multiple new models based on an existing, base model.

We’ll add a new model based on our existing one, and give it some extra functionality. We’ll also relate this model to a different model: the built-in `User` model. And, in order to maintain database consistency, we’ll determine what to do with our model in case that model’s `User` is deleted.

Django will take care of all the necessary database heavy lifting for us.

##### Follow Along

Next we want to add the ability to handle multiple users, and allow them to have their own personal notes.

First, we will create a new model that inherits from another: personal notes. Open up `notes/models.py`

To access the built-in user functionality:

    from django.contrib.auth.models import User

We could copy and paste the previous notes class to do this, but a better way is to have it inherit from it and just add the additional fields we need.

    class PersonalNote(Note):   # Inherits from Note!
        user = models.ForeignKey(User, on_delete=models.CASCADE)

What this is doing is importing Django’s built in user class model with something called a *foreign key* to create a reference to data on another table. It works sort of like a pointer in C.

`on_delete=models.CASCADE` helps with the integrity of the data. In relational databases, one of the principles is to protect consistency. There shouldn’t be an item in one table that references the foreign key of something that has been removed from another.

##### Challenge

-   Subclass another model and add more fields to it.

------------------------------------------------------------------------

#### Learn to run SQL and ORM commands to investigate Django's SQL database

Even though you don’t normally interact with Django at the SQL level, peeking under the hood can help you understand how data is modeled at a higher level. It’s also a good small introduction to SQL

##### Overview

When you define models in Django, it automatically does all the mappings required to store corresponding data in the SQL database. We can dig down and see how that storage is laid out, and we can access it with SQL commands.

For comparison, we’ll see how easy it is to use the Django ORM functionality to access the same data.

First we’ll launch Django’s SQL shell. This will allow us to examine the database and we’ll perform queries against it to retrieve our model data.

We’ll also look at a migration and see how that impacts the database when it runs.

Finally, we use Django’s ORM functionality to get data out. This is the typical way data is extracted from Django.

##### Follow Along

We can take a look in the database with `./manage.py dbshell`. If you get an error, you may need to install sqlite3 using your preferred method.

If it is working, the command prompt will change to `sqlite`.

`.tables` will display a list of tables

`pragma table_info(notes_note);` will show column names and types for the table `notes_note`.

`.headers on` and `.mode column` will adjust some settings to clean up the presentation if we open a table.

`SELECT * FROM notes_note;` is a sql command that will select all of the columns in the notes\_note table and display the data present. By convention, sql commands are often uppercase, but it is actually case insensitive.

All the notes we have created will be displayed.

Be *very* careful with sql commands. The command `DROP` will permanently delete a table and all of the data inside it without warning. *This language is powerful and has no mercy*.

Type `.exit` or `CTRL-D` to get out of dbshell.

Back in the virtual environment, because we modified the model to add personal notes, we need to do another migration.

Complete the migration process as before.

We also want personal notes to show up on the admin page. Open `admin.py` then import and register the new class. Remember, you can use tuples for both of these. Don’t forget to use the extra parentheses inside the register function.

Take a look at it in `admin`. It should be the same as before, but now we have a `user` field that is automatically populated.

We can use the admin interface to add more users in the user table, if we want.

For now, create a personal note for the admin account.

Go back to the sql shell, and take a look at the `notes_personalnote` table.

You’ll need to use the same three commands as above to display the table. Note that the info here is very different. Instead of having everything, it just has `user_id` and a foreign key `note_ptr_id`, pointing to a record in the full notes table.

Take a look at the `notes_note` table. The rest of the data will be here, listed under the uuid stored in `note_ptr_id`, a reference by the foreign key. This is why relational databases are relational.

The `user_id` is also a foreign key that points to Django’s built-in `auth_user` table. Run a `SELECT` query to look in that table, as well.

Drop out of the SQLite shell and open a Python shell with `./manage.py shell`.

Import personal notes: `from notes.models import PersonalNote`

Pull the list into a variable: `pn = PersonalNote.objects.all()`

Take a look at the name of the 0th record: `pn[0].user`. Try other fields as well.

Django lets us access information that is in multiple tables relatively easily. The sql details are hidden from us (in a good way!). It does all of the under the hood operations for us.

##### Challenge

-   Perform more ORM queries.
-   Look up the ORM `filter()` function and use it to select a subset of rows instead of all rows.
-   Use `order_by()` to order the results.

------------------------------------------------------------------------

## <a href="#project" id="project" class="anchor"><span class="octicon octicon-link"></span></a>Project

-   ##### [Django back end](https://github.com/LambdaSchool/Intro-Django)

    Over the course of the week, we’ll be putting together a Django app from scratch that provides a RESTful API for accessing data. Additionally, we’ll add token-based authentication.

## <a href="#review" id="review" class="anchor"><span class="octicon octicon-link"></span></a>Review

### Class Recordings

You can use class recordings to help you master the material.

-   **[Intro to Django Day 2 for CS13 w/ Brady Fukumoto](https://youtu.be/QYTjoTLOiQs)**

    Day 1 was focused mainly on installation of Django, in day 2 Brady has a more in depth discussion about Django’s functionality and answers many student questions

-   [All previous recordings](/archive/CSAnnex/module/recvCvXoZKm5cYOc4)

### Demonstrate Mastery

To demonstrate mastery of this module, you need to complete and pass a code review on each of the following:

-   Objective challenge:
    -   After you’ve done this once, delete your local clone and do it again from scratch. It will help mentally cement the steps needed.
-   Objective challenge:
    -   Set up a basic Django installation and run the server without first running the migrations.
    -   Examine the migrations that need to be applied.
    -   Apply them.
    -   Run the server again to see that the migration warnings have gone away.
-   Objective challenge:
    -   Add another data model that describes some type of data you’re interested in.
-   Objective challenge:
    -   Using a different model, import the model.
    -   Create two new instances of the model.
    -   Save the instances to the database.
    -   Exit the shell, then restart it.
    -   Verify that the objects were saved in the database.
-   Objective challenge:
    -   What other variables might it be useful to keep in the .env file? Why?
    -   Create a new key and put it in your .env for safe keeping.
-   Objective challenge:
    -   Add another user. Give them `staff` permissions.
    -   Expose another model through the admin interface.
    -   Use the interface to add and delete records in the new model.
-   Objective challenge:
    -   Add three additional fields to your models
    -   Allow one to be blank
    -   Give another a default
    -   Make migrations
    -   Manually enter a value for the third new field
-   Objective challenge:
    -   Subclass another model and add more fields to it.
-   Objective challenge:
    -   Perform more ORM queries.
    -   Look up the ORM `filter()` function and use it to select a subset of rows instead of all rows.
    -   Use `order_by()` to order the results.
-   Project: Django back end
