<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Intended as a home for Lambda School curriculum.">
  <meta name="author" content="">
  <meta name="generator" content="Jekyll v3.8.0">
  <title>Testing React · Lambda School</title>

  <link rel='stylesheet' integrity crossorigin='anonymous'
    href='https://d33wubrfki0l68.cloudfront.net/css/0f99ed215b3d52fa1bee44dc614ea3fa1d1bebc0/dist/css/bootstrap.min.css' />

  <link href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" rel="stylesheet">
  <link rel='stylesheet'
    href='https://d33wubrfki0l68.cloudfront.net/css/1bf8317b3d6d0c9d813c92505f052bf79ffdcdfe/assets/css/docs.min.css' />

  <link rel='stylesheet'
    href='https://d33wubrfki0l68.cloudfront.net/css/f3626ab7ab84821f8b60ea92b4a5c6acf59991af/assets/css/main.css' />

  <script>
    ( function ( i, s, o, g, r, a, m ) {
      i[ 'GoogleAnalyticsObject' ] = r;
      i[ r ] = i[ r ] || function () {
        ( i[ r ].q = i[ r ].q || [] ).push( arguments )
      }, i[ r ].l = 1 * new Date();
      a = s.createElement( o ),
        m = s.getElementsByTagName( o )[ 0 ];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore( a, m )
    } )( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' );
    ga( 'create', 'UA-122016605-1', 'learn.lambdaschool.com' );
    ga( 'send', 'pageview' );
  </script>

  <script>
    ! function () {
      var analytics = window.analytics = window.analytics || [];
      if ( !analytics.initialize )
        if ( analytics.invoked ) window.console && console.error && console.error( "Segment snippet included twice." );
        else {
          analytics.invoked = !0;
          analytics.methods = [ "trackSubmit", "trackClick", "trackLink", "trackForm", "pageview", "identify", "reset",
            "group", "track", "ready", "alias", "debug", "page", "once", "off", "on"
          ];
          analytics.factory = function ( t ) {
            return function () {
              var e = Array.prototype.slice.call( arguments );
              e.unshift( t );
              analytics.push( e );
              return analytics
            }
          };
          for ( var t = 0; t < analytics.methods.length; t++ ) {
            var e = analytics.methods[ t ];
            analytics[ e ] = analytics.factory( e )
          }
          analytics.load = function ( t, e ) {
            var n = document.createElement( "script" );
            n.type = "text/javascript";
            n.async = !0;
            n.src = "https://cdn.segment.com/analytics.js/v1/" + t + "/analytics.min.js";
            var a = document.getElementsByTagName( "script" )[ 0 ];
            a.parentNode.insertBefore( n, a );
            analytics._loadOptions = e
          };
          analytics.SNIPPET_VERSION = "4.1.0";
          analytics.load( "BjKorwKrSvMamfNoGkBq9rISk7wF6QQX" );
          analytics.page();
        }
    }();
  </script>

  <link rel="apple-touch-icon" href="/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" href="/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
  <link rel="manifest" href="/assets/img/favicons/manifest.json">
  <link rel="mask-icon" href="/assets/img/favicons/safari-pinned-tab.svg" color="#a0001e">
  <link rel="icon" href="/favicon.ico">
  <meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
  <meta name="theme-color" content="#a0001e">
</head>

<body>
  <noscript>Please enable JavaScript to view this page.</noscript>
  <div id="redirect-message" style="display: none;">
    You must be logged in to view this page.
  </div>
  <div id="unauthorized-message" style="display: none;">
    You must be a Lambda School student to view this page.
  </div>
  <div id="content-wrapper">
    <a id="skippy" class="sr-only sr-only-focusable" href="#content">
      <div class="container">
        <span class="skiplink-text">Skip to main content</span>
      </div>
    </a>
    <div class="mobile-menu">
      <div class="m-drop">
        <div class="mobile-row">
          <div class="header-row" style="padding: 3px 7px">
            <a class="navbar-brand" href="/" aria-label="Lambda School"><svg xmlns="http://www.w3.org/2000/svg"
                width="33" height="35" viewBox="0 0 33 35" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M0 0V16.0609C0 27.7335 9.08929 31.7843 15.7321 34.7513H15.75L16.2857 35C16.4107 34.9289 16.5357 34.8756 16.6786 34.8223C16.75 34.7868 16.8393 34.7513 16.9107 34.7157C23.5714 31.7665 32.6964 27.698 32.6964 16.0609V0H0ZM20.7071 23.4536L20.3571 22.5102L15.6071 10.0736C15.3214 10.802 14.6607 12.5609 13.9464 14.4442L11.2143 21.7817C11.0893 22.1371 11.1607 22.3147 11.25 22.4391C11.4464 22.6701 11.8768 22.6701 12.5554 22.6701H12.6786L12.6768 23.4518H7.56964V22.6701H7.9625C8.65893 22.6701 9.23036 22.368 9.65893 21.5152L10.1768 20.3426L14.9089 8.29696L14.0696 6.07614H18.4804L24.5696 22.0127L25.125 23.4536H20.7071Z"
                  fill="#EC3944" />
              </svg></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mobile-course-menu"
              aria-controls="mobile-course-menu" aria-expanded="false" aria-label="Toggle navigation">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false">
                <title>Menu</title>
                <path stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10"
                  d="M4 7h22M4 15h22M4 23h22"></path>
              </svg>
            </button>
          </div>
        </div>
        <div class="nav-row">
          <div class="results-container">
            <ul id="results-container" class="dropdown list-group"></ul>
          </div>
          <div id="mobile-course-menu" class="collapse nav-row">
            <div class="docs-mobile-sidebar" id="bd-docs-nav-mobile">
              <nav class="bd-links">
                <div class="bd-toc-item">
                  <h4 class="bd-toc-link">Web Applications II</h4>
                </div>

                <div class="bd-toc-item ">
                  <a class="bd-toc-link" href="/web3/sprint/recq59MvEIZfUAohy">
                    1.&nbsp;&nbsp;Advanced React
                  </a>
                  <ul class="nav bd-sidenav">

                    <li>
                      <a href="/web3/module/recnDKrWb24lgaziC/">
                        Class Components
                      </a>
                    </li>
                    <li>
                      <a href="/web3/module/rec1DPoOZSmocXfak/">
                        The React Lifecycle
                      </a>
                    </li>
                    <li>
                      <a href="/web3/module/recAxmnYmusEi8JuL/">
                        Composing and Sharing Non-Visual Behavior
                      </a>
                    </li>
                    <li>
                      <a href="/web3/module/rechTQVfCg4p85Hoi/">
                        Testing Web Applications
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="bd-toc-item ">
                  <a class="bd-toc-link" href="/web3/sprint/recukritK1B1pFrcM">
                    2.&nbsp;&nbsp;Advanced State Management
                  </a>
                  <ul class="nav bd-sidenav">

                    <li>
                      <a href="/web3/module/rectpk6uIV3pCHJh8/">
                        The Reducer Pattern
                      </a>
                    </li>
                    <li>
                      <a href="/web3/module/recba2NUdVmgKYyR3/">
                        Redux
                      </a>
                    </li>
                    <li>
                      <a href="/web3/module/recSoiWNJzGURrXYh/">
                        Async Redux
                      </a>
                    </li>
                    <li>
                      <a href="/web3/module/recByjgF7FwwH5Z7W/">
                        Context API
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="bd-toc-item ">
                  <a class="bd-toc-link" href="/web3/sprint/recnhsJGy28gNi1K5">
                    3.&nbsp;&nbsp;Advanced Web Applications
                  </a>
                  <ul class="nav bd-sidenav">

                    <li class="active bd-sidenav-active">
                      <a href="/web3/module/recS9H6qCj0dQe32B/">
                        Testing React
                      </a>
                    </li>
                    <li>
                      <a href="/web3/module/recQlbCZf9tOVgiXC/">
                        Client-Side Authentication
                      </a>
                    </li>
                    <li>
                      <a href="/web3/module/recupVjaAKPqbuk7Y/">
                        HTTP / AJAX II
                      </a>
                    </li>
                    <li>
                      <a href="/web3/module/receOMvCB7dSyX5FL/">
                        Deploying Web Apps
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="bd-toc-item ">
                  <a class="bd-toc-link" href="/web3/sprint/recVFiuMBzbcZllxC">
                    4.&nbsp;&nbsp;WEB Unit 3 Build
                  </a>
                  <ul class="nav bd-sidenav">

                  </ul>
                </div>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="main-container">
      <div class="sidebar-container bd-sidebar">
        <div class="docs-sidebar">
          <a class="navbar-brand" href="/" aria-label="Lambda School"><svg width="135" height="35" viewBox="0 0 756 197"
              fill="#ec3944">
              <g>
                <path
                  d="M292.9,126.6h-6.7c-9,0-12.6-1.9-12.6-9.5V48.5c0-7.7,1.6-8.6,11.4-9.7v-4.5h-41.3v4.5 c9.8,1.1,11.4,1.9,11.4,9.7v69.3c0,7.7-1.6,8.6-11.4,9.7v4.5h73.7l4.9-29.4h-4.4C308.5,119.6,303.9,126.6,292.9,126.6z">
                </path>
                <path
                  d="M385.5,121.1V79.3c0-15.8-9.4-22.4-26.6-22.4c-15,0-26.8,6.6-26.8,19.3c0,2.4,0.2,3.3,0.8,5h16.6 c-0.5-2-0.7-5-0.7-7.5c0-9.6,3.6-12.4,9.4-12.4c6.4,0,9.7,2,9.7,14.4v11.2l-20.8,7.7c-10.6,4.1-19.3,8.8-19.3,20.7 c0,10.9,7.5,17.8,18.6,17.8c9.9,0,17.4-6.2,21.9-12.1l0.1-0.1l0,0V132h26v-4.4C387.7,127.1,385.5,126.2,385.5,121.1z M368,117.8 c-4.4,3.3-7.6,5.3-12,5.4c-7.7,0-11.2-5.2-11.2-12.6c0-7.7,3.6-11.2,9.8-13.5l13.4-5.4V117.8L368,117.8z">
                </path>
                <path
                  d="M514.4,121V79.5c0-14.8-6-22.4-18.7-22.4c-11.5,0-19.4,6.6-25.5,13.9c-1.8-9.6-7.7-13.9-17.8-13.9 c-11.4,0-18.7,6.2-24.8,13.6V57h-2.3l-23.8,7.4v2.4l8.6,5v49.4c0,5-2.1,6.1-8.9,6.4v4.4h35.1v-4.4c-6.7-0.3-8.7-1.3-8.7-6.4v-47 c4.7-3.6,9.5-6.5,15.5-6.5c7.6,0,10.5,4.2,10.5,12.7v40.8c0,5-1.9,6.1-8.7,6.4v4.4l34.8,0v-4.4c-6.7-0.3-8.6-1.3-8.6-6.4v-47 c4.7-3.6,9.5-6.5,15.5-6.5c7.6,0,10.5,4.2,10.5,12.7l-0.1,40.5c0,5-1.8,6.4-8.6,6.7l0,4.4h35.1v-4.4 C516.7,127.4,514.4,126.1,514.4,121z">
                </path>
                <path
                  d="M573.2,57.3c-11,0-18.5,5.7-23.4,12.8V22.9h-2.7l-23.4,6.8v2.5l8.6,4.5V132h2.9l8-3.5c5.8,3.3,12.3,5,20.2,5 c20.8,0,37.4-15.8,37.4-42.6C600.9,69.9,590.4,57.3,573.2,57.3z M563.4,128.7c-5.4,0-10.3-2.4-13.7-7.9V73.6 c3.4-3.4,8.5-5.7,13.5-5.7c13.9,0,20,12.8,20,29.5C583.3,114.7,575.8,128.5,563.4,128.7z">
                </path>
                <path
                  d="M677,121.2V22.8h-2.6L651,29.6V32l8.6,4.5v25.7c-3.4-3.2-8.8-5.1-15.5-5.1c-19.9,0-35.2,15.3-35.2,41.3 c0,20.7,11.2,34.6,28.1,34.6c9.8,0,17-5.3,22.6-13.1v0.9V132h26.3l0-4.4C679.1,127.3,677,126.3,677,121.2z M659.6,117.1 L659.6,117.1c-3.4,3.4-8,5.1-13.2,5.1c-13.2,0-20.4-12.8-20.4-29.8c0-17.8,7.3-29.2,19.5-29.2c8.7,0,14.1,6.9,14.1,18.3 L659.6,117.1z">
                </path>
                <path
                  d="M747.1,121.1V79.3c0-15.8-9.4-22.4-26.6-22.4c-15,0-26.8,6.6-26.8,19.3c0,2.4,0.2,3.3,0.8,5h16.6 c-0.5-2-0.7-5-0.7-7.5c0-9.6,3.6-12.4,9.4-12.4c6.4,0,9.7,2,9.7,14.4v11.2l-20.8,7.7c-10.6,4.1-19.3,8.8-19.3,20.7 c0,10.9,7.5,17.8,18.6,17.8c9.9,0,17.4-6.2,21.9-12.1v-0.1h0.1l0,11.1l26,0.1v-4.5C749.3,127.1,747.1,126.2,747.1,121.1z M729.6,117.8c-4.4,3.3-7.6,5.3-12.1,5.4c-7.7,0-11.2-5.2-11.2-12.6c0-7.7,3.6-11.2,9.8-13.5l13.4-5.4L729.6,117.8L729.6,117.8z">
                </path>
              </g>
              <path
                d="M0,0v90.4c0,65.7,50.9,88.5,88.1,105.2h0.1l3,1.4c0.7-0.4,1.4-0.7,2.2-1c0.4-0.2,0.9-0.4,1.3-0.6 c37.3-16.6,88.4-39.5,88.4-105V0H0z M116,132l-2-5.3l-26.6-70c-1.6,4.1-5.3,14-9.3,24.6l-15.3,41.3c-0.7,2-0.3,3,0.2,3.7 c1.1,1.3,3.5,1.3,7.3,1.3H71l0,4.4H42.4l0-4.4h2.2c3.9,0,7.1-1.7,9.5-6.5l2.9-6.6l26.5-67.8l-4.7-12.5h24.7l34.1,89.7l3.1,8.1H116z">
              </path>
            </svg></a>
          <ul id="results-container" class="dropdown list-group"></ul>
          <nav class="bd-links collapse" id="bd-docs-nav">
            <div class="bd-toc-item">
              <h4 class="bd-toc-link">Web Applications II</h4>
            </div>

            <div class="bd-toc-item ">
              <a class="bd-toc-link" href="/web3/sprint/recq59MvEIZfUAohy">
                1.&nbsp;&nbsp;Advanced React
              </a>
              <ul class="nav bd-sidenav">

                <li>
                  <a href="/web3/module/recnDKrWb24lgaziC/">
                    Class Components
                  </a>
                </li>
                <li>
                  <a href="/web3/module/rec1DPoOZSmocXfak/">
                    The React Lifecycle
                  </a>
                </li>
                <li>
                  <a href="/web3/module/recAxmnYmusEi8JuL/">
                    Composing and Sharing Non-Visual Behavior
                  </a>
                </li>
                <li>
                  <a href="/web3/module/rechTQVfCg4p85Hoi/">
                    Testing Web Applications
                  </a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item ">
              <a class="bd-toc-link" href="/web3/sprint/recukritK1B1pFrcM">
                2.&nbsp;&nbsp;Advanced State Management
              </a>
              <ul class="nav bd-sidenav">

                <li>
                  <a href="/web3/module/rectpk6uIV3pCHJh8/">
                    The Reducer Pattern
                  </a>
                </li>
                <li>
                  <a href="/web3/module/recba2NUdVmgKYyR3/">
                    Redux
                  </a>
                </li>
                <li>
                  <a href="/web3/module/recSoiWNJzGURrXYh/">
                    Async Redux
                  </a>
                </li>
                <li>
                  <a href="/web3/module/recByjgF7FwwH5Z7W/">
                    Context API
                  </a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item ">
              <a class="bd-toc-link" href="/web3/sprint/recnhsJGy28gNi1K5">
                3.&nbsp;&nbsp;Advanced Web Applications
              </a>
              <ul class="nav bd-sidenav">

                <li class="active bd-sidenav-active">
                  <a href="/web3/module/recS9H6qCj0dQe32B/">
                    Testing React
                  </a>
                </li>
                <li>
                  <a href="/web3/module/recQlbCZf9tOVgiXC/">
                    Client-Side Authentication
                  </a>
                </li>
                <li>
                  <a href="/web3/module/recupVjaAKPqbuk7Y/">
                    HTTP / AJAX II
                  </a>
                </li>
                <li>
                  <a href="/web3/module/receOMvCB7dSyX5FL/">
                    Deploying Web Apps
                  </a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item ">
              <a class="bd-toc-link" href="/web3/sprint/recVFiuMBzbcZllxC">
                4.&nbsp;&nbsp;WEB Unit 3 Build
              </a>
              <ul class="nav bd-sidenav">

              </ul>
            </div>
          </nav>
        </div>
      </div>
      <main class="content-container flex-wrapper" role="main">
        <div class="sticky-nav">
          <div class="sprint-nav">
            <ul class="section-nav">
              <li class="toc-entry toc-h2"><a href="#prepare">Prepare</a></li>
              <li class="toc-entry toc-h2"><a href="#learn">Learn</a></li>
              <li class="toc-entry toc-h2"><a href="#project">Project</a></li>
              <li class="toc-entry toc-h2"><a href="#review">Review</a></li>
            </ul>
          </div>

        </div>
        <div class="wrapper limit-width">
          <div class="flex-wrapper">
            <div class="limit-width">
              <div class="jumbotron">
                <h1 class="bd-title" id="content">Testing React</h1>
                <span class="lead">
                  <p class="bd-lead"></p>
                  <p>In this module we introduce common techniques used for testing React components.</p>
                </span>
                <strong>At the end of this module, you should be able to:</strong>
                <ul>
                  <li>test React components as the props change</li>
                  <li>use mocks in web application tests</li>
                  <li>test asynchronous API calls that are made in a component</li>
                </ul>
              </div>
              <div class="alert alert-warning" role="alert">
                <h4>Pro Tip</h4>
                <p>Know your audience.</p>
              </div>
              <h2 class="display-4">
                <a id="prepare" class="anchor" href="#prepare" aria-hidden="true"><span
                    class="octicon octicon-link"></span></a>Prepare</h2>
              <p class="lead">Review each preclass resource before class.</p>
              <div class="preclass">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">
                    <a target="_blank" href="https://jestjs.io/docs/en/asynchronous">Jest Documentation on Testing
                      Asynchronous Code</a>
                  </li>
                </ul>
              </div>
              <h2 class="display-4">
                <a id="learn" class="anchor" href="#learn" aria-hidden="true"><span
                    class="octicon octicon-link"></span></a>Learn</h2>
              <h4 class="mark mb-3 p-2">Learn to test React components as the props change</h4>
              <h5>Overview</h5>
              <p>Today we’re going to continue working with React Testing Library to test rendered DOM elements. In this
                objective, we will focus on testing data being passed as props, and testing props changes that may
                happen in a component.</p>
              <p>In some cases, when props are updated, you’ll want to run a secondary test on the same component. With
                our previous knowledge of react testing library, this would have been fairly difficult, but thankfully
                there is a built in method called <code class="highlighter-rouge">rerender()</code> that allows us to
                pretty easily look at a component with new props.</p>
              <p>In order to do this we need to add the <code class="highlighter-rouge">rerender</code> function when
                setting up our test for use in testing the component <strong>after</strong> the prop has been updated.
              </p>
              <p>Let’s look at an example where we have some component called <code
                  class="highlighter-rouge">PhoneNumber</code> that the user will update with their phone number. We
                want to show an error message when the component is empty but pass the test after the user puts in a
                number between 0 and 10.</p>
              <div class="language-jsx highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="c1">// name test</span>
<span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">entering an invalid value shows an error message</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// pull in testing properties - add rerender and debug</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">getByLabelText</span><span class="p">,</span> <span class="nx">getByRole</span><span class="p">,</span> <span class="nx">rerender</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">PhoneNumber</span> <span class="p">/&gt;</span>
  <span class="p">);</span>
  <span class="kd">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">getByLabelText</span><span class="p">(</span><span class="sr">/favorite number/i</span><span class="p">);</span>
  <span class="c1">// update prop</span>
  <span class="nx">fireEvent</span><span class="p">.</span><span class="nx">change</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="p">{</span> <span class="na">target</span><span class="p">:</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2025550113</span><span class="dl">"</span> <span class="p">}</span> <span class="p">});</span>
  <span class="c1">// test component</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">"</span><span class="s2">alert</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toHaveTextContent</span><span class="p">(</span><span class="sr">/the number is invalid/i</span><span class="p">);</span>
  <span class="c1">// test prop updates</span>
  <span class="nx">rerender</span><span class="p">(&lt;</span><span class="nc">PhoneNumber</span> <span class="na">phoneNumber=</span><span class="si">{</span><span class="dl">"</span><span class="s2">2025550113</span><span class="dl">"</span><span class="si">}</span> <span class="p">/&gt;);</span>
<span class="p">});</span>
</code></pre>
                </div>
              </div>
              <p>How does this work in practice? In the example above we are interested in a component called <code
                  class="highlighter-rouge">PhoneNumber</code>. Since the first test is testing the component before the
                prop updates, the test will fail and show an error message. Once the user inputs their number however,
                the second test (the rendering) should pass. If you were to run this code in your console that’s exactly
                what you’d see.</p>
              <h3 id="assert-content-is-not-rendered">Assert Content is not Rendered</h3>
              <p>In some cases, we want to make sure that content is <em>not</em> rendering on the DOM. For example, if
                a component should show up on click or, really any time after pageload. React testing library isn’t
                exactly built for this as all <code class="highlighter-rouge">getBy</code> assertions return an error if
                they can’t find the thing they’re searching for (if a return is <code
                  class="highlighter-rouge">null</code>). Luckily there is a workaround here - the assertion called
                <code class="highlighter-rouge">queryByRoll</code> (or any <code
                  class="highlighter-rouge">queryBy</code> assertion), will return <code
                  class="highlighter-rouge">null</code> instead of an error. This let’s us query for something this
                <em>isn’t</em> supposed to be on the DOM. It also allows us to use an assertion like <code
                  class="highlighter-rouge">.toBeNull()</code> or <code class="highlighter-rouge">toBeFalsy()</code>,
                and then tests will start passing even when no content is rendered.</p>
              <div class="language-jsx highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">entering an invalid value shows an error message</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// pull in testing properties - add rerender</span>
  <span class="c1">// render the component without a prop</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">getByLabelText</span><span class="p">,</span> <span class="nx">getByRole</span><span class="p">,</span> <span class="nx">queryByRole</span><span class="p">,</span> <span class="nx">rerender</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">PhoneNumber</span> <span class="p">/&gt;</span>
  <span class="p">);</span>
  <span class="kd">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">getByLabelText</span><span class="p">(</span><span class="sr">/favorite number/i</span><span class="p">);</span>
  <span class="c1">// test component</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">"</span><span class="s2">alert</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toHaveTextContent</span><span class="p">(</span><span class="sr">/the number is invalid/i</span><span class="p">);</span>
  <span class="c1">// test prop updates by rerendering component with different props</span>
  <span class="nx">rerender</span><span class="p">(&lt;</span><span class="nc">PhoneNumber</span> <span class="na">phoneNumber=</span><span class="si">{</span><span class="dl">"</span><span class="s2">2025550113</span><span class="dl">"</span><span class="si">}</span> <span class="p">/&gt;);</span>
  <span class="c1">// assert that the error message is NOT being rendered (optional)</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">queryByRoll</span><span class="p">(</span><span class="dl">"</span><span class="s2">alert</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toBeNull</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
                </div>
              </div>
              <h5>Follow Along</h5>
              <p>In this section we will continue building tests for dog images app from the previous objective. In this
                example there is a parent component that is in charge of fetching the data from dog.ceo, and a child
                component that receives that data as a prop and displays the dog images on the page. For this example,
                we will render the dog images into a new component after the initial rendering of the page. We need to
                test if the dog images appear on rerender.</p>
              <p>This means we want to test the child component. We will test that it renders a “getting data” message
                when it is passed an empty array as a prop. Then we will re-render the component and pass down our
                actual data, to simulate the parent component receiving data from the API and passing that data down to
                this child component.</p>
              <p><em>Note that this means we don’t have to test the async function, or even the event that kicked off
                  the API call. We just render what this component looks like when it first mounts with no data, and
                  what it looks like when it receives new props and re-renders.</em></p>
              <ol>
                <li>Create test and pull in relevant matchers from react testing library.</li>
              </ol>
              <div class="language-jsx highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="c1">//import libraries</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">render</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@testing-library/react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">DoggoImages</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./DoggoImages</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">renders dog images from API</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Render the component with an empty array</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">getAllByTestId</span><span class="p">,</span> <span class="nx">rerender</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(&lt;</span><span class="nc">Doggos</span> <span class="na">images=</span><span class="si">{</span><span class="p">[]</span><span class="si">}</span> <span class="p">/&gt;);</span>

  <span class="c1">// Assert that there are no dog images rendered yet</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">getAllByTestId</span><span class="p">(</span><span class="sr">/doggo images/i</span><span class="p">)).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
                </div>
              </div>
              <ol>
                <li>Update prop by passing a user input. Test updated prop using <code
                    class="highlighter-rouge">rerender</code>.</li>
              </ol>
              <div class="language-jsx highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="c1">//import libraries</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">render</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@testing-library/react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">DoggoImages</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./DoggoImages</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">renders dog images from API</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">doggoUrls</span> <span class="o">=</span> <span class="p">[</span>
    <span class="dl">'</span><span class="s1">url-one.jpg</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">url-two.jpeg</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">url-three.jpg</span><span class="dl">'</span>
  <span class="p">]</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">getAllByTestId</span><span class="p">,</span> <span class="nx">rerender</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(&lt;</span><span class="nc">DoggoImages</span> <span class="na">images=</span><span class="si">{</span><span class="p">[]</span><span class="si">}</span> <span class="p">/&gt;);</span>

  <span class="nx">expect</span><span class="p">(</span><span class="nx">getAllByTestId</span><span class="p">(</span><span class="sr">/doggo images/i</span><span class="p">)).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="c1">// We will rerender the component with our dummy data passed in as the new props</span>
  <span class="nx">rerender</span><span class="p">(&lt;</span><span class="nc">DoggoImages</span> <span class="na">images=</span><span class="si">{</span><span class="nx">doggoUrls</span><span class="si">}</span> <span class="p">/&gt;);</span>

  <span class="c1">// Assert that we now have dog images rendering!</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">getAllByTestId</span><span class="p">(</span><span class="sr">/doggo images/i</span><span class="p">)).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
                </div>
              </div>
              <h5>Challenge</h5>
              <p>Find an example of updating props in a previous project. Design a test using <code
                  class="highlighter-rouge">rerender</code> that will assert one state after the component first
                renders, and assert a different state after he component renders again with new props.</p>
              <hr>
              <h4 class="mark mb-3 p-2">Learn to use mocks in web application tests</h4>
              <p>Unfortunately our functions don’t live in a vacuum, but have entanglements with the outer world, such
                as dependencies on other modules. Or they might take callbacks as arguments, which creates the
                interesting problem of how to test that the callbacks were invoked and the correct arguments passed. To
                handle both these problems we can use Jest’s mock functions.</p>
              <h5>Overview</h5>
              <p>A function in testing may have inconvenient dependencies on other objects. To isolate the behavior of
                the function, it’s often desirable to replace the other objects with mocks that simulate the behavior of
                the real objects. Replacing objects is especially useful if the real objects are impractical to
                incorporate into the unit test.</p>
              <p>Another use of mocks is as “spies” because they let us spy on the behavior of a function that is called
                by some other code. Mock functions can keep track of calls to the function, as well as the parameters
                passed in those calls. We can even define an implementation for the mock, but that’s optional. Simpler
                mocks that implement only enough behavior to execute test code are sometimes called “stubs”.</p>
              <h5>Follow Along</h5>
              <p>Let’s implement a helper function with an uncomfortable dependency that makes the helper
                <em>impure</em> (reliant on something outside of its scope) and, therefore, harder to test
                <strong>(you’ll need to install the <code class="highlighter-rouge">uuid</code> npm module)</strong>.
              </p>
              <div class="language-javascript highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>   <span class="k">import</span> <span class="nx">uuid</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">uuid</span><span class="dl">"</span><span class="p">;</span>

   <span class="k">export</span> <span class="kd">const</span> <span class="nx">makeUser</span> <span class="o">=</span> <span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
     <span class="k">return</span> <span class="p">{</span>
       <span class="na">id</span><span class="p">:</span> <span class="nx">uuid</span><span class="p">(),</span>
       <span class="na">fullName</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span>
     <span class="p">};</span>
   <span class="p">};</span>
</code></pre>
                </div>
              </div>
              <ol>
                <li>
                  <p>Testing expected output against actual output would be hard, because <code
                      class="highlighter-rouge">uuid()</code> generates a new, random id each time. We can give it a
                    try, though. Note the use of <code class="highlighter-rouge">.toEqual()</code> to make our
                    assertion. It compares nested properties of objects, which we need to check here.</p>
                  <div class="language-javascript highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">makeUser</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../utils/makeUser</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">generates a user with an id and a full name</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Arrange</span>
  <span class="kd">const</span> <span class="nx">expected</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">abcde</span><span class="dl">"</span><span class="p">,</span> <span class="na">fullName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Peter Parker</span><span class="dl">"</span> <span class="p">};</span> <span class="c1">// fishy...</span>

  <span class="c1">// Act</span>
  <span class="kd">const</span> <span class="nx">actual</span> <span class="o">=</span> <span class="nx">makeUser</span><span class="p">(</span><span class="dl">"</span><span class="s2">Peter</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Parker</span><span class="dl">"</span><span class="p">);</span>

  <span class="c1">// Assert</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">actual</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">expected</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
                    </div>
                  </div>
                  <p><img
                      src="https://tk-assets.lambdaschool.com/6db480a0-84b6-4210-91a2-091475a1c731_ScreenShot2019-04-16at19.33.30.png"
                      alt="alt text"></p>
                </li>
              </ol>
              <p><em>By the way, this kind of test is called a <strong>unit test</strong> - a test for a single unit of
                  code, like an isolated function like <code class="highlighter-rouge">makeUser</code>. You’ll learn
                  more about unit testing in the backend unit, but we can see what happening here with the AAA
                  framework.</em></p>
              <ol>
                <li>
                  <p>To get around this problem, we can stub out (create) a fake version of <code
                      class="highlighter-rouge">uuid</code> that will replace the real one during the execution of the
                    test. Outside of the <code class="highlighter-rouge">test</code> block, at the top level of the test
                    file, place the following code:</p>
                  <div class="language-javascript highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code><span class="nx">jest</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="dl">"</span><span class="s2">uuid</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">abcde</span><span class="dl">"</span><span class="p">);</span>
</code></pre>
                    </div>
                  </div>
                </li>
              </ol>
              <p>Let’s break it down. As the first argument to <code class="highlighter-rouge">jest.mock()</code>, we
                pass the path to the module we want to replace. As the second argument, we pass a callback that
                <em>returns</em> whatever it is <em>we want the faked thing to be</em>. We wish for <code
                  class="highlighter-rouge">uuid</code> to become a silly stub function that always returns the same
                string: <code class="highlighter-rouge">uuid() // "abcde"</code>. Our tests should be passing now!</p>
              <h5>Challenge</h5>
              <p>There is a way to centralize mocks that are used often (think <code
                  class="highlighter-rouge">uuid</code>, or <code class="highlighter-rouge">axios</code>) in external
                files, so that they are used in test suites without even bothering with imports. Go to the Jest docs and
                see if you can find out how!</p>
              <hr>
              <h4 class="mark mb-3 p-2">Learn to test asynchronous API calls that are made in a component</h4>
              <p>Most real world applications need to deal with asynchronous operations. Adding tests to asynchronous
                code is challenging as we need to make sure the code has finished executing and the application is
                stable before running the assertions.</p>
              <h5>Overview</h5>
              <p>An asynchronous test is a special kind of test that does not complete right away, as it needs to wait
                for the results of one or more asynchronous operations. When writing asynchronous code, like when
                dealing with APIs, it’s important to write asynchronous tests because other tests won’t work as you
                expect.</p>
              <p>React testing library has a couple of helper functions for us to write these tests. The <code
                  class="highlighter-rouge">wait</code> function from react testing library lets us tell the test that
                we need to wait for the async call to finish before continuing our assertions.</p>
              <p>As mentioned before, we will also use the <code class="highlighter-rouge">jest.mock</code> function to
                make mocks of the asynchronous functions so we won’t have to wait for the actual call to be made.</p>
              <p>In the following tutorial, we’ll walk through an example using API data. Just like we did with non
                asynchronous tests, we need to import components, render components, simulate an event, and run the test
                - the difference here is simply a few added functions to make calls asynchronous.</p>
              <h5>Follow Along</h5>
              <p>Let’s say we have a component that fetches data from the dog.ceo API when the user pushes a “Fetch
                Doggos” button. The component uses a function called <code class="highlighter-rouge">fetchDoggos</code>
                to make the API call. We have pulled this function out of the component and into an <code
                  class="highlighter-rouge">/api</code> directory in our file structure to make it easier to test. We
                would write a test for this component following these steps:</p>
              <p><strong>Imports</strong></p>
              <p>As usual, we need to <strong>import the required libraries</strong> for testing. In addition to our
                normal libraries, we’ll import <code class="highlighter-rouge">wait</code> to make our function run
                asynchronously, and we’ll import our component <code class="highlighter-rouge">fetchDoggos</code> as
                <code class="highlighter-rouge">mockFetchDoggos</code> so that we don’t have to wait for the actual call
                to be made.</p>
              <ul>
                <li>Import the regular <code class="highlighter-rouge">react</code> and <code
                    class="highlighter-rouge">@testing-library/react</code> dependencies</li>
                <li>Also import <code class="highlighter-rouge">wait</code> from rtl</li>
                <li>Import <code class="highlighter-rouge">fetchDoggos</code> from the <code
                    class="highlighter-rouge">/api</code> directory, and rename it to <code
                    class="highlighter-rouge">mockFetchDoggos</code> so we know that it will be mocked - remember that a
                  mock allows us to isolate a function from its dependencies.</li>
              </ul>
              <div class="language-jsx highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="c1">// import libraries</span>

<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">render</span><span class="p">,</span> <span class="nx">fireEvent</span><span class="p">,</span> <span class="nx">waitFor</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@testing-library/react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">fetchDoggos</span> <span class="k">as</span> <span class="nx">mockFetchDoggos</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../api/fetchDoggos</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Doggos</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Doggos</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// set up test</span>
<span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">renders dog images from API</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{});</span>
</code></pre>
                </div>
              </div>
              <p><strong>Mocking the Async Function</strong></p>
              <p>Next we need to <strong>set up the mock</strong>. Like before, we will create the mock outside of the
                <code class="highlighter-rouge">test</code> block to mock the fetchDoggos async function. Then, inside
                the <code class="highlighter-rouge">test</code> block we will tell the mock function with what data it
                should resolve. When the component makes the async request using our mocked function, it will resolve
                quickly with that data.</p>
              <div class="language-jsx highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="c1">// import libraries</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">render</span><span class="p">,</span> <span class="nx">fireEvent</span><span class="p">,</span> <span class="nx">waitFor</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@testing-library/react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">fetchDoggos</span> <span class="k">as</span> <span class="nx">mockFetchDoggos</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../api/fetchDoggos</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Doggos</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Doggos</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">//create mock *before* setting up test</span>
<span class="nx">jest</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="dl">"</span><span class="s2">../ap/fetchDoggosi</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// set up test</span>
<span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">renders dog images from API</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//mock resolved results</span>
  <span class="nx">mockFetchDoggos</span><span class="p">.</span><span class="nx">mockResolvedValueOnce</span><span class="p">({</span>
    <span class="na">message</span><span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1003.jpg</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1007.jpg</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1023.jpg</span><span class="dl">"</span>
    <span class="p">]</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
                </div>
              </div>
              <p><strong>Render, Query, and Fire Events</strong></p>
              <p>Render the component, query for the necessary elements, and fire the onClick event with <code
                  class="highlighter-rouge">fireEvent</code>. This step should look familiar from our first lessons on
                react testing library as we haven’t added any of the async functionality yet (other than importing <code
                  class="highlighter-rouge">wait</code>).</p>
              <div class="language-jsx highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="c1">//import libraries</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">render</span><span class="p">,</span> <span class="nx">fireEvent</span><span class="p">,</span> <span class="nx">waitFor</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@testing-library/react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">fetchDoggos</span> <span class="k">as</span> <span class="nx">mockFetchDoggos</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../api/fetchDoggos</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Doggos</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Doggos</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">//set up test</span>
<span class="nx">jest</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="dl">"</span><span class="s2">../api/fetchDoggos</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">renders dog images from API</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">mockFetchDoggos</span><span class="p">.</span><span class="nx">mockResolvedValueOnce</span><span class="p">({</span>
    <span class="na">message</span><span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1003.jpg</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1007.jpg</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1023.jpg</span><span class="dl">"</span>
    <span class="p">]</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="p">{</span> <span class="nx">getByText</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(&lt;</span><span class="nc">Doggos</span> <span class="p">/&gt;);</span>

  <span class="kd">const</span> <span class="nx">fetchDoggosButton</span> <span class="o">=</span> <span class="nx">getByText</span><span class="p">(</span><span class="sr">/fetch doggos/i</span><span class="p">);</span>
  <span class="nx">fireEvent</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">fetchDoggosButton</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
                </div>
              </div>
              <p><strong>Async/Await</strong></p>
              <p>At this point, the async call has been made. We need to tell our test that it is going to handle an
                async function by adding <code class="highlighter-rouge">async</code> right after the test name string,
                and before the callback function. This is using JavaScript’s <code
                  class="highlighter-rouge">async/await</code> syntax! Basically this will tell the function that it’s
                going to do an async operation.</p>
              <div class="language-jsx highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="c1">// add async function</span>
<span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">renders dog images from API</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//mock resolved results</span>
  <span class="nx">mockFetchDoggos</span><span class="p">.</span><span class="nx">mockResolvedValueOnce</span><span class="p">({</span>
    <span class="na">message</span><span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1003.jpg</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1007.jpg</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1023.jpg</span><span class="dl">"</span>
    <span class="p">]</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="p">{</span> <span class="nx">getByText</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(&lt;</span><span class="nc">Doggos</span> <span class="p">/&gt;);</span>

  <span class="kd">const</span> <span class="nx">fetchDoggosButton</span> <span class="o">=</span> <span class="nx">getByText</span><span class="p">(</span><span class="sr">/fetch doggos/i</span><span class="p">);</span>
  <span class="nx">fireEvent</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">fetchDoggosButton</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
                </div>
              </div>
              <p><strong>Await and the Wait Function</strong></p>
              <p>Tell the function which async operation it needs to wait for. There are two related parts we need to
                set up here, then we’ll be able to make our assertion.</p>
              <ul>
                <li>Use the <code class="highlighter-rouge">await</code> keyword to tell the function we’re awaiting for
                  the async operation to finish</li>
                <li>Use the <code class="highlighter-rouge">wait</code> function from RTL to wait for RTL to update the
                  DOM so we can query for the dog images</li>
                <li>Write an assertion in the <code class="highlighter-rouge">wait</code> functions callback function.
                  Note that wait is usually required but certain assertions can work without it, you’ll need to do
                  research on a case by case basis to determine wither or not wait is required.</li>
              </ul>
              <div class="language-jsx highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">renders dog images from API</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">mockFetchDoggos</span><span class="p">.</span><span class="nx">mockResolvedValueOnce</span><span class="p">({</span>
    <span class="na">message</span><span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1003.jpg</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1007.jpg</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1023.jpg</span><span class="dl">"</span>
    <span class="p">]</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="p">{</span> <span class="nx">getByText</span><span class="p">,</span> <span class="nx">getAllByTestId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(&lt;</span><span class="nc">Doggos</span> <span class="p">/&gt;);</span>

  <span class="kd">const</span> <span class="nx">fetchDoggosButton</span> <span class="o">=</span> <span class="nx">getByText</span><span class="p">(</span><span class="sr">/fetch doggos/i</span><span class="p">);</span>
  <span class="nx">fireEvent</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">fetchDoggosButton</span><span class="p">);</span>
  <span class="c1">// add await</span>
  <span class="k">await</span> <span class="nx">waitFor</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">expect</span><span class="p">(</span><span class="nx">getAllByTestId</span><span class="p">(</span><span class="sr">/doggo-images/i</span><span class="p">)).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span>
<span class="p">});</span>
</code></pre>
                </div>
              </div>
              <p><strong>One Last Assertion</strong></p>
              <p>Finally, we will make sure that the correct function was called by adding an extra assertion, <code
                  class="highlighter-rouge">expect(mockFetchDoggos).toHaveBeenCalledTimes(1);</code>.</p>
              <div class="language-jsx highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code><span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">renders dog images from API</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">mockFetchDoggos</span><span class="p">.</span><span class="nx">mockResolvedValueOnce</span><span class="p">({</span>
    <span class="na">message</span><span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1003.jpg</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1007.jpg</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://images.dog.ceo/breeds/hound-afghan/n02088094_1023.jpg</span><span class="dl">"</span>
    <span class="p">]</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="p">{</span> <span class="nx">getByText</span><span class="p">,</span> <span class="nx">getAllByTestId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(&lt;</span><span class="nc">Doggos</span> <span class="p">/&gt;);</span>

  <span class="kd">const</span> <span class="nx">fetchDoggosButton</span> <span class="o">=</span> <span class="nx">getByText</span><span class="p">(</span><span class="sr">/fetch doggos/i</span><span class="p">);</span>
  <span class="nx">fireEvent</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">fetchDoggosButton</span><span class="p">);</span>

  <span class="c1">// add new assertion</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">mockFetchDoggos</span><span class="p">).</span><span class="nx">toHaveBeenCalledTimes</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

  <span class="k">await</span> <span class="nx">waitFor</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">expect</span><span class="p">(</span><span class="nx">getAllByTestId</span><span class="p">(</span><span class="sr">/doggo-images/i</span><span class="p">)).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span>
<span class="p">});</span>
</code></pre>
                </div>
              </div>
              <h5>Challenge</h5>
              <p>Research on your own how to test async code using <code class="highlighter-rouge">jest-axe</code> and
                <code class="highlighter-rouge">toHaveNoViolations</code> for accessibility.</p>
              <hr>
              <h2 class="display-4">
                <a id="project" class="anchor" href="#project" aria-hidden="true"><span
                    class="octicon octicon-link"></span></a>Project</h2>
              <ul class="list-group">
                <li class="list-group-item">
                  <h5><a target="_blank" href="https://github.com/LambdaSchool/React-Testing-TV-Show">React Testing - TV
                      Show</a></h5>
                </li>
              </ul>
              <h2 class="display-4">
                <a id="review" class="anchor" href="#review" aria-hidden="true"><span
                    class="octicon octicon-link"></span></a>Review</h2>
              <h3 class="display-5">Class Recordings</h3>
              <p class="lead">You can use class recordings to help you master the material.</p>
              <div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">
                    <strong><a target="_blank" href="https://youtu.be/_sPYk32r_r8">Testing React for Web35 w/Warren
                        Longmire</a></strong>
                    <p>Testing React</p>
                  </li>
                  <li class="list-group-item">
                    <a href="/archive/WEB3/module/recS9H6qCj0dQe32B">All previous recordings</a>
                  </li>
                </ul>
              </div>
              <h3 class="display-5">Demonstrate Mastery</h3>
              <p>To demonstrate mastery of this module, you need to complete and pass a code review on each of the
                following:</p>
              <ul>
                <li>Objective challenge: <p>Find an example of updating props in a previous project. Design a test using
                    <code class="highlighter-rouge">rerender</code> that will assert one state after the component first
                    renders, and assert a different state after he component renders again with new props.</p>
                </li>
                <li>Objective challenge: <p>There is a way to centralize mocks that are used often (think <code
                      class="highlighter-rouge">uuid</code>, or <code class="highlighter-rouge">axios</code>) in
                    external files, so that they are used in test suites without even bothering with imports. Go to the
                    Jest docs and see if you can find out how!</p>
                </li>
                <li>Objective challenge: <p>Research on your own how to test async code using <code
                      class="highlighter-rouge">jest-axe</code> and <code
                      class="highlighter-rouge">toHaveNoViolations</code> for accessibility.</p>
                </li>
                <li>Project: React Testing - TV Show</li>
              </ul>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-80850900-4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push( arguments );
      }
      gtag( 'js', new Date() );

      gtag( 'config', 'UA-80850900-4' );
    </script>
    <script type="text/javascript">
      function getDomain() {
        const domainName = window.location.hostname.split( '.' )[ 1 ];
        return `${domainName}.com`;
      }
    </script>
    <script src="" integrity="" crossorigin="anonymous"></script>
    <script>
      window.jQuery || document.write( '<script src="/assets/js/vendor/jquery-slim.min.js"><\/script>' )
    </script>
    <script src="/assets/js/vendor/popper.min.js" integrity="" crossorigin="anonymous"></script>
    <script src="/dist/js/bootstrap.min.js" integrity="" crossorigin="anonymous"></script>
    <script src="/assets/js/activate.js"></script>
    <script src="/assets/js/jekyll-search.js" type="text/javascript"></script>
    <script type="text/javascript">
      SimpleJekyllSearch.init( {
        searchInput: document.getElementById( 'search-input' ),
        resultsContainer: document.getElementById( 'results-container' ),
        dataSource: '/search.json',
        searchResultTemplate: '<li class="list-group-item"><a href="{url}" title="Testing React">{title}</a></li>',
        noResultsText: '',
        limit: 10,
        fuzzy: true,
      } )
    </script>
    <script src="/assets/js/mermaid.min.js"></script>
    <script type="text/javascript">
      if ( window.attachEvent ) {
        window.attachEvent( 'onload', verifySignedIn );
      } else {
        if ( window.onload ) {
          var currentOnLoadFn = window.onload;
          var newOnLoadFn = function ( evt ) {
            currentOnLoadFn( evt );
            verifySignedIn();
          };
          window.onload = newOnLoadFn;
        } else {
          window.onload = verifySignedIn;
        }
      }

      function verifySignedIn() {
        if ( isPagePublic() ) {
          return showPageContents();
        }

        window.__user = null;
        isSignedIn().then( ( user ) => {
          window.__user = user;

          if ( !user.signedIn ) {
            redirectToSignIn();
          } else if ( !user.student && !window.__openToAdmissions ) {
            showUnauthorizedMessage();
          } else {
            showPageContents();
          }
        } );
      }

      function isPagePublic() {
        const openCourses = [
          'and-pre',
          'ds-pre',
          'fsw-pre',
          'help',
          'ios-pre',
        ];

        const openPages = [
          'cs-and',
          'cs-fsw',
          'cs-ios',
          'cr',
          'ds',
          'jx',
          'p4s',
          'ux',
        ];

        const pathParts = window.location.pathname.split( '/' );
        const courseName = pathParts[ 1 ];
        const pageName = pathParts[ pathParts.length - 1 ];

        return openCourses.includes( courseName ) || openPages.includes( pageName );
      }

      function isSignedIn() {
        const isDeployPreview = window.location.hostname.startsWith( 'deploy-preview' ) && window.location.hostname
          .endsWith( 'netlify.com' );

        if ( isDeployPreview ) return Promise.resolve( {
          signedIn: true,
          student: true
        } );

        return fetch( `${getAuthBaseUrl()}/whoami`, {
            credentials: 'include'
          } )
          .then( ( response ) => response.text() )
          .then( ( userAsText ) => userAsText ? JSON.parse( userAsText ) : null )
          .then( ( userData ) => ( {
            signedIn: Boolean( userData ),
            student: Boolean( userData && userData.airtableId ),
            id: userData ? userData.id : null,
            email: userData ? userData.email : null
          } ) )
          .catch( ( error ) => {} );
      }

      function redirectToSignIn() {
        const signInUrl =
          `${getAuthBaseUrl()}/sign-in?redirect=${encodeURIComponent(window.location.href)}&reason=auth_required`
        const redirectMessage = document.querySelector( '#redirect-message' );
        redirectMessage.style.display = "block";
        redirectMessage.innerHTML =
          `<div>You are being redirected to the sign in page. If you aren't redirected automatically, you can use <a href=${signInUrl}>this link</a>.</div>`
        window.location = signInUrl;
      }

      function showPageContents() {
        document.querySelector( '#content-wrapper' ).style.visibility = 'visible';
      }

      function showUnauthorizedMessage() {
        document.querySelector( '#unauthorized-message' ).style.display = 'block';
      }

      function getAuthBaseUrl() {
        const domain = getDomain();
        const authBaseUrl = `https://auth.${domain}`;
        return authBaseUrl;
      }
    </script>
    <script src="/assets/js/docs.min.js"></script>
    <script>
      var MathJax = {
        tex: {
          inlineMath: [
            [ '$$', '$$' ],
            [ '\[', '\])' ]
          ]
        },
        "HTML-CSS": {
          styles: {
            ".MathJax span": {
              color: "#000000"
            }
          }
        }
      }
    </script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
    </script>
    <script>
      handleExternalLinks();

      function handleExternalLinks() {
        const domain = getDomain();
        const links = document.querySelectorAll( 'a' );
        return links.forEach( ( link ) => {
          if ( !link.host.includes( domain ) ) link.target = '_blank';
        } )
      };
    </script>
  </div>
</body>

</html>
